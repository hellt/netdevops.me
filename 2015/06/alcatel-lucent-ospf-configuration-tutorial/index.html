<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial |</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content><meta name=twitter:title content="Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial"><meta name=twitter:description content><meta name=twitter:creator content="@ntdvps"><meta name=Description content="DevOps applied to networking"><meta property="og:title" content="Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial"><meta property="og:description" content="The purpose of this post is to cover basic OSPFv2 configuration steps and commands for Nokia SROS routers. Intended readers are engineers with basic OSPF knowledge who want to know how to configure OSPF on Alcatel-Lucent Service Routers (7750-SR, 7705-SR, 7210-SR).
All examples are valid for TiMOS-B-12.0.R8 software."><meta property="og:type" content="article"><meta property="og:url" content="https://netdevops.me/2015/06/alcatel-lucent-ospf-configuration-tutorial/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-06-22T18:45:53+00:00"><meta property="article:modified_time" content="2021-04-19T12:35:46+02:00"><meta name=application-name content="NetDevOps"><meta name=apple-mobile-web-app-title content="NetDevOps"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://netdevops.me/2015/06/alcatel-lucent-ospf-configuration-tutorial/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/netdevops.me\/2015\/06\/alcatel-lucent-ospf-configuration-tutorial\/"},"genre":"posts","keywords":"SROS, Nokia, OSPF","wordCount":7599,"url":"https:\/\/netdevops.me\/2015\/06\/alcatel-lucent-ospf-configuration-tutorial\/","datePublished":"2015-06-22T18:45:53+00:00","dateModified":"2021-04-19T12:35:46+02:00","description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':''==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:''==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header><div class="desktop header" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class="header-logo logo-svg">NetDevOps</a></div><div class=menu><nav><h2 class=display-hidden>Основная навигация</h2><ul class=menu-inner><li><a class=menu-item href=/posts/>Posts</a></li><li><a class=menu-item href=/tags/>Tags</a></li></ul></nav><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=Search... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-desktop><span class="svg-icon icon-loading"></span></span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="mobile header" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class=header-logo>NetDevOps</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=Search... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-mobile><span class="svg-icon icon-loading"></span></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><nav><h2 class=display-hidden>Основная навигация</h2><ul><li><a class=menu-item href=/posts/ title>Posts</a></li><li><a class=menu-item href=/tags/ title>Tags</a></li></ul></nav><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div></header><main class=main><div class="container content-article theme-classic"><div class=toc id=toc-auto><div class=toc-title>Contents</div><div class="toc-content always-active" id=toc-content-auto></div></div><article><header class=header-post><div class=post-title><div class=post-all-meta><nav class=breadcrumbs><ol><li><a href=/>Home</a></li><li>Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial</li></ol></nav><h1 class="single-title flipInX">Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial</h1><div class="post-meta summary-post-meta"><span class="post-meta-date meta-item"><span class="svg-icon icon-clock"></span><time class=timeago datetime=2015-06-22>2015-06-22</time>
</span><span class="post-meta-words meta-item"><span class="svg-icon icon-pencil"></span>7599 words</span>
<span class="post-meta-reading meta-item"><span class="svg-icon icon-stopwatch"></span>36 minutes</span></div></div></div></header><div class="article-post toc-start"><div class="content-block content-block-first content-block-position"><div class="post single"><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#enabling-ospf>Enabling OSPF</a></li><li><a href=#router-id>Router ID</a></li><li><a href=#configuring-backbone-area>Configuring Backbone Area</a></li><li><a href=#configuring-ospf-interfaces>Configuring OSPF interfaces</a></li><li><a href=#verification>Verification</a></li></ul><ul><li><a href=#examining-multi-area-lsdb>Examining Multi-area LSDB</a></li></ul><ul><li><a href=#verifying-redistributed-routes-propagation>Verifying redistributed routes propagation</a></li></ul></nav></div></div><div style="margin:20px 0"><span class=post-update><span class=s>Updated on 2021-04-19</span></span></div><p>The purpose of this post is to cover basic <a href=https://tools.ietf.org/html/rfc2328 target=_blank rel="noopener noreffer">OSPFv2</a> configuration steps and commands for Nokia SROS routers. Intended readers are engineers with basic OSPF knowledge who want to know how to configure OSPF on Alcatel-Lucent Service Routers (7750-SR, 7705-SR, 7210-SR).</p><p>All examples are valid for <code>TiMOS-B-12.0.R8</code> software.</p><h1 id=single-area-ospf class=headerLink><a href=#single-area-ospf class=header-mark></a>Single-area OSPF</h1><p>Basic OSPF protocol configuration in a single area consists of the following steps:</p><ol><li>Enable OSPF globally</li><li>Configure router with OSPF <em>Router ID</em></li><li>Configure backbone OSPF <em>Area 0</em></li><li>Include interfaces in <em>Area 0</em></li></ol><p>The following network topology will be used throughout this tutorial:</p><p><img class=aligncenter src=http://img-fotki.yandex.ru/get/9739/21639405.11b/0_83cb2_d11bc8dc_XL.png alt width=530 height=705></p><h2 id=enabling-ospf class=headerLink><a href=#enabling-ospf class=header-mark></a>Enabling OSPF</h2><p>To enable OSPF on a router simply issue <code>configure router ospf</code> command. This will start OSPF process #0 on a router. If you would like to run another separate OSPF process on the same router, use <code>configure router ospf &lt;N></code>, where <em>N</em> is a decimal number of the desired OSPF process.</p><h2 id=router-id class=headerLink><a href=#router-id class=header-mark></a>Router ID</h2><p>Each router running OSPF should have an unique 32-bit identifier, namely <strong>Router ID</strong>. This identifier will be equal to the first configured value in the following prioritized:</p><ol><li><code>router-id</code> value configured globally for a router</li><li><code>system</code> interface IPv4 address value</li><li>the last 32 bits of the chassis MAC address</li></ol><p>Configuring router-id explicitly:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# configure router router-id
  - no router-id
  - router-id  &lt;ip-address&gt;

  &lt;ip-address&gt;         : a.b.c.d

*A:R1# configure router router-id 2.2.2.2
</code></pre></td></tr></table></div></div><p>Use <code>show router ospf status</code> command to check Router ID current value and OSPF status:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# show router ospf status

===============================================================================
OSPFv2 (0) Status
===============================================================================
OSPF Cfg Router Id           : 0.0.0.0
OSPF Oper Router Id          : 1.1.1.1    # Router ID inherited from System IPv4 address
OSPF Version                 : 2
OSPF Admin Status            : Enabled    # OSPF administratively enabled
OSPF Oper Status             : Enabled    # OSPF is operating

&lt;output omitted&gt;
</code></pre></td></tr></table></div></div><h2 id=configuring-backbone-area class=headerLink><a href=#configuring-backbone-area class=header-mark></a>Configuring Backbone Area</h2><p>Are configuration is done in the OSPF configuration context with <code>area</code> command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1&gt;config&gt;router&gt;ospf# area
  - area  &lt;area-id&gt;
  - no area  &lt;area-id&gt;

  &lt;area-id&gt;            :  &lt;ip-address&gt; |  [0..4294967295]
</code></pre></td></tr></table></div></div><p>Area ID can be set either as decimal (<code>area 0</code>) or in dotted-decimal format (<code>area 0.0.0.0</code>).</p><p>It is easier to enable OSPF and set the Area ID in a single sweep:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback># This command will enable OSPF process (it is disabled by default) and configure Area 0 on this router.

A:R1# configure router ospf area 0
</code></pre></td></tr></table></div></div><p>To check all the configured areas on a router use <code>show router ospf area</code> command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf area

==================================================================
OSPFv2 (0) all areas
==================================================================
Area Id         Type        SPF Runs    LSA Count   LSA Cksum Sum
------------------------------------------------------------------
0.0.0.0         Standard    2           1           0xcaf7
------------------------------------------------------------------
No. of OSPF Areas: 1
==================================================================
</code></pre></td></tr></table></div></div><h2 id=configuring-ospf-interfaces class=headerLink><a href=#configuring-ospf-interfaces class=header-mark></a>Configuring OSPF interfaces</h2><p>Once the <em>backbone area</em> is configured its time to add some interfaces to it with <code>interface &lt;interface_name></code> command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># Entering to OSPF Area 0 configuration context</span><span class=err>
</span><span class=err></span>*A:R1# configure router ospf area <span class=m>0</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Adding system interface to OSPF process</span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area# interface <span class=s2>&#34;system&#34;</span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$ back<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Adding interface toR2 and configuring it with point-to-point type</span><span class=err>
</span><span class=err></span><span class=c># By default, ethernet interfaces use Broadcast interface type </span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area# interface <span class=s2>&#34;toR2&#34;</span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$ interface-type point-to-point<span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$ back<span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area# back<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># This configuration steps effectively lead us to this OSPF configuration for router R1</span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf# info<span class=err>
</span><span class=err></span>----------------------------------------------<span class=err>
</span><span class=err></span>            area 0.0.0.0<span class=err>
</span><span class=err></span>                interface <span class=s2>&#34;system&#34;</span><span class=err>
</span><span class=err></span>                    no shutdown<span class=err>
</span><span class=err></span>                exit<span class=err>
</span><span class=err></span>                interface <span class=s2>&#34;toR2&#34;</span><span class=err>
</span><span class=err></span>                    interface-type point-to-point<span class=err>
</span><span class=err></span>                    no shutdown<span class=err>
</span><span class=err></span>                exit<span class=err>
</span><span class=err></span>            exit<span class=err>
</span><span class=err></span>            no shutdown<span class=err>
</span><span class=err></span>----------------------------------------------<span class=err>
</span></code></pre></td></tr></table></div></div><p>To check that OSPF interfaces were configured properly by evaluating their status use:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# show router ospf interface

===============================================================================
OSPFv2 (0) all interfaces
===============================================================================
If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper
-------------------------------------------------------------------------------
system                0.0.0.0         1.1.1.1         0.0.0.0         Up   DR
toR2                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
-------------------------------------------------------------------------------
No. of OSPF Interfaces: 2
===============================================================================
</code></pre></td></tr></table></div></div><p>Repeat the same configuration steps to include all interfaces to <em>OSPF Area 0</em> for the other backbone routers R2, R3, R4 and you will end up with a fully configured <em>OSPF Backbone Area</em>.</p><h2 id=verification class=headerLink><a href=#verification class=header-mark></a>Verification</h2><p>Finally its time to check that our routers have established the neighboring relationships:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf neighbor

===============================================================================
OSPFv2 (0) all neighbors
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
toR2                             2.2.2.2         Full       1    0       33
   0.0.0.0
toR3                             3.3.3.3         Full       1    0       39
   0.0.0.0
-------------------------------------------------------------------------------
No. of Neighbors: 2
===============================================================================
</code></pre></td></tr></table></div></div><p>One of the most useful OSPF verification commands is <code>show router ospf database</code>. This command shows all the <em>Links State Advertisements</em> (LSA) and helps the engineer to troubleshoot OSPF-related issues.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.0         1.1.1.1         1.1.1.1         873  0x8000000b 0x4dd5
Router  0.0.0.0         2.2.2.2         2.2.2.2         561  0x80000006 0x1c2b
Router  0.0.0.0         3.3.3.3         3.3.3.3         879  0x80000008 0x6d94
Router  0.0.0.0         4.4.4.4         4.4.4.4         1588 0x80000005 0x94ec
-------------------------------------------------------------------------------
No. of LSAs: 4
===============================================================================
</code></pre></td></tr></table></div></div><p>You can query OSPF database for a specific LSAs by augmenting the above mentioned command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf database
  - database [type {router|network|summary|asbr-summary|external|nssa|all}]
    [area  &lt;area-id&gt;] [adv-router  &lt;router-id&gt;] [ &lt;link-state-id&gt;] [detail]

  &lt;router|network|su*&gt; : keywords - specify database type
  &lt;area-id&gt;            : ip-address - a.b.c.d
                        area - [0..4294967295]
  &lt;router-id&gt;          : a.b.c.d
  &lt;link-state-id&gt;      : a.b.c.d
  &lt;detail&gt;             : keyword - displays detailed information
</code></pre></td></tr></table></div></div><h1 id=multi-area-ospf class=headerLink><a href=#multi-area-ospf class=header-mark></a>Multi-area OSPF</h1><p>Basic Multi-area OSPF configuration is straightforward as well. I added two more routers to the topology and introduced two areas: Area 1 and Area 2.</p><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/6828/21639405.11b/0_83cb9_73aa3ab3_orig.png alt=pic title=0_83cb9_73aa3ab3_orig.png></p><p><small>I mistyped the port numbers for R5-R1 and R6-R2 pairs, it should be 1/1/4. Though this wont affect the course of this tutorial in anyway.</small></p><p>We will start by configuring <code>Area 1</code> on routers R5 and R1 using the same commands we used for single-area OSPF configuration.</p><p>R5 configuration:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># Creating Area 1 on R5 and adding &#34;system&#34; and &#34;toR1&#34; interfaces</span><span class=err>
</span><span class=err></span>A:R5# configure router ospf area <span class=m>1</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;ospf&gt;area$ interface <span class=s2>&#34;toR1&#34;</span> interface-type point-to-point<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;ospf&gt;area$ interface <span class=s2>&#34;system&#34;</span><span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Verifying created Area 1 and its interfaces</span><span class=err>
</span><span class=err></span>*A:R5# show router ospf interface<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>OSPFv2 <span class=o>(</span>0<span class=o>)</span> all interfaces<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>system                0.0.0.1         5.5.5.5         0.0.0.0         Up   DR<span class=err>
</span><span class=err></span>toR1                  0.0.0.1         0.0.0.0         0.0.0.0         Up   PToP<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of OSPF Interfaces: <span class=m>2</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span></code></pre></td></tr></table></div></div><p>R1 configuration</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># Creating Area 1 on R1 (ABR) and adding &#34;toR5&#34; interface to it.</span><span class=err>
</span><span class=err>
</span><span class=err></span>*A:R1# configure router ospf area <span class=m>1</span><span class=err>
</span><span class=err></span>*A:R1&gt;config&gt;router&gt;ospf&gt;area$ interface <span class=s2>&#34;toR5&#34;</span> interface-type point-to-point<span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Verifying created Area 1 and its interfaces</span><span class=err>
</span><span class=err></span>*A:R1# show router ospf interface<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>OSPFv2 <span class=o>(</span>0<span class=o>)</span> all interfaces<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>system                0.0.0.0         1.1.1.1         0.0.0.0         Up   DR<span class=err>
</span><span class=err></span>toR2                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP<span class=err>
</span><span class=err></span>toR3                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP<span class=err>
</span><span class=err></span>toR5                  0.0.0.1         0.0.0.0         0.0.0.0         Up   PToP<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of OSPF Interfaces: <span class=m>4</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span></code></pre></td></tr></table></div></div><p>Adding one more <em>Area</em> (besides backbone Area 0) on R1 makes it <em>Area Border Router.</em> So R1 will form and maintain another neighbor relationships with R5 in Area 1. We will check if its true:</p><p>R5 verification:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R5# show router ospf neighbor

===============================================================================
OSPFv2 (0) all neighbors
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
toR1                             1.1.1.1         Full       1    0       33
   0.0.0.1
-------------------------------------------------------------------------------
No. of Neighbors: 1
===============================================================================
</code></pre></td></tr></table></div></div><p>R1 verification:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# show router ospf neighbor

===============================================================================
OSPFv2 (0) all neighbors
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
toR2                             2.2.2.2         Full       1    0       32
   0.0.0.0
toR3                             3.3.3.3         Full       1    0       36
   0.0.0.0
toR5                             5.5.5.5         Full       1    0       31
   0.0.0.1
-------------------------------------------------------------------------------
No. of Neighbors: 3
===============================================================================
</code></pre></td></tr></table></div></div><p>I repeated same configuration steps on R6: added it to Area 2 and neighbored with R2.</p><h2 id=examining-multi-area-lsdb class=headerLink><a href=#examining-multi-area-lsdb class=header-mark></a>Examining Multi-area LSDB</h2><p>Since we configured multi-area OSPF we should expect to see some new LSA in our Link State Database:</p><p>On R1:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.0         1.1.1.1         1.1.1.1         550  0x80000007 0x58cd
Router  0.0.0.0         2.2.2.2         2.2.2.2         668  0x80000006 0xaf65
Router  0.0.0.0         3.3.3.3         3.3.3.3         193  0x80000006 0x7192
Router  0.0.0.0         4.4.4.4         4.4.4.4         732  0x80000007 0xa34d
Summary 0.0.0.0         5.5.5.5         1.1.1.1         773  0x80000002 0x508f
Summary 0.0.0.0         10.1.5.0        1.1.1.1         1091 0x80000002 0x7172
Summary 0.0.0.0         6.6.6.6         2.2.2.2         519  0x80000002 0x4d3
Summary 0.0.0.0         10.2.6.0        2.2.2.2         724  0x80000002 0x3ca1
Router  0.0.0.1         1.1.1.1         1.1.1.1         830  0x80000004 0x50ea
Router  0.0.0.1         5.5.5.5         5.5.5.5         171  0x80000005 0x47bb
Summary 0.0.0.1         1.1.1.1         1.1.1.1         660  0x80000002 0x1d37
Summary 0.0.0.1         2.2.2.2         1.1.1.1         183  0x80000002 0xda11
Summary 0.0.0.1         3.3.3.3         1.1.1.1         122  0x80000002 0xac3b
Summary 0.0.0.1         4.4.4.4         1.1.1.1         318  0x80000002 0x6a15
Summary 0.0.0.1         6.6.6.6         1.1.1.1         207  0x80000002 0xe69
Summary 0.0.0.1         10.1.2.0        1.1.1.1         377  0x80000003 0x9055
Summary 0.0.0.1         10.1.3.0        1.1.1.1         262  0x80000003 0x855f
Summary 0.0.0.1         10.2.4.0        1.1.1.1         1039 0x80000003 0x5a24
Summary 0.0.0.1         10.2.6.0        1.1.1.1         864  0x80000002 0x4637
Summary 0.0.0.1         10.3.4.0        1.1.1.1         1056 0x80000003 0x4e2f
-------------------------------------------------------------------------------
No. of LSAs: 20
===============================================================================
</code></pre></td></tr></table></div></div><p>On R5:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         900  0x80000004 0x50ea
Router  0.0.0.1         5.5.5.5         5.5.5.5         238  0x80000005 0x47bb
Summary 0.0.0.1         1.1.1.1         1.1.1.1         728  0x80000002 0x1d37
Summary 0.0.0.1         2.2.2.2         1.1.1.1         252  0x80000002 0xda11
Summary 0.0.0.1         3.3.3.3         1.1.1.1         190  0x80000002 0xac3b
Summary 0.0.0.1         4.4.4.4         1.1.1.1         387  0x80000002 0x6a15
Summary 0.0.0.1         6.6.6.6         1.1.1.1         276  0x80000002 0xe69
Summary 0.0.0.1         10.1.2.0        1.1.1.1         446  0x80000003 0x9055
Summary 0.0.0.1         10.1.3.0        1.1.1.1         329  0x80000003 0x855f
Summary 0.0.0.1         10.2.4.0        1.1.1.1         1106 0x80000003 0x5a24
Summary 0.0.0.1         10.2.6.0        1.1.1.1         932  0x80000002 0x4637
Summary 0.0.0.1         10.3.4.0        1.1.1.1         1124 0x80000003 0x4e2f
-------------------------------------------------------------------------------
No. of LSAs: 12
===============================================================================
</code></pre></td></tr></table></div></div><p>Aha, R1 being an ABR lists all LSA&rsquo;s for both Area 0 and Area 1. Moreover, R1 lists <em>Type 3 Summary LSA from Area 0 to Area 1</em> and vice versa, <em>from Area 1 to Area 0</em>.</p><p>R5 has only Area 1 LSAs, since R5 &ldquo;lives&rdquo; exactly in a single area - Area 1.</p><h1 id=ospf-routes-propagation class=headerLink><a href=#ospf-routes-propagation class=header-mark></a>OSPF routes propagation</h1><p>To ensure that OSPF routers exchanged OSPF routes lets check R5 and R1 routing tables:</p><p>On R1 (ABR):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># Checking routes that have been received via OSPF</span><span class=err>
</span><span class=err>
</span><span class=err></span>*A:R1# show router route-table protocol ospf<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>2.2.2.2/32                                    Remote  OSPF      03h01m17s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>3.3.3.3/32                                    Remote  OSPF      03h01m13s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.3.3                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>4.4.4.4/32                                    Remote  OSPF      03h01m10s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>5.5.5.5/32                                    Remote  OSPF      00h39m07s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.5                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>6.6.6.6/32                                    Remote  OSPF      00h19m38s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.2.4.0/24                                   Remote  OSPF      04h15m26s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.2.6.0/24                                   Remote  OSPF      00h19m48s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.3.4.0/24                                   Remote  OSPF      04h15m26s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.3.3                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>8</span><span class=err>
</span><span class=err></span>Flags: <span class=nv>n</span> <span class=o>=</span> Number of <span class=nb>times</span> nexthop is repeated<span class=err>
</span><span class=err></span>       <span class=nv>B</span> <span class=o>=</span> BGP backup route available<span class=err>
</span><span class=err></span>       <span class=nv>L</span> <span class=o>=</span> LFA nexthop available<span class=err>
</span><span class=err></span>       <span class=nv>S</span> <span class=o>=</span> Sticky ECMP requested<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Checking R1&#39;s route table</span><span class=err>
</span><span class=err>
</span><span class=err></span>A:R1# show router route-table<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>1.1.1.1/32                                    Local   Local     00h20m56s  <span class=m>0</span><span class=err>
</span><span class=err></span>       system                                                       <span class=m>0</span><span class=err>
</span><span class=err></span>2.2.2.2/32                                    Remote  OSPF      00h15m29s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>3.3.3.3/32                                    Remote  OSPF      00h15m11s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.3.3                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>4.4.4.4/32                                    Remote  OSPF      00h14m40s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>5.5.5.5/32                                    Remote  OSPF      00h18m59s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.5                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>6.6.6.6/32                                    Remote  OSPF      00h16m28s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.1.2.0/24                                   Local   Local     00h20m36s  <span class=m>0</span><span class=err>
</span><span class=err></span>       toR2                                                         <span class=m>0</span><span class=err>
</span><span class=err></span>10.1.3.0/24                                   Local   Local     00h20m36s  <span class=m>0</span><span class=err>
</span><span class=err></span>       toR3                                                         <span class=m>0</span><span class=err>
</span><span class=err></span>10.1.5.0/24                                   Local   Local     00h20m36s  <span class=m>0</span><span class=err>
</span><span class=err></span>       toR5                                                         <span class=m>0</span><span class=err>
</span><span class=err></span>10.2.4.0/24                                   Remote  OSPF      00h20m31s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.2.6.0/24                                   Remote  OSPF      00h16m38s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.2.2                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.3.4.0/24                                   Remote  OSPF      00h20m30s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.3.3                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>12</span><span class=err>
</span><span class=err></span>Flags: <span class=nv>n</span> <span class=o>=</span> Number of <span class=nb>times</span> nexthop is repeated<span class=err>
</span><span class=err></span>       <span class=nv>B</span> <span class=o>=</span> BGP backup route available<span class=err>
</span><span class=err></span>       <span class=nv>L</span> <span class=o>=</span> LFA nexthop available<span class=err>
</span><span class=err></span>       <span class=nv>S</span> <span class=o>=</span> Sticky ECMP requested<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span></code></pre></td></tr></table></div></div><p>On R5:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile>*A:R5# show router route-table protocol ospf<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>1.1.1.1/32                                    Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>2.2.2.2/32                                    Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>3.3.3.3/32                                    Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>4.4.4.4/32                                    Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>6.6.6.6/32                                    Remote  OSPF      00h20m14s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.1.2.0/24                                   Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.1.3.0/24                                   Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.2.4.0/24                                   Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.2.6.0/24                                   Remote  OSPF      00h20m25s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.3.4.0/24                                   Remote  OSPF      02h57m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>10</span><span class=err>
</span><span class=err></span>Flags: <span class=nv>n</span> <span class=o>=</span> Number of <span class=nb>times</span> nexthop is repeated<span class=err>
</span><span class=err></span>       <span class=nv>B</span> <span class=o>=</span> BGP backup route available<span class=err>
</span><span class=err></span>       <span class=nv>L</span> <span class=o>=</span> LFA nexthop available<span class=err>
</span><span class=err></span>       <span class=nv>S</span> <span class=o>=</span> Sticky ECMP requested<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># Checking R5&#39;s route table</span><span class=err>
</span><span class=err>
</span><span class=err></span>A:R5# show router route-table<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>1.1.1.1/32                                    Remote  OSPF      00h20m13s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>100</span><span class=err>
</span><span class=err></span>2.2.2.2/32                                    Remote  OSPF      00h19m27s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>3.3.3.3/32                                    Remote  OSPF      00h19m09s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>4.4.4.4/32                                    Remote  OSPF      00h18m37s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>5.5.5.5/32                                    Local   Local     00h24m57s  <span class=m>0</span><span class=err>
</span><span class=err></span>       system                                                       <span class=m>0</span><span class=err>
</span><span class=err></span>6.6.6.6/32                                    Remote  OSPF      00h20m25s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.1.2.0/24                                   Remote  OSPF      00h23m46s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.1.3.0/24                                   Remote  OSPF      00h23m46s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>200</span><span class=err>
</span><span class=err></span>10.1.5.0/24                                   Local   Local     00h24m37s  <span class=m>0</span><span class=err>
</span><span class=err></span>       toR1                                                         <span class=m>0</span><span class=err>
</span><span class=err></span>10.2.4.0/24                                   Remote  OSPF      00h23m47s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.2.6.0/24                                   Remote  OSPF      00h20m36s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>10.3.4.0/24                                   Remote  OSPF      00h23m47s  <span class=m>10</span><span class=err>
</span><span class=err></span>       10.1.5.1                                                     <span class=m>300</span><span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>12</span><span class=err>
</span><span class=err></span>Flags: <span class=nv>n</span> <span class=o>=</span> Number of <span class=nb>times</span> nexthop is repeated<span class=err>
</span><span class=err></span>       <span class=nv>B</span> <span class=o>=</span> BGP backup route available<span class=err>
</span><span class=err></span>       <span class=nv>L</span> <span class=o>=</span> LFA nexthop available<span class=err>
</span><span class=err></span>       <span class=nv>S</span> <span class=o>=</span> Sticky ECMP requested<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span></code></pre></td></tr></table></div></div><p>Since we configured all the routers in our topology and verified that the routes have been propagated properly we can try to run <code>ping</code> between R6 and R5 system interfaces:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R6# ping 5.5.5.5
PING 5.5.5.5 56 data bytes
64 bytes from 5.5.5.5: icmp_seq=1 ttl=62 time=11.7ms.
</code></pre></td></tr></table></div></div><h1 id=ospf-route-summarization class=headerLink><a href=#ospf-route-summarization class=header-mark></a>OSPF Route Summarization</h1><p>So far we have configured multi-area OSPF topology with three Areas. One of the multi-area OSPF benefits is to perform <em>manual route summarization</em>. In this section we will configure OSPF route summarization between Area 0 and Area 1.</p><p>The idea is depicted below where we will have a single Summary LSA (Type 3) in the Area 1 instead of three different LSAs.</p><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/16191/21639405.11b/0_83cbc_fd84eebd_orig.png alt=pic title=0_83cbc_fd84eebd_orig.png></p><p>To get a range of IP addresses which we will summarize later we will add 3 loopback interfaces to R3 router and include them in OSPF Area 0:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R3# show router interface

===============================================================================
Interface Table (Router: Base)
===============================================================================
Interface-Name                   Adm         Opr(v4/v6)  Mode    Port/SapId
   IP-Address                                                    PfxState
-------------------------------------------------------------------------------
lo1                              Up          Up/--       Network loopback
   192.168.3.1/32                                                n/a
lo2                              Up          Up/--       Network loopback
   192.168.3.2/32                                                n/a
lo3                              Up          Up/--       Network loopback
   192.168.3.3/32                                                n/a
 &lt;output omitted&gt;


*A:R3# show router ospf interface

===============================================================================
OSPFv2 (0) all interfaces
===============================================================================
If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper
-------------------------------------------------------------------------------
system                0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
toR1                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
toR4                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
lo1                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
lo2                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
lo3                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
-------------------------------------------------------------------------------
No. of OSPF Interfaces: 6
===============================================================================
</code></pre></td></tr></table></div></div><p>Since we added these interfaces to OSPF Area 0 we see them coming to R5 router as <em>Type 3 Network Summary LSA</em>. And these routes make their way to the routing table of R5.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         531  0x80000005 0x4eeb
Router  0.0.0.1         5.5.5.5         5.5.5.5         43   0x80000006 0x45bc
Summary 0.0.0.1         1.1.1.1         1.1.1.1         496  0x80000003 0x1b38
Summary 0.0.0.1         2.2.2.2         1.1.1.1         1898 0x80000002 0xda11
Summary 0.0.0.1         3.3.3.3         1.1.1.1         225  0x80000003 0xaa3c
Summary 0.0.0.1         4.4.4.4         1.1.1.1         463  0x80000003 0x6816
Summary 0.0.0.1         6.6.6.6         1.1.1.1         373  0x80000003 0xc6a
Summary 0.0.0.1         10.1.2.0        1.1.1.1         323  0x80000004 0x8e56
Summary 0.0.0.1         10.1.3.0        1.1.1.1         32   0x80000004 0x8360
Summary 0.0.0.1         10.2.4.0        1.1.1.1         513  0x80000004 0x5825
Summary 0.0.0.1         10.2.6.0        1.1.1.1         1089 0x80000003 0x4438
Summary 0.0.0.1         10.3.4.0        1.1.1.1         1188 0x80000004 0x4c30
Summary 0.0.0.1         192.168.3.1     1.1.1.1         566  0x80000001 0x5c2b
Summary 0.0.0.1         192.168.3.2     1.1.1.1         560  0x80000001 0x5234
Summary 0.0.0.1         192.168.3.3     1.1.1.1         554  0x80000001 0x483d
-------------------------------------------------------------------------------
No. of LSAs: 15
===============================================================================


A:R5# show router route-table

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
 &lt; &lt;ouput omitted&gt;&gt;

192.168.3.1/32                                Remote  OSPF      00h10m07s  10
       10.1.5.1                                                     200
192.168.3.2/32                                Remote  OSPF      00h10m02s  10
       10.1.5.1                                                     200
192.168.3.3/32                                Remote  OSPF      00h09m56s  10
       10.1.5.1                                                     200
-------------------------------------------------------------------------------
No. of Routes: 15
Flags: n = Number of times nexthop is repeated
       B = BGP backup route available
       L = LFA nexthop available
       S = Sticky ECMP requested
===============================================================================
</code></pre></td></tr></table></div></div><p>We will configure route summarization on Area Border Router (R1), so it will advertise <strong>only one</strong> summary route <code>192.168.3.0/30</code> instead of three specific routes.</p><p>Configuration steps:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# configure router ospf area 0
A:R1&gt;config&gt;router&gt;ospf&gt;area# area-range 192.168.3.0/30
</code></pre></td></tr></table></div></div><p>Pay attention, that summarization command <code>area-range</code> must be applied in the context of the area being summarized. Since we are summarizing routes <strong>from Area 0</strong> to Area 1 we use this command in the <strong>Area 0</strong> configuration context.</p><p>By default, the command <code>area-range &lt;prefix>/&lt;length></code> will actually be expanded to <code>area-range &lt;prefix>/&lt;length> advertise</code>, meaning that ABR will advertise this prefix. Counterpart statement <code>not-advertise</code> can be supplied to enable route suppression and will be discussed in a detail in next section.</p><p><strong>Pay attention:</strong> route summarization procedure automatically adds a <em>black-hole</em> route in R1&rsquo;s route table:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# show router route-table 192.168.3.0/24 longer

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
192.168.3.0/30                                Blackh* OSPF      00h32m52s  255
       Black Hole                                                   100
192.168.3.1/32                                Remote  OSPF      00h53m58s  10
       10.1.3.3                                                     100
192.168.3.2/32                                Remote  OSPF      00h53m52s  10
       10.1.3.3                                                     100
192.168.3.3/32                                Remote  OSPF      00h53m47s  10
       10.1.3.3                                                     100
-------------------------------------------------------------------------------
No. of Routes: 4
</code></pre></td></tr></table></div></div><p>Lets see what has changed at R5. R5&rsquo;s LSDB now has just <strong>one</strong> <em>Type 3 Summary LSA</em> for the aggregated <code>192.168.3.0/30</code> network and has no LSA&rsquo;s for the specific prefixes:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         1234 0x80000005 0x4eeb
Router  0.0.0.1         5.5.5.5         5.5.5.5         746  0x80000006 0x45bc
Summary 0.0.0.1         1.1.1.1         1.1.1.1         1199 0x80000003 0x1b38
Summary 0.0.0.1         2.2.2.2         1.1.1.1         658  0x80000003 0xd812
Summary 0.0.0.1         3.3.3.3         1.1.1.1         928  0x80000003 0xaa3c
Summary 0.0.0.1         4.4.4.4         1.1.1.1         1166 0x80000003 0x6816
Summary 0.0.0.1         6.6.6.6         1.1.1.1         1076 0x80000003 0xc6a
Summary 0.0.0.1         10.1.2.0        1.1.1.1         1026 0x80000004 0x8e56
Summary 0.0.0.1         10.1.3.0        1.1.1.1         735  0x80000004 0x8360
Summary 0.0.0.1         10.2.4.0        1.1.1.1         1216 0x80000004 0x5825
Summary 0.0.0.1         10.2.6.0        1.1.1.1         420  0x80000004 0x4239
Summary 0.0.0.1         10.3.4.0        1.1.1.1         340  0x80000005 0x4a31
Summary 0.0.0.1         192.168.3.0     1.1.1.1         4    0x80000001 0x5437
-------------------------------------------------------------------------------
No. of LSAs: 13
===============================================================================



A:R5# show router route-table

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
 &lt;ouptut omitted&gt;    

192.168.3.0/30                                Remote  OSPF      00h30m58s  10
       10.1.5.1                                                     200
-------------------------------------------------------------------------------
No. of Routes: 13
===============================================================================
</code></pre></td></tr></table></div></div><p>Verifying that IP connectivity works for summarized route:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R5# ping 192.168.3.3
PING 192.168.3.3 56 data bytes
64 bytes from 192.168.3.3: icmp_seq=1 ttl=63 time=10.2ms.
</code></pre></td></tr></table></div></div><h1 id=ospf-route-filtering-on-abr class=headerLink><a href=#ospf-route-filtering-on-abr class=header-mark></a>OSPF Route filtering on ABR</h1><p>You can filter unwanted routes on the ABR with the <code>area-range</code> command adding the key <code>not-advertise</code>.</p><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/6422/21639405.11b/0_83cba_d148eb08_orig.png alt=pic title=0_83cba_d148eb08_orig.png></p><p>For example lets take a look at R6&rsquo;s route table which contains specific routes to R3&rsquo;s loopback addresses. These addresses is advertising by R2 since it is acting as ABR and advertises all the routes it has in its routing table.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R6# show router route-table 192.168.3.0/24 longer

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
192.168.3.1/32                                Remote  OSPF      01h21m48s  10
       10.2.6.2                                                     300
192.168.3.2/32                                Remote  OSPF      01h21m43s  10
       10.2.6.2                                                     300
192.168.3.3/32                                Remote  OSPF      01h21m37s  10
       10.2.6.2                                                     300
-------------------------------------------------------------------------------
No. of Routes: 3
</code></pre></td></tr></table></div></div><p>If we want to prevent R2 from advertising some routes to its neighbor in <em>Area 1</em> then we have to add configuration commands in Area 0&rsquo;s context of R2:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R2# configure router ospf area 0
A:R2&gt;config&gt;router&gt;ospf&gt;area# area-range 192.168.3.1/32 not-advertise
</code></pre></td></tr></table></div></div><p>By doing this, we tell R2 to stop advertising <em>Type 3 Summary LSA</em> for prefix 192.168.3.1/32. And R6&rsquo;s route table immediately reflects this change by not having this specific route in its route table:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R6# show router route-table 192.168.3.0/24 longer

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
192.168.3.2/32                                Remote  OSPF      01h28m38s  10
       10.2.6.2                                                     300
192.168.3.3/32                                Remote  OSPF      01h28m32s  10
       10.2.6.2                                                     300
-------------------------------------------------------------------------------
No. of Routes: 2
</code></pre></td></tr></table></div></div><p>You can also use &ldquo;summary&rdquo; prefix to filter a range of routes:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># filter all prefixes that falls under 192.168.3.0/30 aggregate</span><span class=err>
</span><span class=err></span>A:R2&gt;config&gt;router&gt;ospf&gt;area# area-range 192.168.3.0/30 not-advertise<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># All loopback routes are filtered by R2</span><span class=err>
</span><span class=err></span>A:R6# show router route-table 192.168.3.0/24 longer<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>0</span><span class=err>
</span></code></pre></td></tr></table></div></div><p><strong>Note:</strong> Route filtering does not install any <em>black-hole</em> routes.</p><h1 id=asbr-and-ospf-route-redistribution class=headerLink><a href=#asbr-and-ospf-route-redistribution class=header-mark></a>ASBR and OSPF Route Redistribution</h1><p>Routes between different routing domains can me mutually exchanged. External routers can be exported into OSPF and vice versa. The process of routes exchange is often called <strong>route redistribution</strong>.</p><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/6833/21639405.11b/0_83cbe_34bbedc2_orig.png alt=pic title=0_83cbe_34bbedc2_orig.png></p><p>In this section we will redistribute the routes that are in R5&rsquo;s route table but are not advertised yet into OSPF process. These routes are created by means of additional loopback interfaces that are not included into OSPF process.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile>*A:R5# show router route-table 192.168.5.0/24 longer<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>192.168.5.1/32                                Local   Local     00h00m14s  <span class=m>0</span><span class=err>
</span><span class=err></span>       lo1                                                          <span class=m>0</span><span class=err>
</span><span class=err></span>192.168.5.2/32                                Local   Local     00h00m09s  <span class=m>0</span><span class=err>
</span><span class=err></span>       lo2                                                          <span class=m>0</span><span class=err>
</span><span class=err></span>192.168.5.3/32                                Local   Local     00h00m05s  <span class=m>0</span><span class=err>
</span><span class=err></span>       lo3                                                          <span class=m>0</span><span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>3</span><span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># ensure that loopbacks are not OSPF-enabled interfaces</span><span class=err>
</span><span class=err></span>*A:R5# show router ospf interface<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>OSPFv2 <span class=o>(</span>0<span class=o>)</span> all interfaces<span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>system                0.0.0.1         5.5.5.5         0.0.0.0         Up   DR<span class=err>
</span><span class=err></span>toR1                  0.0.0.1         0.0.0.0         0.0.0.0         Up   PToP<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of OSPF Interfaces: <span class=m>2</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># and R1 has no routes towards these prefixes, since they are only local to R5</span><span class=err>
</span><span class=err></span>A:R1# show router route-table 192.168.5.0/24 longer<span class=err>
</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Route Table <span class=o>(</span>Router: Base<span class=o>)</span><span class=err>
</span><span class=err></span><span class=o>===============================================================================</span><span class=err>
</span><span class=err></span>Dest Prefix<span class=o>[</span>Flags<span class=o>]</span>                            Type    Proto     Age        Pref<span class=err>
</span><span class=err></span>      Next Hop<span class=o>[</span>Interface Name<span class=o>]</span>                                    Metric<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>-------------------------------------------------------------------------------<span class=err>
</span><span class=err></span>No. of Routes: <span class=m>0</span><span class=err>
</span></code></pre></td></tr></table></div></div><p>To redistribute these local routes into OSPF process a <strong>policy</strong> should be configured. Lets give our policy a <code>EXPORT Local Loopbacks</code> name:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile>*A:R5# configure router policy-options<span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options# begin<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># create prefix list to match desired routes</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options# prefix-list <span class=s2>&#34;Loopbacks_to_export&#34;</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;prefix-list$ prefix 192.168.5.0/24 longer<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;prefix-list$ back<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># create policy statement to export routes</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options# policy-statement <span class=s2>&#34;EXPORT Local Loopbacks&#34;</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement$ entry <span class=m>10</span><span class=err>
</span><span class=err></span><span class=c># refer to the prefix list created earlier</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$ from prefix-list <span class=s2>&#34;Loopbacks_to_export&#34;</span><span class=err>
</span><span class=err></span><span class=c># narrow the scope of this policy &#34;to protocol ospf&#34; only</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$ to protocol ospf<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># set accept action (default action is deny all)</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry# action accept<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry&gt;action# back<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$ back<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement$ back<span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># commit changes</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options# commit<span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># verify the created policy</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;policy-options# info<span class=err>
</span><span class=err></span>----------------------------------------------<span class=err>
</span><span class=err></span>            prefix-list <span class=s2>&#34;Loopbacks_to_export&#34;</span><span class=err>
</span><span class=err></span>                prefix 192.168.5.0/24 longer<span class=err>
</span><span class=err></span>            exit<span class=err>
</span><span class=err></span>            policy-statement <span class=s2>&#34;EXPORT Local Loopbacks&#34;</span><span class=err>
</span><span class=err></span>                entry <span class=m>10</span><span class=err>
</span><span class=err></span>                    from<span class=err>
</span><span class=err></span>                        prefix-list <span class=s2>&#34;Loopbacks_to_export&#34;</span><span class=err>
</span><span class=err></span>                    exit<span class=err>
</span><span class=err></span>                    to<span class=err>
</span><span class=err></span>                        protocol ospf<span class=err>
</span><span class=err></span>                    exit<span class=err>
</span><span class=err></span>                    action accept<span class=err>
</span><span class=err></span>                    exit<span class=err>
</span><span class=err></span>                exit<span class=err>
</span><span class=err></span>            exit<span class=err>
</span><span class=err></span>----------------------------------------------<span class=err>
</span></code></pre></td></tr></table></div></div><p>The next step is to configure R5 router as an <strong>ASBR</strong> and to apply the created policy to OSPF process:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># &#34;asbr&#34; keyword makes a router an ASBR</span><span class=err>
</span><span class=err></span>*A:R5# configure router ospf<span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;ospf# asbr<span class=err>
</span><span class=err></span><span class=c># apply the export policy</span><span class=err>
</span><span class=err></span>*A:R5&gt;config&gt;router&gt;ospf# <span class=nb>export</span> <span class=s2>&#34;EXPORT Local Loopbacks&#34;</span><span class=err>
</span></code></pre></td></tr></table></div></div><h2 id=verifying-redistributed-routes-propagation class=headerLink><a href=#verifying-redistributed-routes-propagation class=header-mark></a>Verifying redistributed routes propagation</h2><p>Now, our R5 router is now configured as an ASBR and the local routes should get exported into OSPF process. These changes allow other routers in OSPF domain to receive these routes by means of <em>Type 4 ASBR Summary LSA</em> and <em>Type 5 AS External LSA</em>:</p><p>R5:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         1033 0x80000004 0x50ea
Router  0.0.0.1         5.5.5.5         5.5.5.5         1072 0x80000006 0x4bb4
Summary 0.0.0.1         1.1.1.1         1.1.1.1         706  0x80000004 0x1939
Summary 0.0.0.1         2.2.2.2         1.1.1.1         2226 0x80000002 0xda11
Summary 0.0.0.1         3.3.3.3         1.1.1.1         107  0x80000003 0xaa3c
Summary 0.0.0.1         4.4.4.4         1.1.1.1         929  0x80000003 0x6816
Summary 0.0.0.1         6.6.6.6         1.1.1.1         1879 0x80000002 0xe69
Summary 0.0.0.1         10.1.2.0        1.1.1.1         366  0x80000003 0x9055
Summary 0.0.0.1         10.1.3.0        1.1.1.1         472  0x80000003 0x855f
Summary 0.0.0.1         10.2.4.0        1.1.1.1         737  0x80000003 0x5a24
Summary 0.0.0.1         10.2.6.0        1.1.1.1         939  0x80000003 0x4438
Summary 0.0.0.1         10.3.4.0        1.1.1.1         442  0x80000003 0x4e2f
Summary 0.0.0.1         192.168.3.0     1.1.1.1         355  0x80000003 0x5039
AS Ext  n/a             192.168.5.1     5.5.5.5         506  0x80000001 0x63ea
AS Ext  n/a             192.168.5.2     5.5.5.5         506  0x80000001 0x59f3
AS Ext  n/a             192.168.5.3     5.5.5.5         506  0x80000001 0x4ffc
-------------------------------------------------------------------------------
No. of LSAs: 16
===============================================================================
</code></pre></td></tr></table></div></div><p>R1:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R1# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.0         1.1.1.1         1.1.1.1         655  0x80000006 0x5acc
Router  0.0.0.0         2.2.2.2         2.2.2.2         988  0x80000006 0xaf65
Router  0.0.0.0         3.3.3.3         3.3.3.3         1122 0x80000009 0x1a6b
Router  0.0.0.0         4.4.4.4         4.4.4.4         1133 0x80000006 0xa54c
Summary 0.0.0.0         5.5.5.5         1.1.1.1         562  0x80000003 0x4e90
Summary 0.0.0.0         10.1.5.0        1.1.1.1         472  0x80000003 0x6f73
Summary 0.0.0.0         6.6.6.6         2.2.2.2         189  0x80000003 0x2d4
Summary 0.0.0.0         10.2.6.0        2.2.2.2         166  0x80000003 0x3aa2
AS Summ 0.0.0.0         5.5.5.5         1.1.1.1         1407 0x80000001 0x449b
Router  0.0.0.1         1.1.1.1         1.1.1.1         1368 0x80000004 0x50ea
Router  0.0.0.1         5.5.5.5         5.5.5.5         1409 0x80000006 0x4bb4
Summary 0.0.0.1         1.1.1.1         1.1.1.1         1042 0x80000004 0x1939
Summary 0.0.0.1         2.2.2.2         1.1.1.1         321  0x80000003 0xd812
Summary 0.0.0.1         3.3.3.3         1.1.1.1         443  0x80000003 0xaa3c
Summary 0.0.0.1         4.4.4.4         1.1.1.1         1265 0x80000003 0x6816
Summary 0.0.0.1         6.6.6.6         1.1.1.1         266  0x80000003 0xc6a
Summary 0.0.0.1         10.1.2.0        1.1.1.1         703  0x80000003 0x9055
Summary 0.0.0.1         10.1.3.0        1.1.1.1         809  0x80000003 0x855f
Summary 0.0.0.1         10.2.4.0        1.1.1.1         1074 0x80000003 0x5a24
Summary 0.0.0.1         10.2.6.0        1.1.1.1         1275 0x80000003 0x4438
Summary 0.0.0.1         10.3.4.0        1.1.1.1         779  0x80000003 0x4e2f
Summary 0.0.0.1         192.168.3.0     1.1.1.1         691  0x80000003 0x5039
AS Ext  n/a             192.168.5.1     5.5.5.5         843  0x80000001 0x63ea
AS Ext  n/a             192.168.5.2     5.5.5.5         843  0x80000001 0x59f3
AS Ext  n/a             192.168.5.3     5.5.5.5         843  0x80000001 0x4ffc
-------------------------------------------------------------------------------
No. of LSAs: 25
===============================================================================
</code></pre></td></tr></table></div></div><p>R3:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R3# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.0         1.1.1.1         1.1.1.1         683  0x80000006 0x5acc
Router  0.0.0.0         2.2.2.2         2.2.2.2         1016 0x80000006 0xaf65
Router  0.0.0.0         3.3.3.3         3.3.3.3         1148 0x80000009 0x1a6b
Router  0.0.0.0         4.4.4.4         4.4.4.4         1159 0x80000006 0xa54c
Summary 0.0.0.0         5.5.5.5         1.1.1.1         591  0x80000003 0x4e90
Summary 0.0.0.0         10.1.5.0        1.1.1.1         499  0x80000003 0x6f73
Summary 0.0.0.0         6.6.6.6         2.2.2.2         217  0x80000003 0x2d4
Summary 0.0.0.0         10.2.6.0        2.2.2.2         193  0x80000003 0x3aa2
AS Summ 0.0.0.0         5.5.5.5         1.1.1.1         1434 0x80000001 0x449b
AS Ext  n/a             192.168.5.1     5.5.5.5         870  0x80000001 0x63ea
AS Ext  n/a             192.168.5.2     5.5.5.5         870  0x80000001 0x59f3
AS Ext  n/a             192.168.5.3     5.5.5.5         870  0x80000001 0x4ffc
-------------------------------------------------------------------------------
No. of LSAs: 12
===============================================================================
</code></pre></td></tr></table></div></div><p>R6:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R6# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.2         2.2.2.2         2.2.2.2         432  0x80000004 0x76b3
Router  0.0.0.2         6.6.6.6         6.6.6.6         1309 0x80000006 0xf9f2
Summary 0.0.0.2         1.1.1.1         2.2.2.2         535  0x80000003 0xe802
Summary 0.0.0.2         2.2.2.2         2.2.2.2         1098 0x80000004 0xcc7d
Summary 0.0.0.2         3.3.3.3         2.2.2.2         524  0x80000003 0x7806
Summary 0.0.0.2         4.4.4.4         2.2.2.2         1427 0x80000003 0x5e80
Summary 0.0.0.2         5.5.5.5         2.2.2.2         471  0x80000003 0x1c5a
Summary 0.0.0.2         10.1.2.0        2.2.2.2         661  0x80000003 0x726f
Summary 0.0.0.2         10.1.3.0        2.2.2.2         85   0x80000003 0x5329
Summary 0.0.0.2         10.1.5.0        2.2.2.2         200  0x80000003 0x3d3d
Summary 0.0.0.2         10.2.4.0        2.2.2.2         58   0x80000003 0x508e
Summary 0.0.0.2         10.3.4.0        2.2.2.2         549  0x80000003 0x3049
AS Summ 0.0.0.2         5.5.5.5         2.2.2.2         1460 0x80000001 0x1265
AS Ext  n/a             192.168.5.1     5.5.5.5         899  0x80000001 0x63ea
AS Ext  n/a             192.168.5.2     5.5.5.5         899  0x80000001 0x59f3
AS Ext  n/a             192.168.5.3     5.5.5.5         899  0x80000001 0x4ffc
-------------------------------------------------------------------------------
No. of LSAs: 16
===============================================================================


A:R6# show router route-table 192.168.5.0/24 longer

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
192.168.5.1/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
192.168.5.2/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
192.168.5.3/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
-------------------------------------------------------------------------------
No. of Routes: 3
</code></pre></td></tr></table></div></div><h1 id=ospf-stub-area class=headerLink><a href=#ospf-stub-area class=header-mark></a>OSPF Stub Area</h1><p>OSPF Stub Areas help to optimize LSDB and routing tables of the routers. We will configure <strong>Area 2</strong> as a stub area and this will tell ABR (R2) to not distribute any <em>External</em> routes and send a default route into Area 2 instead. To configure Area 2 as stub you need to configure <strong>all OSPF routers inside this area</strong>:</p><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/6504/21639405.11b/0_83cbb_ffa2879e_orig.png alt=pic title=0_83cbb_ffa2879e_orig.png></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=c># on R2 (ABR)</span><span class=err>
</span><span class=err></span>A:R2# configure router ospf<span class=err>
</span><span class=err></span>A:R2&gt;config&gt;router&gt;ospf# area <span class=m>2</span> stub<span class=err>
</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=c># on R6 (Area 2 router)</span><span class=err>
</span><span class=err></span>A:R6# configure router ospf area <span class=m>2</span> stub<span class=err>
</span></code></pre></td></tr></table></div></div><p>The following &ldquo;before/after&rdquo; comparison shows that <strong>after</strong> configuring Area 2&rsquo;s routers as <em>stub</em>, R6 router no longer receives <em>ASBR Summary LSA</em> and <em>AS External LSA</em> nor it has routes 192.168.5.1-3/32. Instead it has a new <em>Summary LSA</em> from the ABR with the <em>Link State ID</em> 0.0.0.0 which means <strong>default route</strong>.</p><p>R6 before stub area configuration:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R6# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.2         2.2.2.2         2.2.2.2         432  0x80000004 0x76b3
Router  0.0.0.2         6.6.6.6         6.6.6.6         1309 0x80000006 0xf9f2
Summary 0.0.0.2         1.1.1.1         2.2.2.2         535  0x80000003 0xe802
Summary 0.0.0.2         2.2.2.2         2.2.2.2         1098 0x80000004 0xcc7d
Summary 0.0.0.2         3.3.3.3         2.2.2.2         524  0x80000003 0x7806
Summary 0.0.0.2         4.4.4.4         2.2.2.2         1427 0x80000003 0x5e80
Summary 0.0.0.2         5.5.5.5         2.2.2.2         471  0x80000003 0x1c5a
Summary 0.0.0.2         10.1.2.0        2.2.2.2         661  0x80000003 0x726f
Summary 0.0.0.2         10.1.3.0        2.2.2.2         85   0x80000003 0x5329
Summary 0.0.0.2         10.1.5.0        2.2.2.2         200  0x80000003 0x3d3d
Summary 0.0.0.2         10.2.4.0        2.2.2.2         58   0x80000003 0x508e
Summary 0.0.0.2         10.3.4.0        2.2.2.2         549  0x80000003 0x3049
AS Summ 0.0.0.2         5.5.5.5         2.2.2.2         1460 0x80000001 0x1265
AS Ext  n/a             192.168.5.1     5.5.5.5         899  0x80000001 0x63ea
AS Ext  n/a             192.168.5.2     5.5.5.5         899  0x80000001 0x59f3
AS Ext  n/a             192.168.5.3     5.5.5.5         899  0x80000001 0x4ffc
-------------------------------------------------------------------------------
No. of LSAs: 16
===============================================================================



A:R6# show router route-table 192.168.5.0/24 longer

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
192.168.5.1/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
192.168.5.2/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
192.168.5.3/32                                Remote  OSPF      00h28m27s  150
       10.2.6.2                                                     1
-------------------------------------------------------------------------------
No. of Routes: 3
</code></pre></td></tr></table></div></div><p>R6 after stub area configuration:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R6# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.2         2.2.2.2         2.2.2.2         199  0x80000002 0xecdf
Router  0.0.0.2         6.6.6.6         6.6.6.6         0    0x80000002 0x20d2
Summary 0.0.0.2         0.0.0.0         2.2.2.2         5    0x80000004 0x5102
Summary 0.0.0.2         1.1.1.1         2.2.2.2         199  0x80000002 0x9e4
Summary 0.0.0.2         2.2.2.2         2.2.2.2         199  0x80000002 0xee5f
Summary 0.0.0.2         3.3.3.3         2.2.2.2         199  0x80000002 0x98e8
Summary 0.0.0.2         4.4.4.4         2.2.2.2         199  0x80000002 0x7e63
Summary 0.0.0.2         5.5.5.5         2.2.2.2         199  0x80000002 0x3c3d
Summary 0.0.0.2         10.1.2.0        2.2.2.2         199  0x80000002 0x9252
Summary 0.0.0.2         10.1.3.0        2.2.2.2         199  0x80000002 0x730c
Summary 0.0.0.2         10.1.5.0        2.2.2.2         199  0x80000002 0x5d20
Summary 0.0.0.2         10.2.4.0        2.2.2.2         199  0x80000002 0x7071
Summary 0.0.0.2         10.3.4.0        2.2.2.2         199  0x80000002 0x502c
-------------------------------------------------------------------------------
No. of LSAs: 13
===============================================================================


*A:R6# show router route-table

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
0.0.0.0/0                                     Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     101
1.1.1.1/32                                    Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     200
2.2.2.2/32                                    Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     100
3.3.3.3/32                                    Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     300
4.4.4.4/32                                    Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     200
5.5.5.5/32                                    Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     300
6.6.6.6/32                                    Local   Local     01h39m00s  0
       system                                                       0
10.1.2.0/24                                   Remote  OSPF      00h00m44s  10
       10.2.6.2                                                     200
10.1.3.0/24                                   Remote  OSPF      00h00m45s  10
       10.2.6.2                                                     300
10.1.5.0/24                                   Remote  OSPF      00h00m45s  10
       10.2.6.2                                                     300
10.2.4.0/24                                   Remote  OSPF      00h00m45s  10
       10.2.6.2                                                     200
10.2.6.0/24                                   Local   Local     01h38m38s  0
       toR2                                                         0
10.3.4.0/24                                   Remote  OSPF      00h00m45s  10
       10.2.6.2                                                     300
-------------------------------------------------------------------------------
No. of Routes: 13
</code></pre></td></tr></table></div></div><h1 id=ospf-totally-stub-area class=headerLink><a href=#ospf-totally-stub-area class=header-mark></a>OSPF Totally Stub Area</h1><p><a href=http://img-fotki.yandex.ru/get/6847/21639405.11b/0_83cbd_8d766fa0_orig.png target=_blank rel="noopener noreffer"><img class=aligncenter src=http://img-fotki.yandex.ru/get/6847/21639405.11b/0_83cbd_8d766fa0_XL.png alt width=800 height=427></a></p><p>ABR router participating in a <em>Totally stub</em> area blocks not only <em>Type 4 ASBR Summary</em> and <em>Type 5 AS External LSA</em> but also <em>Type 3 Summary LSA</em>. This drastically reduces LSDB and route tables on Area 2 routers. As of this moment we have Area 2 configured as s_tub_ area, lets configure it to be _totally stub_. To make Area 2 _totally stub_ we need to configure ABR (R2) with keyword <code>no summaries</code> option:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt>*A:R2# configure router ospf area 2 stub no summaries&lt;/pre&gt;

Take a look at R6&#39;s LSDB and route table

```*A:R6# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.2         2.2.2.2         2.2.2.2         482  0x80000004 0x9497
Router  0.0.0.2         6.6.6.6         6.6.6.6         518  0x80000004 0x1cd4
Summary 0.0.0.2         0.0.0.0         2.2.2.2         222  0x80000007 0x4b05
-------------------------------------------------------------------------------
No. of LSAs: 3
===============================================================================




*A:R6# show router route-table

===============================================================================
Route Table (Router: Base)
===============================================================================
Dest Prefix[Flags]                            Type    Proto     Age        Pref
      Next Hop[Interface Name]                                    Metric
-------------------------------------------------------------------------------
0.0.0.0/0                                     Remote  OSPF      00h02m16s  10
       10.2.6.2                                                     101
6.6.6.6/32                                    Local   Local     02h11m29s  0
       system                                                       0
10.2.6.0/24                                   Local   Local     02h11m07s  0
       toR2                                                         0
-------------------------------------------------------------------------------
No. of Routes: 3
</code></pre></td></tr></table></div></div><p>Now Area 2 router R6 has only 3 LSAs in its LSDB. All <em>Type 3 Summary LSA</em> for networks inside Area 0 were substituted by <em>Summary default route</em> from ABR (R2).</p><h1 id=not-so-stubby-area-nssa class=headerLink><a href=#not-so-stubby-area-nssa class=header-mark></a>Not So Stubby Area (NSSA)</h1><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/3114/21639405.11b/0_83cbf_2795355_orig.png alt=pic title=0_83cbf_2795355_orig.png>
<small>There is a typo on the pic. No type4 lsa will be advertised in Area0 by R1. Only Type5</small></p><p>Not so stubby areas are basically stub areas with an ASBR inside it. It inherits the same rule of blocking Type 4 and Type 5 LSA. But, in order to distribute external routes from ASBR another LSA this area leverages <em>Type 7</em> LSA.</p><p>We will configure Area 1 to be NSSA by adding the following commands to R1 (ABR):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback># prior to configuring NSSA on R5 lets check that we have active neighbor - R1

A:R5# show router ospf neighbor

===============================================================================
OSPFv2 (0) all neighbors
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
toR1                             1.1.1.1         Full       1    0       35
   0.0.0.1
-------------------------------------------------------------------------------
No. of Neighbors: 1
===============================================================================

#configuring Area 1 on R5 to NSSA state

A:R5# configure router ospf area 1 nssa


# Re-check neighbor status

*A:R5# show router ospf neighbor

===============================================================================
OSPFv2 (0) all neighbors
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
No. of Neighbors: 0
===============================================================================
</code></pre></td></tr></table></div></div><p>As soon we configured Area 1 on R5 to be NSSA we lost R1 as neighbor. This is the effect of a mismatched <em>Area</em> type in OSPF <em>Hello</em> messages between the two routers. Recall that R1 is maintaining Area 1 as a basic area, and Area 1 on R5 was reconfigured to NSSA.</p><p>We will fix neighboring by moving R1&rsquo;s Area 1 to NSSA operation as well:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt>A:R1# configure router ospf area 1 nssa


# Now check neighboring one more time

*A:R1# show router ospf neighbor &#34;toR5&#34;

===============================================================================
OSPFv2 (0) neighbors for interface &#34;toR5&#34;
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
toR5                             5.5.5.5         Full       1    0       33
   0.0.0.1
-------------------------------------------------------------------------------
No. of Neighbors: 1
</code></pre></td></tr></table></div></div><p>Now when R1 and R5 are neighbors again lets see what has changed in their LSDBs:</p><p>R5 LSDB prior to NSSA config:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         1911 0x80000004 0x50ea
Router  0.0.0.1         5.5.5.5         5.5.5.5         1690 0x80000006 0x4bb4
Summary 0.0.0.1         1.1.1.1         1.1.1.1         2160 0x80000004 0x1939
Summary 0.0.0.1         2.2.2.2         1.1.1.1         2145 0x80000003 0xd812
Summary 0.0.0.1         3.3.3.3         1.1.1.1         1697 0x80000003 0xaa3c
Summary 0.0.0.1         4.4.4.4         1.1.1.1         669  0x80000004 0x6617
Summary 0.0.0.1         6.6.6.6         1.1.1.1         1529 0x80000003 0xc6a
Summary 0.0.0.1         10.1.2.0        1.1.1.1         997  0x80000003 0x9055
Summary 0.0.0.1         10.1.3.0        1.1.1.1         142  0x80000004 0x8360
Summary 0.0.0.1         10.2.4.0        1.1.1.1         1824 0x80000003 0x5a24
Summary 0.0.0.1         10.2.6.0        1.1.1.1         2092 0x80000003 0x4438
Summary 0.0.0.1         10.3.4.0        1.1.1.1         459  0x80000004 0x4c30
Summary 0.0.0.1         192.168.3.0     1.1.1.1         1824 0x80000003 0x5039
AS Ext  n/a             192.168.5.1     5.5.5.5         1369 0x80000003 0x5fec
AS Ext  n/a             192.168.5.2     5.5.5.5         1491 0x80000003 0x55f5
AS Ext  n/a             192.168.5.3     5.5.5.5         934  0x80000003 0x4bfe
-------------------------------------------------------------------------------
No. of LSAs: 16
===============================================================================
</code></pre></td></tr></table></div></div><p>R5 LSDB after NSSA config:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         539  0x80000002 0xa884
Router  0.0.0.1         5.5.5.5         5.5.5.5         538  0x80000004 0x6d96
Summary 0.0.0.1         1.1.1.1         1.1.1.1         538  0x80000002 0x3b1b
Summary 0.0.0.1         2.2.2.2         1.1.1.1         538  0x80000002 0xf8f4
Summary 0.0.0.1         3.3.3.3         1.1.1.1         538  0x80000002 0xca1f
Summary 0.0.0.1         4.4.4.4         1.1.1.1         538  0x80000002 0x88f8
Summary 0.0.0.1         6.6.6.6         1.1.1.1         538  0x80000002 0x2c4d
Summary 0.0.0.1         10.1.2.0        1.1.1.1         538  0x80000002 0xb038
Summary 0.0.0.1         10.1.3.0        1.1.1.1         538  0x80000002 0xa542
Summary 0.0.0.1         10.2.4.0        1.1.1.1         538  0x80000002 0x7a07
Summary 0.0.0.1         10.2.6.0        1.1.1.1         538  0x80000002 0x641b
Summary 0.0.0.1         10.3.4.0        1.1.1.1         538  0x80000002 0x6e12
Summary 0.0.0.1         192.168.3.0     1.1.1.1         538  0x80000002 0x701c
NSSA    0.0.0.1         192.168.5.1     5.5.5.5         577  0x80000001 0xe74a
NSSA    0.0.0.1         192.168.5.2     5.5.5.5         577  0x80000001 0xdd53
NSSA    0.0.0.1         192.168.5.3     5.5.5.5         577  0x80000001 0xd35c
-------------------------------------------------------------------------------
No. of LSAs: 16
===============================================================================
</code></pre></td></tr></table></div></div><p>As we see, all <em>Type 5 AS External LSA</em> were substituted by <em>Type 7 NSSA LSA</em>. And if we had any other external routes we wouldn&rsquo;t see them in R5 database, since NSSA areas can not contain External routes.</p><h1 id=totally-nssa class=headerLink><a href=#totally-nssa class=header-mark></a>Totally NSSA</h1><p><img loading=lazy decoding=async class=render-image src=http://img-fotki.yandex.ru/get/6300/21639405.11b/0_83cc0_5d4047c9_orig.png alt=pic title=0_83cc0_5d4047c9_orig.png>
<small>There is a typo on the pic. No type4 lsa will be advertised in Area0 by R1. Only Type5</small></p><p>As with totally stubby areas, NSSA could be configured in a way that no <em>Type 3 Summary LSA</em> will present in such area. Totally NSSA configuration adds two additional commands on ABR:</p><p>On R1:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt>*A:R1&gt;config&gt;router&gt;ospf&gt;area# info
----------------------------------------------
                nssa
                exit
                interface &#34;toR5&#34;
                    interface-type point-to-point
                    no shutdown
                exit
----------------------------------------------

# Configuring NSSA to be totally NSSA
*A:R1&gt;config&gt;router&gt;ospf&gt;area# nssa no summaries&lt;/pre&gt;
</code></pre></td></tr></table></div></div><p>On R5:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt># As a result - no Type 3 Summary LSA are present in R5&#39;s database

*A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         1305 0x80000003 0xa685
Router  0.0.0.1         5.5.5.5         5.5.5.5         1550 0x80000005 0x6b97
NSSA    0.0.0.1         192.168.5.1     5.5.5.5         1654 0x80000002 0xe54b
NSSA    0.0.0.1         192.168.5.2     5.5.5.5         852  0x80000002 0xdb54
NSSA    0.0.0.1         192.168.5.3     5.5.5.5         816  0x80000002 0xd15d
-------------------------------------------------------------------------------
No. of LSAs: 5
===============================================================================
</code></pre></td></tr></table></div></div><p>ABR configured with <em>Totally NSSA</em> area filters Type 3 LSA as totally stubby area does. But notice one major difference - there is <strong>no default route</strong> injected by ABR. This is the cause of ping failure to any <em>Area 0</em> address:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R5# ping 4.4.4.4
PING 4.4.4.4 56 data bytes
No route to destination. Address: 4.4.4.4, Router: Base
</code></pre></td></tr></table></div></div><p>To resolve this issue you should add another command to NSSA context:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1&gt;config&gt;router&gt;ospf&gt;area# nssa originate-default-route
</code></pre></td></tr></table></div></div><p>This will cause R1 to inject Type 3 Summary LSA in Area 1:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R5# show router ospf database

===============================================================================
OSPFv2 (0) Link State Database (Type : All)
===============================================================================
Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
-------------------------------------------------------------------------------
Router  0.0.0.1         1.1.1.1         1.1.1.1         1652 0x80000003 0xa685
Router  0.0.0.1         5.5.5.5         5.5.5.5         264  0x80000006 0x6998
Summary 0.0.0.1         0.0.0.0         1.1.1.1         53   0x80000001 0x75e4
NSSA    0.0.0.1         192.168.5.1     5.5.5.5         172  0x80000003 0xe34c
NSSA    0.0.0.1         192.168.5.2     5.5.5.5         1199 0x80000002 0xdb54
NSSA    0.0.0.1         192.168.5.3     5.5.5.5         1163 0x80000002 0xd15d
-------------------------------------------------------------------------------
No. of LSAs: 6
===============================================================================


*A:R5# ping 4.4.4.4
PING 4.4.4.4 56 data bytes
64 bytes from 4.4.4.4: icmp_seq=1 ttl=62 time=19.6ms.
</code></pre></td></tr></table></div></div><h1 id=debugging-ospf-adjacency-issues class=headerLink><a href=#debugging-ospf-adjacency-issues class=header-mark></a>Debugging OSPF adjacency issues</h1><p>For two OSPF routers to become neighbors several parameters should be matched. And most of them - are the parameters communicated via OSPF Hello messages. If you do not see a neighbor on the other side there is a good chance that one of these parameters mismatches.</p><p>When you need to investigate the reason casing a neighboring relationships to break leverage the debug commands available.</p><p>Consider the following example where R1 lost its neighbor R5 in Area 1:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>*A:R1# show router ospf neighbor &#34;toR5&#34;

===============================================================================
OSPFv2 (0) neighbors for interface &#34;toR5&#34;
===============================================================================
Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
   Area-Id
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
No. of Neighbors: 0
===============================================================================
</code></pre></td></tr></table></div></div><p>To see what is going wrong, lets create a logging instance and capture <em>Hello</em> packets to analyze their content:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt># Creating log #55
*A:R1# configure log log-id 55

# Configuring capture log messages from debug to memory 
*A:R1&gt;config&gt;log&gt;log-id$ from debug-trace
*A:R1&gt;config&gt;log&gt;log-id$ to memory


# Specifying what &#34;debug&#34; should process. We are hunting OSPF Hello packets
# adding &#34;detail&#34; to see more verbose output

*A:R1# debug router ospf packet hello detail
</code></pre></td></tr></table></div></div><p>Now that we have <strong>log</strong> and <strong>debug</strong> objects configured, we could drill down to the contents of Hello messages:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt>*A:R1# show log log-id 55

===============================================================================
Event Log 55
===============================================================================
Description : (Not Specified)
Memory Log contents  [size=100   next event=22  (not wrapped)]

20 2015/01/01 03:11:31.28 UTC MINOR: DEBUG #2001 Base OSPFv2
&#34;OSPFv2: PKT DROPPED
hello interval mismatch&#34;

19 2015/01/01 03:11:31.28 UTC MINOR: DEBUG #2001 Base OSPFv2
&#34;OSPFv2: PKT

&gt;&gt; Incoming OSPF packet on I/F toR5 area 0.0.0.1
OSPF Version      : 2
Router Id         : 5.5.5.5
Area Id           : 0.0.0.1
Checksum          : ec98
Auth Type         : Null
Auth Key          : 00 00 00 00 00 00 00 00
Packet Type       : HELLO
Packet Length     : 44

Network Mask      : 255.255.255.0
Hello Interval    : 5
Options           : 08 -----N----
Rtr Priority      : 1
Dead Interval     : 40
Designated Router : 0.0.0.0
Backup Router     : 0.0.0.0
</code></pre></td></tr></table></div></div><p>Now the problem is clear - incoming OSPF packet came in with Hello timer set to 5sec. And R1 tells us that this value mismatches its configured <em>Hello timer</em> value.</p><p>This debug technique should indicate every discrepancy in OSPF values that should match, be it authentication mismatch or Area ID mismatch.</p><p>And that is all for the moment.</p></div><footer><div class=post><div class=post-share><div class=share-link><a class="share-icon share-twitter" href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://netdevops.me/2015/06/alcatel-lucent-ospf-configuration-tutorial/ data-title="Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial" data-via=ntdvps data-hashtags=SROS,Nokia,OSPF><span class="svg-social-icon icon-twitter"></span></a></div><div class=share-link><a class="share-icon share-facebook" href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://netdevops.me/2015/06/alcatel-lucent-ospf-configuration-tutorial/ data-hashtag=SROS><span class="svg-social-icon icon-facebook"></span></a></div><div class=share-link><a class="share-icon share-linkedin" href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://netdevops.me/2015/06/alcatel-lucent-ospf-configuration-tutorial/><span class="svg-social-icon icon-linkedin"></span></a></div></div><div class=post-tags><a href=/tags/sros/ class=tag>SROS</a><a href=/tags/nokia/ class=tag>Nokia</a><a href=/tags/ospf/ class=tag>OSPF</a></div></div></footer></div><div id=toc-final></div></div></article><section class="page single comments content-block-position"><h1 class=display-hidden>Комментарии</h1><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></section></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.82.0">Hugo</a> | Theme - <a href="https://ublogger.netlify.app/?utm_source=https://netdevops.me/&utm_medium=footer&utm_campaign=config&utm_term=2.0.1" target=_blank title="uBlogger 2.0.1">uBlogger</a></div><div class=footer-line><i class="svg-icon icon-copyright"></i><span>2015 - 2021</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><aside id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="svg-icon icon-arrow-up"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="svg-icon icon-comments-fixed"></i></a></aside><link rel=stylesheet href=/drawio.css><script src=/lib/smooth-scroll/smooth-scroll.min.js></script><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:20},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"comment",lightTheme:"github-light",repo:"hellt/netdevops.me"}},search:{algoliaAppID:"H1AI8QKFEK",algoliaIndex:"blog",algoliaSearchKey:"0544bc3c928ba0e387c3b3353112e43d",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:60,type:"algolia"}}</script><script src=/js/theme.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101537614-1','auto'),ga('send','pageview')</script></body></html>