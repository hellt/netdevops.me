<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Applying DevOps to networks."><meta name=author content="Roman Dodin"><link href=https://netdevops.me/2015/nokia-alcatel-lucent-sros-ospf-configuration-tutorial/ rel=canonical><link href=../ospf-neighbors-on-a-point-to-broadcast-network/ rel=prev><link href=../nokia-alcatel-lucent-configuring-packet-ip-filters/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../feed_rss_updated.xml><link rel=icon href=../../assets/images/code.svg><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.14+insiders-4.46.0"><title>Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial - Applying DevOps to networks</title><link rel=stylesheet href=../../assets/stylesheets/main.0ab26e37.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Google Sans";--md-code-font:"Fira Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-Y7R34KCT4N"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-Y7R34KCT4N",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-Y7R34KCT4N",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#nokia-alcatel-lucent-sros-ospf-configuration-tutorial class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=https://twitter.com/ntdvps> For updates follow <strong>@ntdvps</strong> on <span class="twemoji twitter"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </span> <strong>Twitter</strong> </a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Applying DevOps to networks" class="md-header__button md-logo" aria-label="Applying DevOps to networks" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Applying DevOps to networks </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hellt/netdevops.me title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hellt/netdevops.me </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=../.. class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=../../tags/ class=md-tabs__link> Tags </a> </li> <li class=md-tabs__item> <a href=../../subscribe/ class=md-tabs__link> Subscribe </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Applying DevOps to networks" class="md-nav__button md-logo" aria-label="Applying DevOps to networks" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg> </a> Applying DevOps to networks </label> <div class=md-nav__source> <a href=https://github.com/hellt/netdevops.me title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hellt/netdevops.me </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> Blog </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../subscribe/ class=md-nav__link> <span class=md-ellipsis> Subscribe </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#single-area-ospf class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Single-area OSPF </span> </span> </a> <nav class=md-nav aria-label="Single-area OSPF"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enabling-ospf class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Enabling OSPF </span> </span> </a> </li> <li class=md-nav__item> <a href=#router-id class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Router ID </span> </span> </a> </li> <li class=md-nav__item> <a href=#configuring-backbone-area class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Configuring Backbone Area </span> </span> </a> </li> <li class=md-nav__item> <a href=#configuring-ospf-interfaces class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Configuring OSPF interfaces </span> </span> </a> </li> <li class=md-nav__item> <a href=#verification class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Verification </span> </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#multi-area-ospf class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Multi-area OSPF </span> </span> </a> <nav class=md-nav aria-label="Multi-area OSPF"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#examining-multi-area-lsdb class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Examining Multi-area LSDB </span> </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ospf-routes-propagation class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> OSPF routes propagation </span> </span> </a> </li> <li class=md-nav__item> <a href=#ospf-route-summarization class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> OSPF Route Summarization </span> </span> </a> </li> <li class=md-nav__item> <a href=#ospf-route-filtering-on-abr class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> OSPF Route filtering on ABR </span> </span> </a> </li> <li class=md-nav__item> <a href=#asbr-and-ospf-route-redistribution class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> ASBR and OSPF Route Redistribution </span> </span> </a> <nav class=md-nav aria-label="ASBR and OSPF Route Redistribution"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verifying-redistributed-routes-propagation class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Verifying redistributed routes propagation </span> </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ospf-stub-area class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> OSPF Stub Area </span> </span> </a> </li> <li class=md-nav__item> <a href=#ospf-totally-stub-area class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> OSPF Totally Stub Area </span> </span> </a> </li> <li class=md-nav__item> <a href=#not-so-stubby-area-nssa class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Not So Stubby Area (NSSA) </span> </span> </a> </li> <li class=md-nav__item> <a href=#totally-nssa class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Totally NSSA </span> </span> </a> </li> <li class=md-nav__item> <a href=#debugging-ospf-adjacency-issues class=md-nav__link> <span class=md-ellipsis> <span class=md-typeset> Debugging OSPF adjacency issues </span> </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component=content> <div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class="md-sidebar__inner md-post"> <nav class="md-nav md-nav--primary"> <div class=md-post__back> <div class="md-nav__title md-nav__container"> <a href=../.. class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> <span class=md-ellipsis> Back to index </span> </a> </div> </div> <div class="md-post__authors md-typeset"> <div class="md-profile md-post__profile"> <span class="md-author md-author--long"> <img src=https://avatars.githubusercontent.com/u/5679861 alt="Roman Dodin"> </span> <span class=md-profile__description> <strong> Roman Dodin </strong> <br> Network Automater </span> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__item--section"> <div class=md-post__title> <span class=md-ellipsis> Metadata </span> </div> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg> <time datetime="2015-06-22 00:00:00" class=md-ellipsis>June 22, 2015</time> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg> <span class=md-ellipsis> 38 min read </span> </div> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../tags/#sr-os class=md-tag>sr os</a> <a href=../../tags/#nokia class=md-tag>nokia</a> <a href=../../tags/#ospf class=md-tag>ospf</a> </nav> <h1 id=nokia-alcatel-lucent-sros-ospf-configuration-tutorial>Nokia (Alcatel-Lucent) SROS OSPF configuration tutorial<a class=headerlink href=#nokia-alcatel-lucent-sros-ospf-configuration-tutorial title="Permanent link">#</a></h1> <p>The purpose of this post is to cover basic <a href=https://datatracker.ietf.org/doc/html/rfc2328>OSPFv2</a> configuration steps and commands for Nokia SROS routers. Intended readers are engineers with basic OSPF knowledge who want to know how to configure OSPF on Alcatel-Lucent Service Routers (7750-SR, 7705-SR, 7210-SR).</p> <p>All examples are valid for <code>TiMOS-B-12.0.R8</code> software.</p> <!-- more --> <h2 id=single-area-ospf>Single-area OSPF<a class=headerlink href=#single-area-ospf title="Permanent link">#</a></h2> <p>Basic OSPF protocol configuration in a single area consists of the following steps:</p> <ol> <li>Enable OSPF globally</li> <li>Configure router with OSPF <em>Router ID</em></li> <li>Configure backbone OSPF <em>Area 0</em></li> <li>Include interfaces in <em>Area 0</em></li> </ol> <p>The following network topology will be used throughout this tutorial:</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/9739/21639405.11b/0_83cb2_d11bc8dc_XL.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img class=aligncenter src=http://img-fotki.yandex.ru/get/9739/21639405.11b/0_83cb2_d11bc8dc_XL.png alt width=530 height=705></a></p> <h3 id=enabling-ospf>Enabling OSPF<a class=headerlink href=#enabling-ospf title="Permanent link">#</a></h3> <p>To enable OSPF on a router simply issue <code>configure router ospf</code> command. This will start OSPF process #0 on a router. If you would like to run another separate OSPF process on the same router, use <code>configure router ospf &lt;N&gt;</code>, where <em>N</em> is a decimal number of the desired OSPF process.</p> <h3 id=router-id>Router ID<a class=headerlink href=#router-id title="Permanent link">#</a></h3> <p>Each router running OSPF should have an unique 32-bit identifier, namely <strong>Router ID</strong>. This identifier will be equal to the first configured value in the following prioritized:</p> <ol> <li><code>router-id</code> value configured globally for a router</li> <li><code>system</code> interface IPv4 address value</li> <li>the last 32 bits of the chassis MAC address</li> </ol> <p>Configuring router-id explicitly:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>*A:R1# configure router router-id
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>  - no router-id
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>  - router-id  &lt;ip-address&gt;
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>  &lt;ip-address&gt;         : a.b.c.d
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>*A:R1# configure router router-id 2.2.2.2
</span></code></pre></div> <p>Use <code>show router ospf status</code> command to check Router ID current value and OSPF status:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>*A:R1# show router ospf status
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>===============================================================================
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>OSPFv2 (0) Status
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>===============================================================================
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>OSPF Cfg Router Id           : 0.0.0.0
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>OSPF Oper Router Id          : 1.1.1.1    # Router ID inherited from System IPv4 address
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>OSPF Version                 : 2
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>OSPF Admin Status            : Enabled    # OSPF administratively enabled
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>OSPF Oper Status             : Enabled    # OSPF is operating
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>&lt;output omitted&gt;
</span></code></pre></div> <h3 id=configuring-backbone-area>Configuring Backbone Area<a class=headerlink href=#configuring-backbone-area title="Permanent link">#</a></h3> <p>Are configuration is done in the OSPF configuration context with <code>area</code> command:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>A:R1&gt;config&gt;router&gt;ospf# area
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>  - area  &lt;area-id&gt;
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>  - no area  &lt;area-id&gt;
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>  &lt;area-id&gt;            :  &lt;ip-address&gt; |  [0..4294967295]
</span></code></pre></div> <p>Area ID can be set either as decimal (<code>area 0</code>) or in dotted-decimal format (<code>area 0.0.0.0</code>).</p> <p>It is easier to enable OSPF and set the Area ID in a single sweep:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a># This command will enable OSPF process (it is disabled by default) and configure Area 0 on this router.
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>A:R1# configure router ospf area 0
</span></code></pre></div> <p>To check all the configured areas on a router use <code>show router ospf area</code> command:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>A:R1# show router ospf area
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>==================================================================
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>OSPFv2 (0) all areas
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>==================================================================
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>Area Id         Type        SPF Runs    LSA Count   LSA Cksum Sum
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>------------------------------------------------------------------
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>0.0.0.0         Standard    2           1           0xcaf7
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>------------------------------------------------------------------
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>No. of OSPF Areas: 1
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>==================================================================
</span></code></pre></div> <h3 id=configuring-ospf-interfaces>Configuring OSPF interfaces<a class=headerlink href=#configuring-ospf-interfaces title="Permanent link">#</a></h3> <p>Once the <em>backbone area</em> is configured its time to add some interfaces to it with <code>interface &lt;interface_name&gt;</code> command.</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c># Entering to OSPF Area 0 configuration context</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>*A:R1#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>area<span class=w> </span><span class=m>0</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c># Adding system interface to OSPF process</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area#<span class=w> </span>interface<span class=w> </span><span class=s2>&quot;system&quot;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$<span class=w> </span>back
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=c># Adding interface toR2 and configuring it with point-to-point type</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=c># By default, ethernet interfaces use Broadcast interface type </span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area#<span class=w> </span>interface<span class=w> </span><span class=s2>&quot;toR2&quot;</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$<span class=w> </span>interface-type<span class=w> </span>point-to-point
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area&gt;if$<span class=w> </span>back
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area#<span class=w> </span>back
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=c># This configuration steps effectively lead us to this OSPF configuration for router R1</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>*A:R1&gt;config&gt;router&gt;ospf#<span class=w> </span>info
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>----------------------------------------------
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>            </span>area<span class=w> </span><span class=m>0</span>.0.0.0
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>                </span>interface<span class=w> </span><span class=s2>&quot;system&quot;</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>                    </span>no<span class=w> </span>shutdown
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>                </span>exit
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>                </span>interface<span class=w> </span><span class=s2>&quot;toR2&quot;</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>                    </span>interface-type<span class=w> </span>point-to-point
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>                    </span>no<span class=w> </span>shutdown
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>                </span>exit
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>            </span>exit
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>            </span>no<span class=w> </span>shutdown
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>----------------------------------------------
</span></code></pre></div> <p>To check that OSPF interfaces were configured properly by evaluating their status use:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>*A:R1# show router ospf interface
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>===============================================================================
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>OSPFv2 (0) all interfaces
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>===============================================================================
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>-------------------------------------------------------------------------------
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>system                0.0.0.0         1.1.1.1         0.0.0.0         Up   DR
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>toR2                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>-------------------------------------------------------------------------------
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>No. of OSPF Interfaces: 2
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>===============================================================================
</span></code></pre></div> <p>Repeat the same configuration steps to include all interfaces to <em>OSPF Area 0</em> for the other backbone routers R2, R3, R4 and you will end up with a fully configured <em>OSPF Backbone Area</em>.</p> <h3 id=verification>Verification<a class=headerlink href=#verification title="Permanent link">#</a></h3> <p>Finally its time to check that our routers have established the neighboring relationships:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>A:R1# show router ospf neighbor
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>===============================================================================
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>OSPFv2 (0) all neighbors
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>===============================================================================
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>   Area-Id
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>-------------------------------------------------------------------------------
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>toR2                             2.2.2.2         Full       1    0       33
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>   0.0.0.0
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>toR3                             3.3.3.3         Full       1    0       39
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>   0.0.0.0
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>-------------------------------------------------------------------------------
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>No. of Neighbors: 2
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>===============================================================================
</span></code></pre></div> <p>One of the most useful OSPF verification commands is <code>show router ospf database</code>. This command shows all the <em>Links State Advertisements</em> (LSA) and helps the engineer to troubleshoot OSPF-related issues.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>A:R1# show router ospf database
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>===============================================================================
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>===============================================================================
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>-------------------------------------------------------------------------------
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>Router  0.0.0.0         1.1.1.1         1.1.1.1         873  0x8000000b 0x4dd5
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>Router  0.0.0.0         2.2.2.2         2.2.2.2         561  0x80000006 0x1c2b
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>Router  0.0.0.0         3.3.3.3         3.3.3.3         879  0x80000008 0x6d94
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>Router  0.0.0.0         4.4.4.4         4.4.4.4         1588 0x80000005 0x94ec
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>-------------------------------------------------------------------------------
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>No. of LSAs: 4
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>===============================================================================
</span></code></pre></div> <p>You can query OSPF database for a specific LSAs by augmenting the above mentioned command:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>A:R1# show router ospf database
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>  - database [type {router|network|summary|asbr-summary|external|nssa|all}]
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    [area  &lt;area-id&gt;] [adv-router  &lt;router-id&gt;] [ &lt;link-state-id&gt;] [detail]
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>  &lt;router|network|su*&gt; : keywords - specify database type
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>  &lt;area-id&gt;            : ip-address - a.b.c.d
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>                        area - [0..4294967295]
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>  &lt;router-id&gt;          : a.b.c.d
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>  &lt;link-state-id&gt;      : a.b.c.d
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>  &lt;detail&gt;             : keyword - displays detailed information
</span></code></pre></div> <h2 id=multi-area-ospf>Multi-area OSPF<a class=headerlink href=#multi-area-ospf title="Permanent link">#</a></h2> <p>Basic Multi-area OSPF configuration is straightforward as well. I added two more routers to the topology and introduced two areas: Area 1 and Area 2.</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/6828/21639405.11b/0_83cb9_73aa3ab3_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/6828/21639405.11b/0_83cb9_73aa3ab3_orig.png></a></p> <p><small>I mistyped the port numbers for R5-R1 and R6-R2 pairs, it should be 1/1/4. Though this wont affect the course of this tutorial in anyway.</small></p> <p>We will start by configuring <code>Area 1</code> on routers R5 and R1 using the same commands we used for single-area OSPF configuration.</p> <p>R5 configuration:</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c># Creating Area 1 on R5 and adding &quot;system&quot; and &quot;toR1&quot; interfaces</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>A:R5#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>area<span class=w> </span><span class=m>1</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>*A:R5&gt;config&gt;router&gt;ospf&gt;area$<span class=w> </span>interface<span class=w> </span><span class=s2>&quot;toR1&quot;</span><span class=w> </span>interface-type<span class=w> </span>point-to-point
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>*A:R5&gt;config&gt;router&gt;ospf&gt;area$<span class=w> </span>interface<span class=w> </span><span class=s2>&quot;system&quot;</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=c># Verifying created Area 1 and its interfaces</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>*A:R5#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>interface
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=o>===============================================================================</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>OSPFv2<span class=w> </span><span class=o>(</span><span class=m>0</span><span class=o>)</span><span class=w> </span>all<span class=w> </span>interfaces
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=o>===============================================================================</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>If<span class=w> </span>Name<span class=w>               </span>Area<span class=w> </span>Id<span class=w>         </span>Designated<span class=w> </span>Rtr<span class=w>  </span>Bkup<span class=w> </span>Desig<span class=w> </span>Rtr<span class=w>  </span>Adm<span class=w>  </span>Oper
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>-------------------------------------------------------------------------------
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>system<span class=w>                </span><span class=m>0</span>.0.0.1<span class=w>         </span><span class=m>5</span>.5.5.5<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>DR
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>toR1<span class=w>                  </span><span class=m>0</span>.0.0.1<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>PToP
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>-------------------------------------------------------------------------------
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>No.<span class=w> </span>of<span class=w> </span>OSPF<span class=w> </span>Interfaces:<span class=w> </span><span class=m>2</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=o>===============================================================================</span>
</span></code></pre></div> <p>R1 configuration</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c># Creating Area 1 on R1 (ABR) and adding &quot;toR5&quot; interface to it.</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>*A:R1#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>area<span class=w> </span><span class=m>1</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area$<span class=w> </span>interface<span class=w> </span><span class=s2>&quot;toR5&quot;</span><span class=w> </span>interface-type<span class=w> </span>point-to-point
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=c># Verifying created Area 1 and its interfaces</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>*A:R1#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>interface
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=o>===============================================================================</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>OSPFv2<span class=w> </span><span class=o>(</span><span class=m>0</span><span class=o>)</span><span class=w> </span>all<span class=w> </span>interfaces
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=o>===============================================================================</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>If<span class=w> </span>Name<span class=w>               </span>Area<span class=w> </span>Id<span class=w>         </span>Designated<span class=w> </span>Rtr<span class=w>  </span>Bkup<span class=w> </span>Desig<span class=w> </span>Rtr<span class=w>  </span>Adm<span class=w>  </span>Oper
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>-------------------------------------------------------------------------------
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>system<span class=w>                </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>1</span>.1.1.1<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>DR
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a>toR2<span class=w>                  </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>PToP
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a>toR3<span class=w>                  </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>PToP
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a>toR5<span class=w>                  </span><span class=m>0</span>.0.0.1<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>PToP
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a>-------------------------------------------------------------------------------
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a>No.<span class=w> </span>of<span class=w> </span>OSPF<span class=w> </span>Interfaces:<span class=w> </span><span class=m>4</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=o>===============================================================================</span>
</span></code></pre></div> <p>Adding one more <em>Area</em> (besides backbone Area 0) on R1 makes it <em>Area Border Router.</em> So R1 will form and maintain another neighbor relationships with R5 in Area 1. We will check if its true:</p> <p>R5 verification:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>*A:R5# show router ospf neighbor
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>===============================================================================
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>OSPFv2 (0) all neighbors
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>===============================================================================
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>   Area-Id
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>-------------------------------------------------------------------------------
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>toR1                             1.1.1.1         Full       1    0       33
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>   0.0.0.1
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>-------------------------------------------------------------------------------
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>No. of Neighbors: 1
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>===============================================================================
</span></code></pre></div> <p>R1 verification:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>*A:R1# show router ospf neighbor
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>===============================================================================
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>OSPFv2 (0) all neighbors
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>===============================================================================
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>   Area-Id
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>-------------------------------------------------------------------------------
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>toR2                             2.2.2.2         Full       1    0       32
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>   0.0.0.0
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>toR3                             3.3.3.3         Full       1    0       36
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>   0.0.0.0
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>toR5                             5.5.5.5         Full       1    0       31
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>   0.0.0.1
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>-------------------------------------------------------------------------------
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>No. of Neighbors: 3
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>===============================================================================
</span></code></pre></div> <p>I repeated same configuration steps on R6: added it to Area 2 and neighbored with R2.</p> <h3 id=examining-multi-area-lsdb>Examining Multi-area LSDB<a class=headerlink href=#examining-multi-area-lsdb title="Permanent link">#</a></h3> <p>Since we configured multi-area OSPF we should expect to see some new LSA in our Link State Database:</p> <p>On R1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>A:R1# show router ospf database
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>===============================================================================
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>===============================================================================
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>-------------------------------------------------------------------------------
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>Router  0.0.0.0         1.1.1.1         1.1.1.1         550  0x80000007 0x58cd
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>Router  0.0.0.0         2.2.2.2         2.2.2.2         668  0x80000006 0xaf65
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>Router  0.0.0.0         3.3.3.3         3.3.3.3         193  0x80000006 0x7192
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>Router  0.0.0.0         4.4.4.4         4.4.4.4         732  0x80000007 0xa34d
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>Summary 0.0.0.0         5.5.5.5         1.1.1.1         773  0x80000002 0x508f
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>Summary 0.0.0.0         10.1.5.0        1.1.1.1         1091 0x80000002 0x7172
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a>Summary 0.0.0.0         6.6.6.6         2.2.2.2         519  0x80000002 0x4d3
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>Summary 0.0.0.0         10.2.6.0        2.2.2.2         724  0x80000002 0x3ca1
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         830  0x80000004 0x50ea
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         171  0x80000005 0x47bb
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         660  0x80000002 0x1d37
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         183  0x80000002 0xda11
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         122  0x80000002 0xac3b
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         318  0x80000002 0x6a15
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         207  0x80000002 0xe69
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         377  0x80000003 0x9055
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         262  0x80000003 0x855f
</span><span id=__span-14-25><a id=__codelineno-14-25 name=__codelineno-14-25 href=#__codelineno-14-25></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         1039 0x80000003 0x5a24
</span><span id=__span-14-26><a id=__codelineno-14-26 name=__codelineno-14-26 href=#__codelineno-14-26></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         864  0x80000002 0x4637
</span><span id=__span-14-27><a id=__codelineno-14-27 name=__codelineno-14-27 href=#__codelineno-14-27></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         1056 0x80000003 0x4e2f
</span><span id=__span-14-28><a id=__codelineno-14-28 name=__codelineno-14-28 href=#__codelineno-14-28></a>-------------------------------------------------------------------------------
</span><span id=__span-14-29><a id=__codelineno-14-29 name=__codelineno-14-29 href=#__codelineno-14-29></a>No. of LSAs: 20
</span><span id=__span-14-30><a id=__codelineno-14-30 name=__codelineno-14-30 href=#__codelineno-14-30></a>===============================================================================
</span></code></pre></div> <p>On R5:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>A:R5# show router ospf database
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>===============================================================================
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>===============================================================================
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>-------------------------------------------------------------------------------
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         900  0x80000004 0x50ea
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         238  0x80000005 0x47bb
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         728  0x80000002 0x1d37
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         252  0x80000002 0xda11
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         190  0x80000002 0xac3b
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         387  0x80000002 0x6a15
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         276  0x80000002 0xe69
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         446  0x80000003 0x9055
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         329  0x80000003 0x855f
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         1106 0x80000003 0x5a24
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         932  0x80000002 0x4637
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         1124 0x80000003 0x4e2f
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a>-------------------------------------------------------------------------------
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a>No. of LSAs: 12
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a>===============================================================================
</span></code></pre></div> <p>Aha, R1 being an ABR lists all LSA's for both Area 0 and Area 1. Moreover, R1 lists <em>Type 3 Summary LSA from Area 0 to Area 1</em> and vice versa, <em>from Area 1 to Area 0</em>.</p> <p>R5 has only Area 1 LSAs, since R5 "lives" exactly in a single area - Area 1.</p> <h2 id=ospf-routes-propagation>OSPF routes propagation<a class=headerlink href=#ospf-routes-propagation title="Permanent link">#</a></h2> <p>To ensure that OSPF routers exchanged OSPF routes lets check R5 and R1 routing tables:</p> <p>On R1 (ABR):</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c># Checking routes that have been received via OSPF</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>*A:R1#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table<span class=w> </span>protocol<span class=w> </span>ospf
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=o>===============================================================================</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=o>===============================================================================</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>-------------------------------------------------------------------------------
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=m>2</span>.2.2.2/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>03h01m17s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=m>3</span>.3.3.3/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>03h01m13s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>       </span><span class=m>10</span>.1.3.3<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=m>4</span>.4.4.4/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>03h01m10s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=m>5</span>.5.5.5/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h39m07s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=w>       </span><span class=m>10</span>.1.5.5<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=m>6</span>.6.6.6/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h19m38s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=m>10</span>.2.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>04h15m26s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=m>10</span>.2.6.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h19m48s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a><span class=m>10</span>.3.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>04h15m26s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=w>       </span><span class=m>10</span>.1.3.3<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a>-------------------------------------------------------------------------------
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>8</span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a>Flags:<span class=w> </span><span class=nv>n</span><span class=w> </span><span class=o>=</span><span class=w> </span>Number<span class=w> </span>of<span class=w> </span><span class=nb>times</span><span class=w> </span>nexthop<span class=w> </span>is<span class=w> </span>repeated
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a><span class=w>       </span><span class=nv>B</span><span class=w> </span><span class=o>=</span><span class=w> </span>BGP<span class=w> </span>backup<span class=w> </span>route<span class=w> </span>available
</span><span id=__span-16-31><a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a><span class=w>       </span><span class=nv>L</span><span class=w> </span><span class=o>=</span><span class=w> </span>LFA<span class=w> </span>nexthop<span class=w> </span>available
</span><span id=__span-16-32><a id=__codelineno-16-32 name=__codelineno-16-32 href=#__codelineno-16-32></a><span class=w>       </span><span class=nv>S</span><span class=w> </span><span class=o>=</span><span class=w> </span>Sticky<span class=w> </span>ECMP<span class=w> </span>requested
</span><span id=__span-16-33><a id=__codelineno-16-33 name=__codelineno-16-33 href=#__codelineno-16-33></a><span class=o>===============================================================================</span>
</span><span id=__span-16-34><a id=__codelineno-16-34 name=__codelineno-16-34 href=#__codelineno-16-34></a>
</span><span id=__span-16-35><a id=__codelineno-16-35 name=__codelineno-16-35 href=#__codelineno-16-35></a>
</span><span id=__span-16-36><a id=__codelineno-16-36 name=__codelineno-16-36 href=#__codelineno-16-36></a><span class=c># Checking R1&#39;s route table</span>
</span><span id=__span-16-37><a id=__codelineno-16-37 name=__codelineno-16-37 href=#__codelineno-16-37></a>
</span><span id=__span-16-38><a id=__codelineno-16-38 name=__codelineno-16-38 href=#__codelineno-16-38></a>A:R1#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table
</span><span id=__span-16-39><a id=__codelineno-16-39 name=__codelineno-16-39 href=#__codelineno-16-39></a>
</span><span id=__span-16-40><a id=__codelineno-16-40 name=__codelineno-16-40 href=#__codelineno-16-40></a><span class=o>===============================================================================</span>
</span><span id=__span-16-41><a id=__codelineno-16-41 name=__codelineno-16-41 href=#__codelineno-16-41></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-16-42><a id=__codelineno-16-42 name=__codelineno-16-42 href=#__codelineno-16-42></a><span class=o>===============================================================================</span>
</span><span id=__span-16-43><a id=__codelineno-16-43 name=__codelineno-16-43 href=#__codelineno-16-43></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-16-44><a id=__codelineno-16-44 name=__codelineno-16-44 href=#__codelineno-16-44></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-16-45><a id=__codelineno-16-45 name=__codelineno-16-45 href=#__codelineno-16-45></a>-------------------------------------------------------------------------------
</span><span id=__span-16-46><a id=__codelineno-16-46 name=__codelineno-16-46 href=#__codelineno-16-46></a><span class=m>1</span>.1.1.1/32<span class=w>                                    </span>Local<span class=w>   </span>Local<span class=w>     </span>00h20m56s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-16-47><a id=__codelineno-16-47 name=__codelineno-16-47 href=#__codelineno-16-47></a><span class=w>       </span>system<span class=w>                                                       </span><span class=m>0</span>
</span><span id=__span-16-48><a id=__codelineno-16-48 name=__codelineno-16-48 href=#__codelineno-16-48></a><span class=m>2</span>.2.2.2/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h15m29s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-49><a id=__codelineno-16-49 name=__codelineno-16-49 href=#__codelineno-16-49></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-50><a id=__codelineno-16-50 name=__codelineno-16-50 href=#__codelineno-16-50></a><span class=m>3</span>.3.3.3/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h15m11s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-51><a id=__codelineno-16-51 name=__codelineno-16-51 href=#__codelineno-16-51></a><span class=w>       </span><span class=m>10</span>.1.3.3<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-52><a id=__codelineno-16-52 name=__codelineno-16-52 href=#__codelineno-16-52></a><span class=m>4</span>.4.4.4/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h14m40s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-53><a id=__codelineno-16-53 name=__codelineno-16-53 href=#__codelineno-16-53></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-54><a id=__codelineno-16-54 name=__codelineno-16-54 href=#__codelineno-16-54></a><span class=m>5</span>.5.5.5/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h18m59s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-55><a id=__codelineno-16-55 name=__codelineno-16-55 href=#__codelineno-16-55></a><span class=w>       </span><span class=m>10</span>.1.5.5<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-16-56><a id=__codelineno-16-56 name=__codelineno-16-56 href=#__codelineno-16-56></a><span class=m>6</span>.6.6.6/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h16m28s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-57><a id=__codelineno-16-57 name=__codelineno-16-57 href=#__codelineno-16-57></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-58><a id=__codelineno-16-58 name=__codelineno-16-58 href=#__codelineno-16-58></a><span class=m>10</span>.1.2.0/24<span class=w>                                   </span>Local<span class=w>   </span>Local<span class=w>     </span>00h20m36s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-16-59><a id=__codelineno-16-59 name=__codelineno-16-59 href=#__codelineno-16-59></a><span class=w>       </span>toR2<span class=w>                                                         </span><span class=m>0</span>
</span><span id=__span-16-60><a id=__codelineno-16-60 name=__codelineno-16-60 href=#__codelineno-16-60></a><span class=m>10</span>.1.3.0/24<span class=w>                                   </span>Local<span class=w>   </span>Local<span class=w>     </span>00h20m36s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-16-61><a id=__codelineno-16-61 name=__codelineno-16-61 href=#__codelineno-16-61></a><span class=w>       </span>toR3<span class=w>                                                         </span><span class=m>0</span>
</span><span id=__span-16-62><a id=__codelineno-16-62 name=__codelineno-16-62 href=#__codelineno-16-62></a><span class=m>10</span>.1.5.0/24<span class=w>                                   </span>Local<span class=w>   </span>Local<span class=w>     </span>00h20m36s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-16-63><a id=__codelineno-16-63 name=__codelineno-16-63 href=#__codelineno-16-63></a><span class=w>       </span>toR5<span class=w>                                                         </span><span class=m>0</span>
</span><span id=__span-16-64><a id=__codelineno-16-64 name=__codelineno-16-64 href=#__codelineno-16-64></a><span class=m>10</span>.2.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m31s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-65><a id=__codelineno-16-65 name=__codelineno-16-65 href=#__codelineno-16-65></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-66><a id=__codelineno-16-66 name=__codelineno-16-66 href=#__codelineno-16-66></a><span class=m>10</span>.2.6.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h16m38s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-67><a id=__codelineno-16-67 name=__codelineno-16-67 href=#__codelineno-16-67></a><span class=w>       </span><span class=m>10</span>.1.2.2<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-68><a id=__codelineno-16-68 name=__codelineno-16-68 href=#__codelineno-16-68></a><span class=m>10</span>.3.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m30s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-16-69><a id=__codelineno-16-69 name=__codelineno-16-69 href=#__codelineno-16-69></a><span class=w>       </span><span class=m>10</span>.1.3.3<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-16-70><a id=__codelineno-16-70 name=__codelineno-16-70 href=#__codelineno-16-70></a>-------------------------------------------------------------------------------
</span><span id=__span-16-71><a id=__codelineno-16-71 name=__codelineno-16-71 href=#__codelineno-16-71></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>12</span>
</span><span id=__span-16-72><a id=__codelineno-16-72 name=__codelineno-16-72 href=#__codelineno-16-72></a>Flags:<span class=w> </span><span class=nv>n</span><span class=w> </span><span class=o>=</span><span class=w> </span>Number<span class=w> </span>of<span class=w> </span><span class=nb>times</span><span class=w> </span>nexthop<span class=w> </span>is<span class=w> </span>repeated
</span><span id=__span-16-73><a id=__codelineno-16-73 name=__codelineno-16-73 href=#__codelineno-16-73></a><span class=w>       </span><span class=nv>B</span><span class=w> </span><span class=o>=</span><span class=w> </span>BGP<span class=w> </span>backup<span class=w> </span>route<span class=w> </span>available
</span><span id=__span-16-74><a id=__codelineno-16-74 name=__codelineno-16-74 href=#__codelineno-16-74></a><span class=w>       </span><span class=nv>L</span><span class=w> </span><span class=o>=</span><span class=w> </span>LFA<span class=w> </span>nexthop<span class=w> </span>available
</span><span id=__span-16-75><a id=__codelineno-16-75 name=__codelineno-16-75 href=#__codelineno-16-75></a><span class=w>       </span><span class=nv>S</span><span class=w> </span><span class=o>=</span><span class=w> </span>Sticky<span class=w> </span>ECMP<span class=w> </span>requested
</span><span id=__span-16-76><a id=__codelineno-16-76 name=__codelineno-16-76 href=#__codelineno-16-76></a><span class=o>===============================================================================</span>
</span></code></pre></div> <p>On R5:</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>*A:R5#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table<span class=w> </span>protocol<span class=w> </span>ospf
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=o>===============================================================================</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=o>===============================================================================</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>-------------------------------------------------------------------------------
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=m>1</span>.1.1.1/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=m>2</span>.2.2.2/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=m>3</span>.3.3.3/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=m>4</span>.4.4.4/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=m>6</span>.6.6.6/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m14s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=m>10</span>.1.2.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=m>10</span>.1.3.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=m>10</span>.2.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a><span class=m>10</span>.2.6.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m25s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a><span class=m>10</span>.3.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>02h57m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a>-------------------------------------------------------------------------------
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>10</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a>Flags:<span class=w> </span><span class=nv>n</span><span class=w> </span><span class=o>=</span><span class=w> </span>Number<span class=w> </span>of<span class=w> </span><span class=nb>times</span><span class=w> </span>nexthop<span class=w> </span>is<span class=w> </span>repeated
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a><span class=w>       </span><span class=nv>B</span><span class=w> </span><span class=o>=</span><span class=w> </span>BGP<span class=w> </span>backup<span class=w> </span>route<span class=w> </span>available
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a><span class=w>       </span><span class=nv>L</span><span class=w> </span><span class=o>=</span><span class=w> </span>LFA<span class=w> </span>nexthop<span class=w> </span>available
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a><span class=w>       </span><span class=nv>S</span><span class=w> </span><span class=o>=</span><span class=w> </span>Sticky<span class=w> </span>ECMP<span class=w> </span>requested
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a><span class=o>===============================================================================</span>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a>
</span><span id=__span-17-37><a id=__codelineno-17-37 name=__codelineno-17-37 href=#__codelineno-17-37></a>
</span><span id=__span-17-38><a id=__codelineno-17-38 name=__codelineno-17-38 href=#__codelineno-17-38></a><span class=c># Checking R5&#39;s route table</span>
</span><span id=__span-17-39><a id=__codelineno-17-39 name=__codelineno-17-39 href=#__codelineno-17-39></a>
</span><span id=__span-17-40><a id=__codelineno-17-40 name=__codelineno-17-40 href=#__codelineno-17-40></a>A:R5#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table
</span><span id=__span-17-41><a id=__codelineno-17-41 name=__codelineno-17-41 href=#__codelineno-17-41></a>
</span><span id=__span-17-42><a id=__codelineno-17-42 name=__codelineno-17-42 href=#__codelineno-17-42></a><span class=o>===============================================================================</span>
</span><span id=__span-17-43><a id=__codelineno-17-43 name=__codelineno-17-43 href=#__codelineno-17-43></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-17-44><a id=__codelineno-17-44 name=__codelineno-17-44 href=#__codelineno-17-44></a><span class=o>===============================================================================</span>
</span><span id=__span-17-45><a id=__codelineno-17-45 name=__codelineno-17-45 href=#__codelineno-17-45></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-17-46><a id=__codelineno-17-46 name=__codelineno-17-46 href=#__codelineno-17-46></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-17-47><a id=__codelineno-17-47 name=__codelineno-17-47 href=#__codelineno-17-47></a>-------------------------------------------------------------------------------
</span><span id=__span-17-48><a id=__codelineno-17-48 name=__codelineno-17-48 href=#__codelineno-17-48></a><span class=m>1</span>.1.1.1/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m13s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-49><a id=__codelineno-17-49 name=__codelineno-17-49 href=#__codelineno-17-49></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>100</span>
</span><span id=__span-17-50><a id=__codelineno-17-50 name=__codelineno-17-50 href=#__codelineno-17-50></a><span class=m>2</span>.2.2.2/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h19m27s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-51><a id=__codelineno-17-51 name=__codelineno-17-51 href=#__codelineno-17-51></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-52><a id=__codelineno-17-52 name=__codelineno-17-52 href=#__codelineno-17-52></a><span class=m>3</span>.3.3.3/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h19m09s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-53><a id=__codelineno-17-53 name=__codelineno-17-53 href=#__codelineno-17-53></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-54><a id=__codelineno-17-54 name=__codelineno-17-54 href=#__codelineno-17-54></a><span class=m>4</span>.4.4.4/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h18m37s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-55><a id=__codelineno-17-55 name=__codelineno-17-55 href=#__codelineno-17-55></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-56><a id=__codelineno-17-56 name=__codelineno-17-56 href=#__codelineno-17-56></a><span class=m>5</span>.5.5.5/32<span class=w>                                    </span>Local<span class=w>   </span>Local<span class=w>     </span>00h24m57s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-17-57><a id=__codelineno-17-57 name=__codelineno-17-57 href=#__codelineno-17-57></a><span class=w>       </span>system<span class=w>                                                       </span><span class=m>0</span>
</span><span id=__span-17-58><a id=__codelineno-17-58 name=__codelineno-17-58 href=#__codelineno-17-58></a><span class=m>6</span>.6.6.6/32<span class=w>                                    </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m25s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-59><a id=__codelineno-17-59 name=__codelineno-17-59 href=#__codelineno-17-59></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-60><a id=__codelineno-17-60 name=__codelineno-17-60 href=#__codelineno-17-60></a><span class=m>10</span>.1.2.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h23m46s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-61><a id=__codelineno-17-61 name=__codelineno-17-61 href=#__codelineno-17-61></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-62><a id=__codelineno-17-62 name=__codelineno-17-62 href=#__codelineno-17-62></a><span class=m>10</span>.1.3.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h23m46s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-63><a id=__codelineno-17-63 name=__codelineno-17-63 href=#__codelineno-17-63></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>200</span>
</span><span id=__span-17-64><a id=__codelineno-17-64 name=__codelineno-17-64 href=#__codelineno-17-64></a><span class=m>10</span>.1.5.0/24<span class=w>                                   </span>Local<span class=w>   </span>Local<span class=w>     </span>00h24m37s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-17-65><a id=__codelineno-17-65 name=__codelineno-17-65 href=#__codelineno-17-65></a><span class=w>       </span>toR1<span class=w>                                                         </span><span class=m>0</span>
</span><span id=__span-17-66><a id=__codelineno-17-66 name=__codelineno-17-66 href=#__codelineno-17-66></a><span class=m>10</span>.2.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h23m47s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-67><a id=__codelineno-17-67 name=__codelineno-17-67 href=#__codelineno-17-67></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-68><a id=__codelineno-17-68 name=__codelineno-17-68 href=#__codelineno-17-68></a><span class=m>10</span>.2.6.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h20m36s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-69><a id=__codelineno-17-69 name=__codelineno-17-69 href=#__codelineno-17-69></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-70><a id=__codelineno-17-70 name=__codelineno-17-70 href=#__codelineno-17-70></a><span class=m>10</span>.3.4.0/24<span class=w>                                   </span>Remote<span class=w>  </span>OSPF<span class=w>      </span>00h23m47s<span class=w>  </span><span class=m>10</span>
</span><span id=__span-17-71><a id=__codelineno-17-71 name=__codelineno-17-71 href=#__codelineno-17-71></a><span class=w>       </span><span class=m>10</span>.1.5.1<span class=w>                                                     </span><span class=m>300</span>
</span><span id=__span-17-72><a id=__codelineno-17-72 name=__codelineno-17-72 href=#__codelineno-17-72></a>-------------------------------------------------------------------------------
</span><span id=__span-17-73><a id=__codelineno-17-73 name=__codelineno-17-73 href=#__codelineno-17-73></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>12</span>
</span><span id=__span-17-74><a id=__codelineno-17-74 name=__codelineno-17-74 href=#__codelineno-17-74></a>Flags:<span class=w> </span><span class=nv>n</span><span class=w> </span><span class=o>=</span><span class=w> </span>Number<span class=w> </span>of<span class=w> </span><span class=nb>times</span><span class=w> </span>nexthop<span class=w> </span>is<span class=w> </span>repeated
</span><span id=__span-17-75><a id=__codelineno-17-75 name=__codelineno-17-75 href=#__codelineno-17-75></a><span class=w>       </span><span class=nv>B</span><span class=w> </span><span class=o>=</span><span class=w> </span>BGP<span class=w> </span>backup<span class=w> </span>route<span class=w> </span>available
</span><span id=__span-17-76><a id=__codelineno-17-76 name=__codelineno-17-76 href=#__codelineno-17-76></a><span class=w>       </span><span class=nv>L</span><span class=w> </span><span class=o>=</span><span class=w> </span>LFA<span class=w> </span>nexthop<span class=w> </span>available
</span><span id=__span-17-77><a id=__codelineno-17-77 name=__codelineno-17-77 href=#__codelineno-17-77></a><span class=w>       </span><span class=nv>S</span><span class=w> </span><span class=o>=</span><span class=w> </span>Sticky<span class=w> </span>ECMP<span class=w> </span>requested
</span><span id=__span-17-78><a id=__codelineno-17-78 name=__codelineno-17-78 href=#__codelineno-17-78></a><span class=o>===============================================================================</span>
</span></code></pre></div> <p>Since we configured all the routers in our topology and verified that the routes have been propagated properly we can try to run <code>ping</code> between R6 and R5 system interfaces:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>A:R6# ping 5.5.5.5
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>PING 5.5.5.5 56 data bytes
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>64 bytes from 5.5.5.5: icmp_seq=1 ttl=62 time=11.7ms.
</span></code></pre></div> <h2 id=ospf-route-summarization>OSPF Route Summarization<a class=headerlink href=#ospf-route-summarization title="Permanent link">#</a></h2> <p>So far we have configured multi-area OSPF topology with three Areas. One of the multi-area OSPF benefits is to perform <em>manual route summarization</em>. In this section we will configure OSPF route summarization between Area 0 and Area 1.</p> <p>The idea is depicted below where we will have a single Summary LSA (Type 3) in the Area 1 instead of three different LSAs.</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/16191/21639405.11b/0_83cbc_fd84eebd_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/16191/21639405.11b/0_83cbc_fd84eebd_orig.png></a></p> <p>To get a range of IP addresses which we will summarize later we will add 3 loopback interfaces to R3 router and include them in OSPF Area 0:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>A:R3# show router interface
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>===============================================================================
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>Interface Table (Router: Base)
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>===============================================================================
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>Interface-Name                   Adm         Opr(v4/v6)  Mode    Port/SapId
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>   IP-Address                                                    PfxState
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>-------------------------------------------------------------------------------
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>lo1                              Up          Up/--       Network loopback
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>   192.168.3.1/32                                                n/a
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>lo2                              Up          Up/--       Network loopback
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>   192.168.3.2/32                                                n/a
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>lo3                              Up          Up/--       Network loopback
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>   192.168.3.3/32                                                n/a
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a> &lt;output omitted&gt;
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a>*A:R3# show router ospf interface
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a>===============================================================================
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>OSPFv2 (0) all interfaces
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>===============================================================================
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a>If Name               Area Id         Designated Rtr  Bkup Desig Rtr  Adm  Oper
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a>-------------------------------------------------------------------------------
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a>system                0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a>toR1                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a>toR4                  0.0.0.0         0.0.0.0         0.0.0.0         Up   PToP
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a>lo1                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
</span><span id=__span-19-29><a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a>lo2                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
</span><span id=__span-19-30><a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a>lo3                   0.0.0.0         3.3.3.3         0.0.0.0         Up   DR
</span><span id=__span-19-31><a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a>-------------------------------------------------------------------------------
</span><span id=__span-19-32><a id=__codelineno-19-32 name=__codelineno-19-32 href=#__codelineno-19-32></a>No. of OSPF Interfaces: 6
</span><span id=__span-19-33><a id=__codelineno-19-33 name=__codelineno-19-33 href=#__codelineno-19-33></a>===============================================================================
</span></code></pre></div> <p>Since we added these interfaces to OSPF Area 0 we see them coming to R5 router as <em>Type 3 Network Summary LSA</em>. And these routes make their way to the routing table of R5.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>A:R5# show router ospf database
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>===============================================================================
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>===============================================================================
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>-------------------------------------------------------------------------------
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         531  0x80000005 0x4eeb
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         43   0x80000006 0x45bc
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         496  0x80000003 0x1b38
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         1898 0x80000002 0xda11
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         225  0x80000003 0xaa3c
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         463  0x80000003 0x6816
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         373  0x80000003 0xc6a
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         323  0x80000004 0x8e56
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         32   0x80000004 0x8360
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         513  0x80000004 0x5825
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         1089 0x80000003 0x4438
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         1188 0x80000004 0x4c30
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a>Summary 0.0.0.1         192.168.3.1     1.1.1.1         566  0x80000001 0x5c2b
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a>Summary 0.0.0.1         192.168.3.2     1.1.1.1         560  0x80000001 0x5234
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a>Summary 0.0.0.1         192.168.3.3     1.1.1.1         554  0x80000001 0x483d
</span><span id=__span-20-23><a id=__codelineno-20-23 name=__codelineno-20-23 href=#__codelineno-20-23></a>-------------------------------------------------------------------------------
</span><span id=__span-20-24><a id=__codelineno-20-24 name=__codelineno-20-24 href=#__codelineno-20-24></a>No. of LSAs: 15
</span><span id=__span-20-25><a id=__codelineno-20-25 name=__codelineno-20-25 href=#__codelineno-20-25></a>===============================================================================
</span><span id=__span-20-26><a id=__codelineno-20-26 name=__codelineno-20-26 href=#__codelineno-20-26></a>
</span><span id=__span-20-27><a id=__codelineno-20-27 name=__codelineno-20-27 href=#__codelineno-20-27></a>
</span><span id=__span-20-28><a id=__codelineno-20-28 name=__codelineno-20-28 href=#__codelineno-20-28></a>A:R5# show router route-table
</span><span id=__span-20-29><a id=__codelineno-20-29 name=__codelineno-20-29 href=#__codelineno-20-29></a>
</span><span id=__span-20-30><a id=__codelineno-20-30 name=__codelineno-20-30 href=#__codelineno-20-30></a>===============================================================================
</span><span id=__span-20-31><a id=__codelineno-20-31 name=__codelineno-20-31 href=#__codelineno-20-31></a>Route Table (Router: Base)
</span><span id=__span-20-32><a id=__codelineno-20-32 name=__codelineno-20-32 href=#__codelineno-20-32></a>===============================================================================
</span><span id=__span-20-33><a id=__codelineno-20-33 name=__codelineno-20-33 href=#__codelineno-20-33></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-20-34><a id=__codelineno-20-34 name=__codelineno-20-34 href=#__codelineno-20-34></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-20-35><a id=__codelineno-20-35 name=__codelineno-20-35 href=#__codelineno-20-35></a>-------------------------------------------------------------------------------
</span><span id=__span-20-36><a id=__codelineno-20-36 name=__codelineno-20-36 href=#__codelineno-20-36></a> &lt; &lt;ouput omitted&gt;&gt;
</span><span id=__span-20-37><a id=__codelineno-20-37 name=__codelineno-20-37 href=#__codelineno-20-37></a>
</span><span id=__span-20-38><a id=__codelineno-20-38 name=__codelineno-20-38 href=#__codelineno-20-38></a>192.168.3.1/32                                Remote  OSPF      00h10m07s  10
</span><span id=__span-20-39><a id=__codelineno-20-39 name=__codelineno-20-39 href=#__codelineno-20-39></a>       10.1.5.1                                                     200
</span><span id=__span-20-40><a id=__codelineno-20-40 name=__codelineno-20-40 href=#__codelineno-20-40></a>192.168.3.2/32                                Remote  OSPF      00h10m02s  10
</span><span id=__span-20-41><a id=__codelineno-20-41 name=__codelineno-20-41 href=#__codelineno-20-41></a>       10.1.5.1                                                     200
</span><span id=__span-20-42><a id=__codelineno-20-42 name=__codelineno-20-42 href=#__codelineno-20-42></a>192.168.3.3/32                                Remote  OSPF      00h09m56s  10
</span><span id=__span-20-43><a id=__codelineno-20-43 name=__codelineno-20-43 href=#__codelineno-20-43></a>       10.1.5.1                                                     200
</span><span id=__span-20-44><a id=__codelineno-20-44 name=__codelineno-20-44 href=#__codelineno-20-44></a>-------------------------------------------------------------------------------
</span><span id=__span-20-45><a id=__codelineno-20-45 name=__codelineno-20-45 href=#__codelineno-20-45></a>No. of Routes: 15
</span><span id=__span-20-46><a id=__codelineno-20-46 name=__codelineno-20-46 href=#__codelineno-20-46></a>Flags: n = Number of times nexthop is repeated
</span><span id=__span-20-47><a id=__codelineno-20-47 name=__codelineno-20-47 href=#__codelineno-20-47></a>       B = BGP backup route available
</span><span id=__span-20-48><a id=__codelineno-20-48 name=__codelineno-20-48 href=#__codelineno-20-48></a>       L = LFA nexthop available
</span><span id=__span-20-49><a id=__codelineno-20-49 name=__codelineno-20-49 href=#__codelineno-20-49></a>       S = Sticky ECMP requested
</span><span id=__span-20-50><a id=__codelineno-20-50 name=__codelineno-20-50 href=#__codelineno-20-50></a>===============================================================================
</span></code></pre></div> <p>We will configure route summarization on Area Border Router (R1), so it will advertise <strong>only one</strong> summary route <code>192.168.3.0/30</code> instead of three specific routes.</p> <p>Configuration steps:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>A:R1# configure router ospf area 0
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>A:R1&gt;config&gt;router&gt;ospf&gt;area# area-range 192.168.3.0/30
</span></code></pre></div> <p>Pay attention, that summarization command <code>area-range</code> must be applied in the context of the area being summarized. Since we are summarizing routes <strong>from Area 0</strong> to Area 1 we use this command in the <strong>Area 0</strong> configuration context.</p> <p>By default, the command <code>area-range &lt;prefix&gt;/&lt;length&gt;</code> will actually be expanded to <code>area-range &lt;prefix&gt;/&lt;length&gt; advertise</code>, meaning that ABR will advertise this prefix. Counterpart statement <code>not-advertise</code> can be supplied to enable route suppression and will be discussed in a detail in next section.</p> <p><strong>Pay attention:</strong> route summarization procedure automatically adds a <em>black-hole</em> route in R1's route table:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>*A:R1# show router route-table 192.168.3.0/24 longer
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>===============================================================================
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>Route Table (Router: Base)
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>===============================================================================
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>-------------------------------------------------------------------------------
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>192.168.3.0/30                                Blackh* OSPF      00h32m52s  255
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>       Black Hole                                                   100
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>192.168.3.1/32                                Remote  OSPF      00h53m58s  10
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>       10.1.3.3                                                     100
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>192.168.3.2/32                                Remote  OSPF      00h53m52s  10
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>       10.1.3.3                                                     100
</span><span id=__span-22-15><a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a>192.168.3.3/32                                Remote  OSPF      00h53m47s  10
</span><span id=__span-22-16><a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a>       10.1.3.3                                                     100
</span><span id=__span-22-17><a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a>-------------------------------------------------------------------------------
</span><span id=__span-22-18><a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a>No. of Routes: 4
</span></code></pre></div> <p>Lets see what has changed at R5. R5's LSDB now has just <strong>one</strong> <em>Type 3 Summary LSA</em> for the aggregated <code>192.168.3.0/30</code> network and has no LSA's for the specific prefixes:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>A:R5# show router ospf database
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>===============================================================================
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>===============================================================================
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>-------------------------------------------------------------------------------
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1234 0x80000005 0x4eeb
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         746  0x80000006 0x45bc
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         1199 0x80000003 0x1b38
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         658  0x80000003 0xd812
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         928  0x80000003 0xaa3c
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         1166 0x80000003 0x6816
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         1076 0x80000003 0xc6a
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         1026 0x80000004 0x8e56
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         735  0x80000004 0x8360
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         1216 0x80000004 0x5825
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         420  0x80000004 0x4239
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         340  0x80000005 0x4a31
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a>Summary 0.0.0.1         192.168.3.0     1.1.1.1         4    0x80000001 0x5437
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a>-------------------------------------------------------------------------------
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a>No. of LSAs: 13
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a>===============================================================================
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a>
</span><span id=__span-23-25><a id=__codelineno-23-25 name=__codelineno-23-25 href=#__codelineno-23-25></a>
</span><span id=__span-23-26><a id=__codelineno-23-26 name=__codelineno-23-26 href=#__codelineno-23-26></a>
</span><span id=__span-23-27><a id=__codelineno-23-27 name=__codelineno-23-27 href=#__codelineno-23-27></a>A:R5# show router route-table
</span><span id=__span-23-28><a id=__codelineno-23-28 name=__codelineno-23-28 href=#__codelineno-23-28></a>
</span><span id=__span-23-29><a id=__codelineno-23-29 name=__codelineno-23-29 href=#__codelineno-23-29></a>===============================================================================
</span><span id=__span-23-30><a id=__codelineno-23-30 name=__codelineno-23-30 href=#__codelineno-23-30></a>Route Table (Router: Base)
</span><span id=__span-23-31><a id=__codelineno-23-31 name=__codelineno-23-31 href=#__codelineno-23-31></a>===============================================================================
</span><span id=__span-23-32><a id=__codelineno-23-32 name=__codelineno-23-32 href=#__codelineno-23-32></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-23-33><a id=__codelineno-23-33 name=__codelineno-23-33 href=#__codelineno-23-33></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-23-34><a id=__codelineno-23-34 name=__codelineno-23-34 href=#__codelineno-23-34></a>-------------------------------------------------------------------------------
</span><span id=__span-23-35><a id=__codelineno-23-35 name=__codelineno-23-35 href=#__codelineno-23-35></a> &lt;ouptut omitted&gt;    
</span><span id=__span-23-36><a id=__codelineno-23-36 name=__codelineno-23-36 href=#__codelineno-23-36></a>
</span><span id=__span-23-37><a id=__codelineno-23-37 name=__codelineno-23-37 href=#__codelineno-23-37></a>192.168.3.0/30                                Remote  OSPF      00h30m58s  10
</span><span id=__span-23-38><a id=__codelineno-23-38 name=__codelineno-23-38 href=#__codelineno-23-38></a>       10.1.5.1                                                     200
</span><span id=__span-23-39><a id=__codelineno-23-39 name=__codelineno-23-39 href=#__codelineno-23-39></a>-------------------------------------------------------------------------------
</span><span id=__span-23-40><a id=__codelineno-23-40 name=__codelineno-23-40 href=#__codelineno-23-40></a>No. of Routes: 13
</span><span id=__span-23-41><a id=__codelineno-23-41 name=__codelineno-23-41 href=#__codelineno-23-41></a>===============================================================================
</span></code></pre></div> <p>Verifying that IP connectivity works for summarized route:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>A:R5# ping 192.168.3.3
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>PING 192.168.3.3 56 data bytes
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>64 bytes from 192.168.3.3: icmp_seq=1 ttl=63 time=10.2ms.
</span></code></pre></div> <h2 id=ospf-route-filtering-on-abr>OSPF Route filtering on ABR<a class=headerlink href=#ospf-route-filtering-on-abr title="Permanent link">#</a></h2> <p>You can filter unwanted routes on the ABR with the <code>area-range</code> command adding the key <code>not-advertise</code>.</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/6422/21639405.11b/0_83cba_d148eb08_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/6422/21639405.11b/0_83cba_d148eb08_orig.png></a></p> <p>For example lets take a look at R6's route table which contains specific routes to R3's loopback addresses. These addresses is advertising by R2 since it is acting as ABR and advertises all the routes it has in its routing table.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>A:R6# show router route-table 192.168.3.0/24 longer
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>===============================================================================
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>Route Table (Router: Base)
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>===============================================================================
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>-------------------------------------------------------------------------------
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>192.168.3.1/32                                Remote  OSPF      01h21m48s  10
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a>       10.2.6.2                                                     300
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a>192.168.3.2/32                                Remote  OSPF      01h21m43s  10
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a>       10.2.6.2                                                     300
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a>192.168.3.3/32                                Remote  OSPF      01h21m37s  10
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a>       10.2.6.2                                                     300
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a>-------------------------------------------------------------------------------
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a>No. of Routes: 3
</span></code></pre></div> <p>If we want to prevent R2 from advertising some routes to its neighbor in <em>Area 1</em> then we have to add configuration commands in Area 0's context of R2:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>A:R2# configure router ospf area 0
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>A:R2&gt;config&gt;router&gt;ospf&gt;area# area-range 192.168.3.1/32 not-advertise
</span></code></pre></div> <p>By doing this, we tell R2 to stop advertising <em>Type 3 Summary LSA</em> for prefix 192.168.3.1/32. And R6's route table immediately reflects this change by not having this specific route in its route table:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>A:R6# show router route-table 192.168.3.0/24 longer
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>===============================================================================
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>Route Table (Router: Base)
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>===============================================================================
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>-------------------------------------------------------------------------------
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>192.168.3.2/32                                Remote  OSPF      01h28m38s  10
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>       10.2.6.2                                                     300
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>192.168.3.3/32                                Remote  OSPF      01h28m32s  10
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>       10.2.6.2                                                     300
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>-------------------------------------------------------------------------------
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>No. of Routes: 2
</span></code></pre></div> <p>You can also use "summary" prefix to filter a range of routes:</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c># filter all prefixes that falls under 192.168.3.0/30 aggregate</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>A:R2&gt;config&gt;router&gt;ospf&gt;area#<span class=w> </span>area-range<span class=w> </span><span class=m>192</span>.168.3.0/30<span class=w> </span>not-advertise
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=c># All loopback routes are filtered by R2</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>A:R6#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table<span class=w> </span><span class=m>192</span>.168.3.0/24<span class=w> </span>longer
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=o>===============================================================================</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=o>===============================================================================</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>-------------------------------------------------------------------------------
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>0</span>
</span></code></pre></div> <p><strong>Note:</strong> Route filtering does not install any <em>black-hole</em> routes.</p> <h2 id=asbr-and-ospf-route-redistribution>ASBR and OSPF Route Redistribution<a class=headerlink href=#asbr-and-ospf-route-redistribution title="Permanent link">#</a></h2> <p>Routes between different routing domains can me mutually exchanged. External routers can be exported into OSPF and vice versa. The process of routes exchange is often called <strong>route redistribution</strong>.</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/6833/21639405.11b/0_83cbe_34bbedc2_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/6833/21639405.11b/0_83cbe_34bbedc2_orig.png></a></p> <p>In this section we will redistribute the routes that are in R5's route table but are not advertised yet into OSPF process. These routes are created by means of additional loopback interfaces that are not included into OSPF process.</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>*A:R5#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table<span class=w> </span><span class=m>192</span>.168.5.0/24<span class=w> </span>longer
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=o>===============================================================================</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=o>===============================================================================</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>-------------------------------------------------------------------------------
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=m>192</span>.168.5.1/32<span class=w>                                </span>Local<span class=w>   </span>Local<span class=w>     </span>00h00m14s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=w>       </span>lo1<span class=w>                                                          </span><span class=m>0</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=m>192</span>.168.5.2/32<span class=w>                                </span>Local<span class=w>   </span>Local<span class=w>     </span>00h00m09s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=w>       </span>lo2<span class=w>                                                          </span><span class=m>0</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=m>192</span>.168.5.3/32<span class=w>                                </span>Local<span class=w>   </span>Local<span class=w>     </span>00h00m05s<span class=w>  </span><span class=m>0</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=w>       </span>lo3<span class=w>                                                          </span><span class=m>0</span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a>-------------------------------------------------------------------------------
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>3</span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=c># ensure that loopbacks are not OSPF-enabled interfaces</span>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a>*A:R5#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>interface
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a><span class=o>===============================================================================</span>
</span><span id=__span-29-23><a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a>OSPFv2<span class=w> </span><span class=o>(</span><span class=m>0</span><span class=o>)</span><span class=w> </span>all<span class=w> </span>interfaces
</span><span id=__span-29-24><a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a><span class=o>===============================================================================</span>
</span><span id=__span-29-25><a id=__codelineno-29-25 name=__codelineno-29-25 href=#__codelineno-29-25></a>If<span class=w> </span>Name<span class=w>               </span>Area<span class=w> </span>Id<span class=w>         </span>Designated<span class=w> </span>Rtr<span class=w>  </span>Bkup<span class=w> </span>Desig<span class=w> </span>Rtr<span class=w>  </span>Adm<span class=w>  </span>Oper
</span><span id=__span-29-26><a id=__codelineno-29-26 name=__codelineno-29-26 href=#__codelineno-29-26></a>-------------------------------------------------------------------------------
</span><span id=__span-29-27><a id=__codelineno-29-27 name=__codelineno-29-27 href=#__codelineno-29-27></a>system<span class=w>                </span><span class=m>0</span>.0.0.1<span class=w>         </span><span class=m>5</span>.5.5.5<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>DR
</span><span id=__span-29-28><a id=__codelineno-29-28 name=__codelineno-29-28 href=#__codelineno-29-28></a>toR1<span class=w>                  </span><span class=m>0</span>.0.0.1<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span><span class=m>0</span>.0.0.0<span class=w>         </span>Up<span class=w>   </span>PToP
</span><span id=__span-29-29><a id=__codelineno-29-29 name=__codelineno-29-29 href=#__codelineno-29-29></a>-------------------------------------------------------------------------------
</span><span id=__span-29-30><a id=__codelineno-29-30 name=__codelineno-29-30 href=#__codelineno-29-30></a>No.<span class=w> </span>of<span class=w> </span>OSPF<span class=w> </span>Interfaces:<span class=w> </span><span class=m>2</span>
</span><span id=__span-29-31><a id=__codelineno-29-31 name=__codelineno-29-31 href=#__codelineno-29-31></a><span class=o>===============================================================================</span>
</span><span id=__span-29-32><a id=__codelineno-29-32 name=__codelineno-29-32 href=#__codelineno-29-32></a>
</span><span id=__span-29-33><a id=__codelineno-29-33 name=__codelineno-29-33 href=#__codelineno-29-33></a>
</span><span id=__span-29-34><a id=__codelineno-29-34 name=__codelineno-29-34 href=#__codelineno-29-34></a><span class=c># and R1 has no routes towards these prefixes, since they are only local to R5</span>
</span><span id=__span-29-35><a id=__codelineno-29-35 name=__codelineno-29-35 href=#__codelineno-29-35></a>A:R1#<span class=w> </span>show<span class=w> </span>router<span class=w> </span>route-table<span class=w> </span><span class=m>192</span>.168.5.0/24<span class=w> </span>longer
</span><span id=__span-29-36><a id=__codelineno-29-36 name=__codelineno-29-36 href=#__codelineno-29-36></a>
</span><span id=__span-29-37><a id=__codelineno-29-37 name=__codelineno-29-37 href=#__codelineno-29-37></a><span class=o>===============================================================================</span>
</span><span id=__span-29-38><a id=__codelineno-29-38 name=__codelineno-29-38 href=#__codelineno-29-38></a>Route<span class=w> </span>Table<span class=w> </span><span class=o>(</span>Router:<span class=w> </span>Base<span class=o>)</span>
</span><span id=__span-29-39><a id=__codelineno-29-39 name=__codelineno-29-39 href=#__codelineno-29-39></a><span class=o>===============================================================================</span>
</span><span id=__span-29-40><a id=__codelineno-29-40 name=__codelineno-29-40 href=#__codelineno-29-40></a>Dest<span class=w> </span>Prefix<span class=o>[</span>Flags<span class=o>]</span><span class=w>                            </span>Type<span class=w>    </span>Proto<span class=w>     </span>Age<span class=w>        </span>Pref
</span><span id=__span-29-41><a id=__codelineno-29-41 name=__codelineno-29-41 href=#__codelineno-29-41></a><span class=w>      </span>Next<span class=w> </span>Hop<span class=o>[</span>Interface<span class=w> </span>Name<span class=o>]</span><span class=w>                                    </span>Metric
</span><span id=__span-29-42><a id=__codelineno-29-42 name=__codelineno-29-42 href=#__codelineno-29-42></a>-------------------------------------------------------------------------------
</span><span id=__span-29-43><a id=__codelineno-29-43 name=__codelineno-29-43 href=#__codelineno-29-43></a>-------------------------------------------------------------------------------
</span><span id=__span-29-44><a id=__codelineno-29-44 name=__codelineno-29-44 href=#__codelineno-29-44></a>No.<span class=w> </span>of<span class=w> </span>Routes:<span class=w> </span><span class=m>0</span>
</span></code></pre></div> <p>To redistribute these local routes into OSPF process a <strong>policy</strong> should be configured. Lets give our policy a <code>EXPORT Local Loopbacks</code> name:</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>*A:R5#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>policy-options
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>*A:R5&gt;config&gt;router&gt;policy-options#<span class=w> </span>begin
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=c># create prefix list to match desired routes</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>*A:R5&gt;config&gt;router&gt;policy-options#<span class=w> </span>prefix-list<span class=w> </span><span class=s2>&quot;Loopbacks_to_export&quot;</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;prefix-list$<span class=w> </span>prefix<span class=w> </span><span class=m>192</span>.168.5.0/24<span class=w> </span>longer
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;prefix-list$<span class=w> </span>back
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=c># create policy statement to export routes</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>*A:R5&gt;config&gt;router&gt;policy-options#<span class=w> </span>policy-statement<span class=w> </span><span class=s2>&quot;EXPORT Local Loopbacks&quot;</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement$<span class=w> </span>entry<span class=w> </span><span class=m>10</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=c># refer to the prefix list created earlier</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$<span class=w> </span>from<span class=w> </span>prefix-list<span class=w> </span><span class=s2>&quot;Loopbacks_to_export&quot;</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=c># narrow the scope of this policy &quot;to protocol ospf&quot; only</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$<span class=w> </span>to<span class=w> </span>protocol<span class=w> </span>ospf
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a><span class=c># set accept action (default action is deny all)</span>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry#<span class=w> </span>action<span class=w> </span>accept
</span><span id=__span-30-21><a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry&gt;action#<span class=w> </span>back
</span><span id=__span-30-22><a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement&gt;entry$<span class=w> </span>back
</span><span id=__span-30-23><a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a>*A:R5&gt;config&gt;router&gt;policy-options&gt;policy-statement$<span class=w> </span>back
</span><span id=__span-30-24><a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>
</span><span id=__span-30-25><a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a><span class=c># commit changes</span>
</span><span id=__span-30-26><a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a>*A:R5&gt;config&gt;router&gt;policy-options#<span class=w> </span>commit
</span><span id=__span-30-27><a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a>
</span><span id=__span-30-28><a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a>
</span><span id=__span-30-29><a id=__codelineno-30-29 name=__codelineno-30-29 href=#__codelineno-30-29></a><span class=c># verify the created policy</span>
</span><span id=__span-30-30><a id=__codelineno-30-30 name=__codelineno-30-30 href=#__codelineno-30-30></a>*A:R5&gt;config&gt;router&gt;policy-options#<span class=w> </span>info
</span><span id=__span-30-31><a id=__codelineno-30-31 name=__codelineno-30-31 href=#__codelineno-30-31></a>----------------------------------------------
</span><span id=__span-30-32><a id=__codelineno-30-32 name=__codelineno-30-32 href=#__codelineno-30-32></a><span class=w>            </span>prefix-list<span class=w> </span><span class=s2>&quot;Loopbacks_to_export&quot;</span>
</span><span id=__span-30-33><a id=__codelineno-30-33 name=__codelineno-30-33 href=#__codelineno-30-33></a><span class=w>                </span>prefix<span class=w> </span><span class=m>192</span>.168.5.0/24<span class=w> </span>longer
</span><span id=__span-30-34><a id=__codelineno-30-34 name=__codelineno-30-34 href=#__codelineno-30-34></a><span class=w>            </span>exit
</span><span id=__span-30-35><a id=__codelineno-30-35 name=__codelineno-30-35 href=#__codelineno-30-35></a><span class=w>            </span>policy-statement<span class=w> </span><span class=s2>&quot;EXPORT Local Loopbacks&quot;</span>
</span><span id=__span-30-36><a id=__codelineno-30-36 name=__codelineno-30-36 href=#__codelineno-30-36></a><span class=w>                </span>entry<span class=w> </span><span class=m>10</span>
</span><span id=__span-30-37><a id=__codelineno-30-37 name=__codelineno-30-37 href=#__codelineno-30-37></a><span class=w>                    </span>from
</span><span id=__span-30-38><a id=__codelineno-30-38 name=__codelineno-30-38 href=#__codelineno-30-38></a><span class=w>                        </span>prefix-list<span class=w> </span><span class=s2>&quot;Loopbacks_to_export&quot;</span>
</span><span id=__span-30-39><a id=__codelineno-30-39 name=__codelineno-30-39 href=#__codelineno-30-39></a><span class=w>                    </span>exit
</span><span id=__span-30-40><a id=__codelineno-30-40 name=__codelineno-30-40 href=#__codelineno-30-40></a><span class=w>                    </span>to
</span><span id=__span-30-41><a id=__codelineno-30-41 name=__codelineno-30-41 href=#__codelineno-30-41></a><span class=w>                        </span>protocol<span class=w> </span>ospf
</span><span id=__span-30-42><a id=__codelineno-30-42 name=__codelineno-30-42 href=#__codelineno-30-42></a><span class=w>                    </span>exit
</span><span id=__span-30-43><a id=__codelineno-30-43 name=__codelineno-30-43 href=#__codelineno-30-43></a><span class=w>                    </span>action<span class=w> </span>accept
</span><span id=__span-30-44><a id=__codelineno-30-44 name=__codelineno-30-44 href=#__codelineno-30-44></a><span class=w>                    </span>exit
</span><span id=__span-30-45><a id=__codelineno-30-45 name=__codelineno-30-45 href=#__codelineno-30-45></a><span class=w>                </span>exit
</span><span id=__span-30-46><a id=__codelineno-30-46 name=__codelineno-30-46 href=#__codelineno-30-46></a><span class=w>            </span>exit
</span><span id=__span-30-47><a id=__codelineno-30-47 name=__codelineno-30-47 href=#__codelineno-30-47></a>----------------------------------------------
</span></code></pre></div> <p>The next step is to configure R5 router as an <strong>ASBR</strong> and to apply the created policy to OSPF process:</p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c># &quot;asbr&quot; keyword makes a router an ASBR</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>*A:R5#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>*A:R5&gt;config&gt;router&gt;ospf#<span class=w> </span>asbr
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=c># apply the export policy</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>*A:R5&gt;config&gt;router&gt;ospf#<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=s2>&quot;EXPORT Local Loopbacks&quot;</span>
</span></code></pre></div> <h3 id=verifying-redistributed-routes-propagation>Verifying redistributed routes propagation<a class=headerlink href=#verifying-redistributed-routes-propagation title="Permanent link">#</a></h3> <p>Now, our R5 router is now configured as an ASBR and the local routes should get exported into OSPF process. These changes allow other routers in OSPF domain to receive these routes by means of <em>Type 4 ASBR Summary LSA</em> and <em>Type 5 AS External LSA</em>:</p> <p>R5:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>*A:R5# show router ospf database
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>===============================================================================
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>===============================================================================
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>-------------------------------------------------------------------------------
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1033 0x80000004 0x50ea
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         1072 0x80000006 0x4bb4
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         706  0x80000004 0x1939
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         2226 0x80000002 0xda11
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         107  0x80000003 0xaa3c
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         929  0x80000003 0x6816
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         1879 0x80000002 0xe69
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         366  0x80000003 0x9055
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         472  0x80000003 0x855f
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         737  0x80000003 0x5a24
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         939  0x80000003 0x4438
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         442  0x80000003 0x4e2f
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>Summary 0.0.0.1         192.168.3.0     1.1.1.1         355  0x80000003 0x5039
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a>AS Ext  n/a             192.168.5.1     5.5.5.5         506  0x80000001 0x63ea
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a>AS Ext  n/a             192.168.5.2     5.5.5.5         506  0x80000001 0x59f3
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a>AS Ext  n/a             192.168.5.3     5.5.5.5         506  0x80000001 0x4ffc
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a>-------------------------------------------------------------------------------
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a>No. of LSAs: 16
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>===============================================================================
</span></code></pre></div> <p>R1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a>A:R1# show router ospf database
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>===============================================================================
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>===============================================================================
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>-------------------------------------------------------------------------------
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>Router  0.0.0.0         1.1.1.1         1.1.1.1         655  0x80000006 0x5acc
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>Router  0.0.0.0         2.2.2.2         2.2.2.2         988  0x80000006 0xaf65
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>Router  0.0.0.0         3.3.3.3         3.3.3.3         1122 0x80000009 0x1a6b
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>Router  0.0.0.0         4.4.4.4         4.4.4.4         1133 0x80000006 0xa54c
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>Summary 0.0.0.0         5.5.5.5         1.1.1.1         562  0x80000003 0x4e90
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>Summary 0.0.0.0         10.1.5.0        1.1.1.1         472  0x80000003 0x6f73
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>Summary 0.0.0.0         6.6.6.6         2.2.2.2         189  0x80000003 0x2d4
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>Summary 0.0.0.0         10.2.6.0        2.2.2.2         166  0x80000003 0x3aa2
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a>AS Summ 0.0.0.0         5.5.5.5         1.1.1.1         1407 0x80000001 0x449b
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1368 0x80000004 0x50ea
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         1409 0x80000006 0x4bb4
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         1042 0x80000004 0x1939
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         321  0x80000003 0xd812
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         443  0x80000003 0xaa3c
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         1265 0x80000003 0x6816
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         266  0x80000003 0xc6a
</span><span id=__span-33-24><a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         703  0x80000003 0x9055
</span><span id=__span-33-25><a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         809  0x80000003 0x855f
</span><span id=__span-33-26><a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         1074 0x80000003 0x5a24
</span><span id=__span-33-27><a id=__codelineno-33-27 name=__codelineno-33-27 href=#__codelineno-33-27></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         1275 0x80000003 0x4438
</span><span id=__span-33-28><a id=__codelineno-33-28 name=__codelineno-33-28 href=#__codelineno-33-28></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         779  0x80000003 0x4e2f
</span><span id=__span-33-29><a id=__codelineno-33-29 name=__codelineno-33-29 href=#__codelineno-33-29></a>Summary 0.0.0.1         192.168.3.0     1.1.1.1         691  0x80000003 0x5039
</span><span id=__span-33-30><a id=__codelineno-33-30 name=__codelineno-33-30 href=#__codelineno-33-30></a>AS Ext  n/a             192.168.5.1     5.5.5.5         843  0x80000001 0x63ea
</span><span id=__span-33-31><a id=__codelineno-33-31 name=__codelineno-33-31 href=#__codelineno-33-31></a>AS Ext  n/a             192.168.5.2     5.5.5.5         843  0x80000001 0x59f3
</span><span id=__span-33-32><a id=__codelineno-33-32 name=__codelineno-33-32 href=#__codelineno-33-32></a>AS Ext  n/a             192.168.5.3     5.5.5.5         843  0x80000001 0x4ffc
</span><span id=__span-33-33><a id=__codelineno-33-33 name=__codelineno-33-33 href=#__codelineno-33-33></a>-------------------------------------------------------------------------------
</span><span id=__span-33-34><a id=__codelineno-33-34 name=__codelineno-33-34 href=#__codelineno-33-34></a>No. of LSAs: 25
</span><span id=__span-33-35><a id=__codelineno-33-35 name=__codelineno-33-35 href=#__codelineno-33-35></a>===============================================================================
</span></code></pre></div> <p>R3:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>A:R3# show router ospf database
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>===============================================================================
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>===============================================================================
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>-------------------------------------------------------------------------------
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>Router  0.0.0.0         1.1.1.1         1.1.1.1         683  0x80000006 0x5acc
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>Router  0.0.0.0         2.2.2.2         2.2.2.2         1016 0x80000006 0xaf65
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>Router  0.0.0.0         3.3.3.3         3.3.3.3         1148 0x80000009 0x1a6b
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>Router  0.0.0.0         4.4.4.4         4.4.4.4         1159 0x80000006 0xa54c
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>Summary 0.0.0.0         5.5.5.5         1.1.1.1         591  0x80000003 0x4e90
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>Summary 0.0.0.0         10.1.5.0        1.1.1.1         499  0x80000003 0x6f73
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>Summary 0.0.0.0         6.6.6.6         2.2.2.2         217  0x80000003 0x2d4
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>Summary 0.0.0.0         10.2.6.0        2.2.2.2         193  0x80000003 0x3aa2
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>AS Summ 0.0.0.0         5.5.5.5         1.1.1.1         1434 0x80000001 0x449b
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>AS Ext  n/a             192.168.5.1     5.5.5.5         870  0x80000001 0x63ea
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>AS Ext  n/a             192.168.5.2     5.5.5.5         870  0x80000001 0x59f3
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>AS Ext  n/a             192.168.5.3     5.5.5.5         870  0x80000001 0x4ffc
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a>-------------------------------------------------------------------------------
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>No. of LSAs: 12
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a>===============================================================================
</span></code></pre></div> <p>R6:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>A:R6# show router ospf database
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>===============================================================================
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>===============================================================================
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>-------------------------------------------------------------------------------
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>Router  0.0.0.2         2.2.2.2         2.2.2.2         432  0x80000004 0x76b3
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>Router  0.0.0.2         6.6.6.6         6.6.6.6         1309 0x80000006 0xf9f2
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>Summary 0.0.0.2         1.1.1.1         2.2.2.2         535  0x80000003 0xe802
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>Summary 0.0.0.2         2.2.2.2         2.2.2.2         1098 0x80000004 0xcc7d
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>Summary 0.0.0.2         3.3.3.3         2.2.2.2         524  0x80000003 0x7806
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>Summary 0.0.0.2         4.4.4.4         2.2.2.2         1427 0x80000003 0x5e80
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a>Summary 0.0.0.2         5.5.5.5         2.2.2.2         471  0x80000003 0x1c5a
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>Summary 0.0.0.2         10.1.2.0        2.2.2.2         661  0x80000003 0x726f
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a>Summary 0.0.0.2         10.1.3.0        2.2.2.2         85   0x80000003 0x5329
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a>Summary 0.0.0.2         10.1.5.0        2.2.2.2         200  0x80000003 0x3d3d
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a>Summary 0.0.0.2         10.2.4.0        2.2.2.2         58   0x80000003 0x508e
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a>Summary 0.0.0.2         10.3.4.0        2.2.2.2         549  0x80000003 0x3049
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a>AS Summ 0.0.0.2         5.5.5.5         2.2.2.2         1460 0x80000001 0x1265
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a>AS Ext  n/a             192.168.5.1     5.5.5.5         899  0x80000001 0x63ea
</span><span id=__span-35-22><a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a>AS Ext  n/a             192.168.5.2     5.5.5.5         899  0x80000001 0x59f3
</span><span id=__span-35-23><a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>AS Ext  n/a             192.168.5.3     5.5.5.5         899  0x80000001 0x4ffc
</span><span id=__span-35-24><a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a>-------------------------------------------------------------------------------
</span><span id=__span-35-25><a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a>No. of LSAs: 16
</span><span id=__span-35-26><a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a>===============================================================================
</span><span id=__span-35-27><a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a>
</span><span id=__span-35-28><a id=__codelineno-35-28 name=__codelineno-35-28 href=#__codelineno-35-28></a>
</span><span id=__span-35-29><a id=__codelineno-35-29 name=__codelineno-35-29 href=#__codelineno-35-29></a>A:R6# show router route-table 192.168.5.0/24 longer
</span><span id=__span-35-30><a id=__codelineno-35-30 name=__codelineno-35-30 href=#__codelineno-35-30></a>
</span><span id=__span-35-31><a id=__codelineno-35-31 name=__codelineno-35-31 href=#__codelineno-35-31></a>===============================================================================
</span><span id=__span-35-32><a id=__codelineno-35-32 name=__codelineno-35-32 href=#__codelineno-35-32></a>Route Table (Router: Base)
</span><span id=__span-35-33><a id=__codelineno-35-33 name=__codelineno-35-33 href=#__codelineno-35-33></a>===============================================================================
</span><span id=__span-35-34><a id=__codelineno-35-34 name=__codelineno-35-34 href=#__codelineno-35-34></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-35-35><a id=__codelineno-35-35 name=__codelineno-35-35 href=#__codelineno-35-35></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-35-36><a id=__codelineno-35-36 name=__codelineno-35-36 href=#__codelineno-35-36></a>-------------------------------------------------------------------------------
</span><span id=__span-35-37><a id=__codelineno-35-37 name=__codelineno-35-37 href=#__codelineno-35-37></a>192.168.5.1/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-35-38><a id=__codelineno-35-38 name=__codelineno-35-38 href=#__codelineno-35-38></a>       10.2.6.2                                                     1
</span><span id=__span-35-39><a id=__codelineno-35-39 name=__codelineno-35-39 href=#__codelineno-35-39></a>192.168.5.2/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-35-40><a id=__codelineno-35-40 name=__codelineno-35-40 href=#__codelineno-35-40></a>       10.2.6.2                                                     1
</span><span id=__span-35-41><a id=__codelineno-35-41 name=__codelineno-35-41 href=#__codelineno-35-41></a>192.168.5.3/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-35-42><a id=__codelineno-35-42 name=__codelineno-35-42 href=#__codelineno-35-42></a>       10.2.6.2                                                     1
</span><span id=__span-35-43><a id=__codelineno-35-43 name=__codelineno-35-43 href=#__codelineno-35-43></a>-------------------------------------------------------------------------------
</span><span id=__span-35-44><a id=__codelineno-35-44 name=__codelineno-35-44 href=#__codelineno-35-44></a>No. of Routes: 3
</span></code></pre></div> <h2 id=ospf-stub-area>OSPF Stub Area<a class=headerlink href=#ospf-stub-area title="Permanent link">#</a></h2> <p>OSPF Stub Areas help to optimize LSDB and routing tables of the routers. We will configure <strong>Area 2</strong> as a stub area and this will tell ABR (R2) to not distribute any <em>External</em> routes and send a default route into Area 2 instead. To configure Area 2 as stub you need to configure <strong>all OSPF routers inside this area</strong>:</p> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/6504/21639405.11b/0_83cbb_ffa2879e_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/6504/21639405.11b/0_83cbb_ffa2879e_orig.png></a></p> <div class="language-dockerfile highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c># on R2 (ABR)</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>A:R2#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>A:R2&gt;config&gt;router&gt;ospf#<span class=w> </span>area<span class=w> </span><span class=m>2</span><span class=w> </span>stub
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=c># on R6 (Area 2 router)</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>A:R6#<span class=w> </span>configure<span class=w> </span>router<span class=w> </span>ospf<span class=w> </span>area<span class=w> </span><span class=m>2</span><span class=w> </span>stub
</span></code></pre></div> <p>The following "before/after" comparison shows that <strong>after</strong> configuring Area 2's routers as <em>stub</em>, R6 router no longer receives <em>ASBR Summary LSA</em> and <em>AS External LSA</em> nor it has routes 192.168.5.1-3/32. Instead it has a new <em>Summary LSA</em> from the ABR with the <em>Link State ID</em> 0.0.0.0 which means <strong>default route</strong>.</p> <p>R6 before stub area configuration:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>A:R6# show router ospf database
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>===============================================================================
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>===============================================================================
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>-------------------------------------------------------------------------------
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>Router  0.0.0.2         2.2.2.2         2.2.2.2         432  0x80000004 0x76b3
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>Router  0.0.0.2         6.6.6.6         6.6.6.6         1309 0x80000006 0xf9f2
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>Summary 0.0.0.2         1.1.1.1         2.2.2.2         535  0x80000003 0xe802
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>Summary 0.0.0.2         2.2.2.2         2.2.2.2         1098 0x80000004 0xcc7d
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>Summary 0.0.0.2         3.3.3.3         2.2.2.2         524  0x80000003 0x7806
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>Summary 0.0.0.2         4.4.4.4         2.2.2.2         1427 0x80000003 0x5e80
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>Summary 0.0.0.2         5.5.5.5         2.2.2.2         471  0x80000003 0x1c5a
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>Summary 0.0.0.2         10.1.2.0        2.2.2.2         661  0x80000003 0x726f
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a>Summary 0.0.0.2         10.1.3.0        2.2.2.2         85   0x80000003 0x5329
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>Summary 0.0.0.2         10.1.5.0        2.2.2.2         200  0x80000003 0x3d3d
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>Summary 0.0.0.2         10.2.4.0        2.2.2.2         58   0x80000003 0x508e
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>Summary 0.0.0.2         10.3.4.0        2.2.2.2         549  0x80000003 0x3049
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>AS Summ 0.0.0.2         5.5.5.5         2.2.2.2         1460 0x80000001 0x1265
</span><span id=__span-37-21><a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>AS Ext  n/a             192.168.5.1     5.5.5.5         899  0x80000001 0x63ea
</span><span id=__span-37-22><a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>AS Ext  n/a             192.168.5.2     5.5.5.5         899  0x80000001 0x59f3
</span><span id=__span-37-23><a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a>AS Ext  n/a             192.168.5.3     5.5.5.5         899  0x80000001 0x4ffc
</span><span id=__span-37-24><a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>-------------------------------------------------------------------------------
</span><span id=__span-37-25><a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a>No. of LSAs: 16
</span><span id=__span-37-26><a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a>===============================================================================
</span><span id=__span-37-27><a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a>
</span><span id=__span-37-28><a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a>
</span><span id=__span-37-29><a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a>
</span><span id=__span-37-30><a id=__codelineno-37-30 name=__codelineno-37-30 href=#__codelineno-37-30></a>A:R6# show router route-table 192.168.5.0/24 longer
</span><span id=__span-37-31><a id=__codelineno-37-31 name=__codelineno-37-31 href=#__codelineno-37-31></a>
</span><span id=__span-37-32><a id=__codelineno-37-32 name=__codelineno-37-32 href=#__codelineno-37-32></a>===============================================================================
</span><span id=__span-37-33><a id=__codelineno-37-33 name=__codelineno-37-33 href=#__codelineno-37-33></a>Route Table (Router: Base)
</span><span id=__span-37-34><a id=__codelineno-37-34 name=__codelineno-37-34 href=#__codelineno-37-34></a>===============================================================================
</span><span id=__span-37-35><a id=__codelineno-37-35 name=__codelineno-37-35 href=#__codelineno-37-35></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-37-36><a id=__codelineno-37-36 name=__codelineno-37-36 href=#__codelineno-37-36></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-37-37><a id=__codelineno-37-37 name=__codelineno-37-37 href=#__codelineno-37-37></a>-------------------------------------------------------------------------------
</span><span id=__span-37-38><a id=__codelineno-37-38 name=__codelineno-37-38 href=#__codelineno-37-38></a>192.168.5.1/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-37-39><a id=__codelineno-37-39 name=__codelineno-37-39 href=#__codelineno-37-39></a>       10.2.6.2                                                     1
</span><span id=__span-37-40><a id=__codelineno-37-40 name=__codelineno-37-40 href=#__codelineno-37-40></a>192.168.5.2/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-37-41><a id=__codelineno-37-41 name=__codelineno-37-41 href=#__codelineno-37-41></a>       10.2.6.2                                                     1
</span><span id=__span-37-42><a id=__codelineno-37-42 name=__codelineno-37-42 href=#__codelineno-37-42></a>192.168.5.3/32                                Remote  OSPF      00h28m27s  150
</span><span id=__span-37-43><a id=__codelineno-37-43 name=__codelineno-37-43 href=#__codelineno-37-43></a>       10.2.6.2                                                     1
</span><span id=__span-37-44><a id=__codelineno-37-44 name=__codelineno-37-44 href=#__codelineno-37-44></a>-------------------------------------------------------------------------------
</span><span id=__span-37-45><a id=__codelineno-37-45 name=__codelineno-37-45 href=#__codelineno-37-45></a>No. of Routes: 3
</span></code></pre></div> <p>R6 after stub area configuration:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>*A:R6# show router ospf database
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>===============================================================================
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>===============================================================================
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>-------------------------------------------------------------------------------
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a>Router  0.0.0.2         2.2.2.2         2.2.2.2         199  0x80000002 0xecdf
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>Router  0.0.0.2         6.6.6.6         6.6.6.6         0    0x80000002 0x20d2
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>Summary 0.0.0.2         0.0.0.0         2.2.2.2         5    0x80000004 0x5102
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>Summary 0.0.0.2         1.1.1.1         2.2.2.2         199  0x80000002 0x9e4
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>Summary 0.0.0.2         2.2.2.2         2.2.2.2         199  0x80000002 0xee5f
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>Summary 0.0.0.2         3.3.3.3         2.2.2.2         199  0x80000002 0x98e8
</span><span id=__span-38-14><a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a>Summary 0.0.0.2         4.4.4.4         2.2.2.2         199  0x80000002 0x7e63
</span><span id=__span-38-15><a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>Summary 0.0.0.2         5.5.5.5         2.2.2.2         199  0x80000002 0x3c3d
</span><span id=__span-38-16><a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>Summary 0.0.0.2         10.1.2.0        2.2.2.2         199  0x80000002 0x9252
</span><span id=__span-38-17><a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>Summary 0.0.0.2         10.1.3.0        2.2.2.2         199  0x80000002 0x730c
</span><span id=__span-38-18><a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>Summary 0.0.0.2         10.1.5.0        2.2.2.2         199  0x80000002 0x5d20
</span><span id=__span-38-19><a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>Summary 0.0.0.2         10.2.4.0        2.2.2.2         199  0x80000002 0x7071
</span><span id=__span-38-20><a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a>Summary 0.0.0.2         10.3.4.0        2.2.2.2         199  0x80000002 0x502c
</span><span id=__span-38-21><a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a>-------------------------------------------------------------------------------
</span><span id=__span-38-22><a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>No. of LSAs: 13
</span><span id=__span-38-23><a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a>===============================================================================
</span><span id=__span-38-24><a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a>
</span><span id=__span-38-25><a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>
</span><span id=__span-38-26><a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a>*A:R6# show router route-table
</span><span id=__span-38-27><a id=__codelineno-38-27 name=__codelineno-38-27 href=#__codelineno-38-27></a>
</span><span id=__span-38-28><a id=__codelineno-38-28 name=__codelineno-38-28 href=#__codelineno-38-28></a>===============================================================================
</span><span id=__span-38-29><a id=__codelineno-38-29 name=__codelineno-38-29 href=#__codelineno-38-29></a>Route Table (Router: Base)
</span><span id=__span-38-30><a id=__codelineno-38-30 name=__codelineno-38-30 href=#__codelineno-38-30></a>===============================================================================
</span><span id=__span-38-31><a id=__codelineno-38-31 name=__codelineno-38-31 href=#__codelineno-38-31></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-38-32><a id=__codelineno-38-32 name=__codelineno-38-32 href=#__codelineno-38-32></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-38-33><a id=__codelineno-38-33 name=__codelineno-38-33 href=#__codelineno-38-33></a>-------------------------------------------------------------------------------
</span><span id=__span-38-34><a id=__codelineno-38-34 name=__codelineno-38-34 href=#__codelineno-38-34></a>0.0.0.0/0                                     Remote  OSPF      00h00m44s  10
</span><span id=__span-38-35><a id=__codelineno-38-35 name=__codelineno-38-35 href=#__codelineno-38-35></a>       10.2.6.2                                                     101
</span><span id=__span-38-36><a id=__codelineno-38-36 name=__codelineno-38-36 href=#__codelineno-38-36></a>1.1.1.1/32                                    Remote  OSPF      00h00m44s  10
</span><span id=__span-38-37><a id=__codelineno-38-37 name=__codelineno-38-37 href=#__codelineno-38-37></a>       10.2.6.2                                                     200
</span><span id=__span-38-38><a id=__codelineno-38-38 name=__codelineno-38-38 href=#__codelineno-38-38></a>2.2.2.2/32                                    Remote  OSPF      00h00m44s  10
</span><span id=__span-38-39><a id=__codelineno-38-39 name=__codelineno-38-39 href=#__codelineno-38-39></a>       10.2.6.2                                                     100
</span><span id=__span-38-40><a id=__codelineno-38-40 name=__codelineno-38-40 href=#__codelineno-38-40></a>3.3.3.3/32                                    Remote  OSPF      00h00m44s  10
</span><span id=__span-38-41><a id=__codelineno-38-41 name=__codelineno-38-41 href=#__codelineno-38-41></a>       10.2.6.2                                                     300
</span><span id=__span-38-42><a id=__codelineno-38-42 name=__codelineno-38-42 href=#__codelineno-38-42></a>4.4.4.4/32                                    Remote  OSPF      00h00m44s  10
</span><span id=__span-38-43><a id=__codelineno-38-43 name=__codelineno-38-43 href=#__codelineno-38-43></a>       10.2.6.2                                                     200
</span><span id=__span-38-44><a id=__codelineno-38-44 name=__codelineno-38-44 href=#__codelineno-38-44></a>5.5.5.5/32                                    Remote  OSPF      00h00m44s  10
</span><span id=__span-38-45><a id=__codelineno-38-45 name=__codelineno-38-45 href=#__codelineno-38-45></a>       10.2.6.2                                                     300
</span><span id=__span-38-46><a id=__codelineno-38-46 name=__codelineno-38-46 href=#__codelineno-38-46></a>6.6.6.6/32                                    Local   Local     01h39m00s  0
</span><span id=__span-38-47><a id=__codelineno-38-47 name=__codelineno-38-47 href=#__codelineno-38-47></a>       system                                                       0
</span><span id=__span-38-48><a id=__codelineno-38-48 name=__codelineno-38-48 href=#__codelineno-38-48></a>10.1.2.0/24                                   Remote  OSPF      00h00m44s  10
</span><span id=__span-38-49><a id=__codelineno-38-49 name=__codelineno-38-49 href=#__codelineno-38-49></a>       10.2.6.2                                                     200
</span><span id=__span-38-50><a id=__codelineno-38-50 name=__codelineno-38-50 href=#__codelineno-38-50></a>10.1.3.0/24                                   Remote  OSPF      00h00m45s  10
</span><span id=__span-38-51><a id=__codelineno-38-51 name=__codelineno-38-51 href=#__codelineno-38-51></a>       10.2.6.2                                                     300
</span><span id=__span-38-52><a id=__codelineno-38-52 name=__codelineno-38-52 href=#__codelineno-38-52></a>10.1.5.0/24                                   Remote  OSPF      00h00m45s  10
</span><span id=__span-38-53><a id=__codelineno-38-53 name=__codelineno-38-53 href=#__codelineno-38-53></a>       10.2.6.2                                                     300
</span><span id=__span-38-54><a id=__codelineno-38-54 name=__codelineno-38-54 href=#__codelineno-38-54></a>10.2.4.0/24                                   Remote  OSPF      00h00m45s  10
</span><span id=__span-38-55><a id=__codelineno-38-55 name=__codelineno-38-55 href=#__codelineno-38-55></a>       10.2.6.2                                                     200
</span><span id=__span-38-56><a id=__codelineno-38-56 name=__codelineno-38-56 href=#__codelineno-38-56></a>10.2.6.0/24                                   Local   Local     01h38m38s  0
</span><span id=__span-38-57><a id=__codelineno-38-57 name=__codelineno-38-57 href=#__codelineno-38-57></a>       toR2                                                         0
</span><span id=__span-38-58><a id=__codelineno-38-58 name=__codelineno-38-58 href=#__codelineno-38-58></a>10.3.4.0/24                                   Remote  OSPF      00h00m45s  10
</span><span id=__span-38-59><a id=__codelineno-38-59 name=__codelineno-38-59 href=#__codelineno-38-59></a>       10.2.6.2                                                     300
</span><span id=__span-38-60><a id=__codelineno-38-60 name=__codelineno-38-60 href=#__codelineno-38-60></a>-------------------------------------------------------------------------------
</span><span id=__span-38-61><a id=__codelineno-38-61 name=__codelineno-38-61 href=#__codelineno-38-61></a>No. of Routes: 13
</span></code></pre></div> <h2 id=ospf-totally-stub-area>OSPF Totally Stub Area<a class=headerlink href=#ospf-totally-stub-area title="Permanent link">#</a></h2> <p><a href=http://img-fotki.yandex.ru/get/6847/21639405.11b/0_83cbd_8d766fa0_orig.png><img class=aligncenter src=http://img-fotki.yandex.ru/get/6847/21639405.11b/0_83cbd_8d766fa0_XL.png alt width=800 height=427></a></p> <p>ABR router participating in a <em>Totally stub</em> area blocks not only <em>Type 4 ASBR Summary</em> and <em>Type 5 AS External LSA</em> but also <em>Type 3 Summary LSA</em>. This drastically reduces LSDB and route tables on Area 2 routers. As of this moment we have Area 2 configured as s_tub_area, lets configure it to be_totally stub_. To make Area 2_totally stub_ we need to configure ABR (R2) with keyword <code>no summaries</code> option:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>*A:R2# configure router ospf area 2 stub no summaries&lt;/pre&gt;
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>Take a look at R6&#39;s LSDB and route table
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>```*A:R6# show router ospf database
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>===============================================================================
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>===============================================================================
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>-------------------------------------------------------------------------------
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>Router  0.0.0.2         2.2.2.2         2.2.2.2         482  0x80000004 0x9497
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>Router  0.0.0.2         6.6.6.6         6.6.6.6         518  0x80000004 0x1cd4
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>Summary 0.0.0.2         0.0.0.0         2.2.2.2         222  0x80000007 0x4b05
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a>-------------------------------------------------------------------------------
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>No. of LSAs: 3
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a>===============================================================================
</span><span id=__span-39-18><a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a>
</span><span id=__span-39-19><a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a>
</span><span id=__span-39-20><a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a>
</span><span id=__span-39-21><a id=__codelineno-39-21 name=__codelineno-39-21 href=#__codelineno-39-21></a>
</span><span id=__span-39-22><a id=__codelineno-39-22 name=__codelineno-39-22 href=#__codelineno-39-22></a>*A:R6# show router route-table
</span><span id=__span-39-23><a id=__codelineno-39-23 name=__codelineno-39-23 href=#__codelineno-39-23></a>
</span><span id=__span-39-24><a id=__codelineno-39-24 name=__codelineno-39-24 href=#__codelineno-39-24></a>===============================================================================
</span><span id=__span-39-25><a id=__codelineno-39-25 name=__codelineno-39-25 href=#__codelineno-39-25></a>Route Table (Router: Base)
</span><span id=__span-39-26><a id=__codelineno-39-26 name=__codelineno-39-26 href=#__codelineno-39-26></a>===============================================================================
</span><span id=__span-39-27><a id=__codelineno-39-27 name=__codelineno-39-27 href=#__codelineno-39-27></a>Dest Prefix[Flags]                            Type    Proto     Age        Pref
</span><span id=__span-39-28><a id=__codelineno-39-28 name=__codelineno-39-28 href=#__codelineno-39-28></a>      Next Hop[Interface Name]                                    Metric
</span><span id=__span-39-29><a id=__codelineno-39-29 name=__codelineno-39-29 href=#__codelineno-39-29></a>-------------------------------------------------------------------------------
</span><span id=__span-39-30><a id=__codelineno-39-30 name=__codelineno-39-30 href=#__codelineno-39-30></a>0.0.0.0/0                                     Remote  OSPF      00h02m16s  10
</span><span id=__span-39-31><a id=__codelineno-39-31 name=__codelineno-39-31 href=#__codelineno-39-31></a>       10.2.6.2                                                     101
</span><span id=__span-39-32><a id=__codelineno-39-32 name=__codelineno-39-32 href=#__codelineno-39-32></a>6.6.6.6/32                                    Local   Local     02h11m29s  0
</span><span id=__span-39-33><a id=__codelineno-39-33 name=__codelineno-39-33 href=#__codelineno-39-33></a>       system                                                       0
</span><span id=__span-39-34><a id=__codelineno-39-34 name=__codelineno-39-34 href=#__codelineno-39-34></a>10.2.6.0/24                                   Local   Local     02h11m07s  0
</span><span id=__span-39-35><a id=__codelineno-39-35 name=__codelineno-39-35 href=#__codelineno-39-35></a>       toR2                                                         0
</span><span id=__span-39-36><a id=__codelineno-39-36 name=__codelineno-39-36 href=#__codelineno-39-36></a>-------------------------------------------------------------------------------
</span><span id=__span-39-37><a id=__codelineno-39-37 name=__codelineno-39-37 href=#__codelineno-39-37></a>No. of Routes: 3
</span></code></pre></div> <p>Now Area 2 router R6 has only 3 LSAs in its LSDB. All <em>Type 3 Summary LSA</em> for networks inside Area 0 were substituted by <em>Summary default route</em> from ABR (R2).</p> <h2 id=not-so-stubby-area-nssa>Not So Stubby Area (NSSA)<a class=headerlink href=#not-so-stubby-area-nssa title="Permanent link">#</a></h2> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/3114/21639405.11b/0_83cbf_2795355_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/3114/21639405.11b/0_83cbf_2795355_orig.png></a> <small>There is a typo on the pic. No type4 lsa will be advertised in Area0 by R1. Only Type5</small></p> <p>Not so stubby areas are basically stub areas with an ASBR inside it. It inherits the same rule of blocking Type 4 and Type 5 LSA. But, in order to distribute external routes from ASBR another LSA this area leverages <em>Type 7</em> LSA.</p> <p>We will configure Area 1 to be NSSA by adding the following commands to R1 (ABR):</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a># prior to configuring NSSA on R5 lets check that we have active neighbor - R1
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>A:R5# show router ospf neighbor
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>===============================================================================
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>OSPFv2 (0) all neighbors
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>===============================================================================
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>   Area-Id
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>-------------------------------------------------------------------------------
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>toR1                             1.1.1.1         Full       1    0       35
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>   0.0.0.1
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>-------------------------------------------------------------------------------
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>No. of Neighbors: 1
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>===============================================================================
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>#configuring Area 1 on R5 to NSSA state
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>A:R5# configure router ospf area 1 nssa
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a># Re-check neighbor status
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>
</span><span id=__span-40-24><a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>*A:R5# show router ospf neighbor
</span><span id=__span-40-25><a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a>
</span><span id=__span-40-26><a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>===============================================================================
</span><span id=__span-40-27><a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>OSPFv2 (0) all neighbors
</span><span id=__span-40-28><a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a>===============================================================================
</span><span id=__span-40-29><a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-40-30><a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>   Area-Id
</span><span id=__span-40-31><a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a>-------------------------------------------------------------------------------
</span><span id=__span-40-32><a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a>-------------------------------------------------------------------------------
</span><span id=__span-40-33><a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a>No. of Neighbors: 0
</span><span id=__span-40-34><a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a>===============================================================================
</span></code></pre></div> <p>As soon we configured Area 1 on R5 to be NSSA we lost R1 as neighbor. This is the effect of a mismatched <em>Area</em> type in OSPF <em>Hello</em> messages between the two routers. Recall that R1 is maintaining Area 1 as a basic area, and Area 1 on R5 was reconfigured to NSSA.</p> <p>We will fix neighboring by moving R1's Area 1 to NSSA operation as well:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a>A:R1# configure router ospf area 1 nssa
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a># Now check neighboring one more time
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>*A:R1# show router ospf neighbor &quot;toR5&quot;
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>===============================================================================
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>OSPFv2 (0) neighbors for interface &quot;toR5&quot;
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>===============================================================================
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>   Area-Id
</span><span id=__span-41-13><a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>-------------------------------------------------------------------------------
</span><span id=__span-41-14><a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>toR5                             5.5.5.5         Full       1    0       33
</span><span id=__span-41-15><a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>   0.0.0.1
</span><span id=__span-41-16><a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>-------------------------------------------------------------------------------
</span><span id=__span-41-17><a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a>No. of Neighbors: 1
</span></code></pre></div> <p>Now when R1 and R5 are neighbors again lets see what has changed in their LSDBs:</p> <p>R5 LSDB prior to NSSA config:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a>A:R5# show router ospf database
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>===============================================================================
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>===============================================================================
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a>-------------------------------------------------------------------------------
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1911 0x80000004 0x50ea
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         1690 0x80000006 0x4bb4
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         2160 0x80000004 0x1939
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         2145 0x80000003 0xd812
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         1697 0x80000003 0xaa3c
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         669  0x80000004 0x6617
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         1529 0x80000003 0xc6a
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         997  0x80000003 0x9055
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         142  0x80000004 0x8360
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         1824 0x80000003 0x5a24
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         2092 0x80000003 0x4438
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         459  0x80000004 0x4c30
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a>Summary 0.0.0.1         192.168.3.0     1.1.1.1         1824 0x80000003 0x5039
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a>AS Ext  n/a             192.168.5.1     5.5.5.5         1369 0x80000003 0x5fec
</span><span id=__span-42-22><a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a>AS Ext  n/a             192.168.5.2     5.5.5.5         1491 0x80000003 0x55f5
</span><span id=__span-42-23><a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a>AS Ext  n/a             192.168.5.3     5.5.5.5         934  0x80000003 0x4bfe
</span><span id=__span-42-24><a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a>-------------------------------------------------------------------------------
</span><span id=__span-42-25><a id=__codelineno-42-25 name=__codelineno-42-25 href=#__codelineno-42-25></a>No. of LSAs: 16
</span><span id=__span-42-26><a id=__codelineno-42-26 name=__codelineno-42-26 href=#__codelineno-42-26></a>===============================================================================
</span></code></pre></div> <p>R5 LSDB after NSSA config:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a>*A:R5# show router ospf database
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>===============================================================================
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>===============================================================================
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>-------------------------------------------------------------------------------
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         539  0x80000002 0xa884
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         538  0x80000004 0x6d96
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>Summary 0.0.0.1         1.1.1.1         1.1.1.1         538  0x80000002 0x3b1b
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>Summary 0.0.0.1         2.2.2.2         1.1.1.1         538  0x80000002 0xf8f4
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>Summary 0.0.0.1         3.3.3.3         1.1.1.1         538  0x80000002 0xca1f
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a>Summary 0.0.0.1         4.4.4.4         1.1.1.1         538  0x80000002 0x88f8
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a>Summary 0.0.0.1         6.6.6.6         1.1.1.1         538  0x80000002 0x2c4d
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a>Summary 0.0.0.1         10.1.2.0        1.1.1.1         538  0x80000002 0xb038
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a>Summary 0.0.0.1         10.1.3.0        1.1.1.1         538  0x80000002 0xa542
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a>Summary 0.0.0.1         10.2.4.0        1.1.1.1         538  0x80000002 0x7a07
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a>Summary 0.0.0.1         10.2.6.0        1.1.1.1         538  0x80000002 0x641b
</span><span id=__span-43-19><a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a>Summary 0.0.0.1         10.3.4.0        1.1.1.1         538  0x80000002 0x6e12
</span><span id=__span-43-20><a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a>Summary 0.0.0.1         192.168.3.0     1.1.1.1         538  0x80000002 0x701c
</span><span id=__span-43-21><a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a>NSSA    0.0.0.1         192.168.5.1     5.5.5.5         577  0x80000001 0xe74a
</span><span id=__span-43-22><a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a>NSSA    0.0.0.1         192.168.5.2     5.5.5.5         577  0x80000001 0xdd53
</span><span id=__span-43-23><a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a>NSSA    0.0.0.1         192.168.5.3     5.5.5.5         577  0x80000001 0xd35c
</span><span id=__span-43-24><a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a>-------------------------------------------------------------------------------
</span><span id=__span-43-25><a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a>No. of LSAs: 16
</span><span id=__span-43-26><a id=__codelineno-43-26 name=__codelineno-43-26 href=#__codelineno-43-26></a>===============================================================================
</span></code></pre></div> <p>As we see, all <em>Type 5 AS External LSA</em> were substituted by <em>Type 7 NSSA LSA</em>. And if we had any other external routes we wouldn't see them in R5 database, since NSSA areas can not contain External routes.</p> <h2 id=totally-nssa>Totally NSSA<a class=headerlink href=#totally-nssa title="Permanent link">#</a></h2> <p><a class=glightbox href=http://img-fotki.yandex.ru/get/6300/21639405.11b/0_83cc0_5d4047c9_orig.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=pic src=http://img-fotki.yandex.ru/get/6300/21639405.11b/0_83cc0_5d4047c9_orig.png></a> <small>There is a typo on the pic. No type4 lsa will be advertised in Area0 by R1. Only Type5</small></p> <p>As with totally stubby areas, NSSA could be configured in a way that no <em>Type 3 Summary LSA</em> will present in such area. Totally NSSA configuration adds two additional commands on ABR:</p> <p>On R1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area# info
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>----------------------------------------------
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>                nssa
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>                exit
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>                interface &quot;toR5&quot;
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>                    interface-type point-to-point
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>                    no shutdown
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>                exit
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>----------------------------------------------
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a># Configuring NSSA to be totally NSSA
</span><span id=__span-44-12><a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area# nssa no summaries&lt;/pre&gt;
</span></code></pre></div> <p>On R5:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a># As a result - no Type 3 Summary LSA are present in R5&#39;s database
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>*A:R5# show router ospf database
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>===============================================================================
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a>===============================================================================
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a>-------------------------------------------------------------------------------
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1305 0x80000003 0xa685
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         1550 0x80000005 0x6b97
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>NSSA    0.0.0.1         192.168.5.1     5.5.5.5         1654 0x80000002 0xe54b
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>NSSA    0.0.0.1         192.168.5.2     5.5.5.5         852  0x80000002 0xdb54
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a>NSSA    0.0.0.1         192.168.5.3     5.5.5.5         816  0x80000002 0xd15d
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a>-------------------------------------------------------------------------------
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a>No. of LSAs: 5
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a>===============================================================================
</span></code></pre></div> <p>ABR configured with <em>Totally NSSA</em> area filters Type 3 LSA as totally stubby area does. But notice one major difference - there is <strong>no default route</strong> injected by ABR. This is the cause of ping failure to any <em>Area 0</em> address:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>*A:R5# ping 4.4.4.4
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>PING 4.4.4.4 56 data bytes
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a>No route to destination. Address: 4.4.4.4, Router: Base
</span></code></pre></div> <p>To resolve this issue you should add another command to NSSA context:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a>*A:R1&gt;config&gt;router&gt;ospf&gt;area# nssa originate-default-route
</span></code></pre></div> <p>This will cause R1 to inject Type 3 Summary LSA in Area 1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a>*A:R5# show router ospf database
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>===============================================================================
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a>OSPFv2 (0) Link State Database (Type : All)
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>===============================================================================
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>Type    Area Id         Link State Id   Adv Rtr Id      Age  Sequence   Cksum
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>-------------------------------------------------------------------------------
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a>Router  0.0.0.1         1.1.1.1         1.1.1.1         1652 0x80000003 0xa685
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a>Router  0.0.0.1         5.5.5.5         5.5.5.5         264  0x80000006 0x6998
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>Summary 0.0.0.1         0.0.0.0         1.1.1.1         53   0x80000001 0x75e4
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>NSSA    0.0.0.1         192.168.5.1     5.5.5.5         172  0x80000003 0xe34c
</span><span id=__span-48-12><a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a>NSSA    0.0.0.1         192.168.5.2     5.5.5.5         1199 0x80000002 0xdb54
</span><span id=__span-48-13><a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>NSSA    0.0.0.1         192.168.5.3     5.5.5.5         1163 0x80000002 0xd15d
</span><span id=__span-48-14><a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a>-------------------------------------------------------------------------------
</span><span id=__span-48-15><a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>No. of LSAs: 6
</span><span id=__span-48-16><a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>===============================================================================
</span><span id=__span-48-17><a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a>
</span><span id=__span-48-18><a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a>
</span><span id=__span-48-19><a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a>*A:R5# ping 4.4.4.4
</span><span id=__span-48-20><a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a>PING 4.4.4.4 56 data bytes
</span><span id=__span-48-21><a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a>64 bytes from 4.4.4.4: icmp_seq=1 ttl=62 time=19.6ms.
</span></code></pre></div> <h2 id=debugging-ospf-adjacency-issues>Debugging OSPF adjacency issues<a class=headerlink href=#debugging-ospf-adjacency-issues title="Permanent link">#</a></h2> <p>For two OSPF routers to become neighbors several parameters should be matched. And most of them - are the parameters communicated via OSPF Hello messages. If you do not see a neighbor on the other side there is a good chance that one of these parameters mismatches.</p> <p>When you need to investigate the reason casing a neighboring relationships to break leverage the debug commands available.</p> <p>Consider the following example where R1 lost its neighbor R5 in Area 1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a>*A:R1# show router ospf neighbor &quot;toR5&quot;
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>===============================================================================
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>OSPFv2 (0) neighbors for interface &quot;toR5&quot;
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>===============================================================================
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>Interface-Name                   Rtr Id          State      Pri  RetxQ   TTL
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>   Area-Id
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a>-------------------------------------------------------------------------------
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>-------------------------------------------------------------------------------
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a>No. of Neighbors: 0
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a>===============================================================================
</span></code></pre></div> <p>To see what is going wrong, lets create a logging instance and capture <em>Hello</em> packets to analyze their content:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a># Creating log #55
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>*A:R1# configure log log-id 55
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a># Configuring capture log messages from debug to memory 
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>*A:R1&gt;config&gt;log&gt;log-id$ from debug-trace
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>*A:R1&gt;config&gt;log&gt;log-id$ to memory
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a># Specifying what &quot;debug&quot; should process. We are hunting OSPF Hello packets
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a># adding &quot;detail&quot; to see more verbose output
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a>*A:R1# debug router ospf packet hello detail
</span></code></pre></div> <p>Now that we have <strong>log</strong> and <strong>debug</strong> objects configured, we could drill down to the contents of Hello messages:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>*A:R1# show log log-id 55
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>===============================================================================
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a>Event Log 55
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a>===============================================================================
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a>Description : (Not Specified)
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a>Memory Log contents  [size=100   next event=22  (not wrapped)]
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a>20 2015/01/01 03:11:31.28 UTC MINOR: DEBUG #2001 Base OSPFv2
</span><span id=__span-51-10><a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a>&quot;OSPFv2: PKT DROPPED
</span><span id=__span-51-11><a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a>hello interval mismatch&quot;
</span><span id=__span-51-12><a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a>
</span><span id=__span-51-13><a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a>19 2015/01/01 03:11:31.28 UTC MINOR: DEBUG #2001 Base OSPFv2
</span><span id=__span-51-14><a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a>&quot;OSPFv2: PKT
</span><span id=__span-51-15><a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a>
</span><span id=__span-51-16><a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a>&gt;&gt; Incoming OSPF packet on I/F toR5 area 0.0.0.1
</span><span id=__span-51-17><a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a>OSPF Version      : 2
</span><span id=__span-51-18><a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a>Router Id         : 5.5.5.5
</span><span id=__span-51-19><a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a>Area Id           : 0.0.0.1
</span><span id=__span-51-20><a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a>Checksum          : ec98
</span><span id=__span-51-21><a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a>Auth Type         : Null
</span><span id=__span-51-22><a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a>Auth Key          : 00 00 00 00 00 00 00 00
</span><span id=__span-51-23><a id=__codelineno-51-23 name=__codelineno-51-23 href=#__codelineno-51-23></a>Packet Type       : HELLO
</span><span id=__span-51-24><a id=__codelineno-51-24 name=__codelineno-51-24 href=#__codelineno-51-24></a>Packet Length     : 44
</span><span id=__span-51-25><a id=__codelineno-51-25 name=__codelineno-51-25 href=#__codelineno-51-25></a>
</span><span id=__span-51-26><a id=__codelineno-51-26 name=__codelineno-51-26 href=#__codelineno-51-26></a>Network Mask      : 255.255.255.0
</span><span id=__span-51-27><a id=__codelineno-51-27 name=__codelineno-51-27 href=#__codelineno-51-27></a>Hello Interval    : 5
</span><span id=__span-51-28><a id=__codelineno-51-28 name=__codelineno-51-28 href=#__codelineno-51-28></a>Options           : 08 -----N----
</span><span id=__span-51-29><a id=__codelineno-51-29 name=__codelineno-51-29 href=#__codelineno-51-29></a>Rtr Priority      : 1
</span><span id=__span-51-30><a id=__codelineno-51-30 name=__codelineno-51-30 href=#__codelineno-51-30></a>Dead Interval     : 40
</span><span id=__span-51-31><a id=__codelineno-51-31 name=__codelineno-51-31 href=#__codelineno-51-31></a>Designated Router : 0.0.0.0
</span><span id=__span-51-32><a id=__codelineno-51-32 name=__codelineno-51-32 href=#__codelineno-51-32></a>Backup Router     : 0.0.0.0
</span></code></pre></div> <p>Now the problem is clear - incoming OSPF packet came in with Hello timer set to 5sec. And R1 tells us that this value mismatches its configured <em>Hello timer</em> value.</p> <p>This debug technique should indicate every discrepancy in OSPF values that should match, be it authentication mismatch or Area ID mismatch.</p> <p>And that is all for the moment.</p> <h2 id=__comments>Comments</h2> <script src=https://giscus.app/client.js data-repo=hellt/netdevops.me data-repo-id="MDEwOlJlcG9zaXRvcnkzNTkzNTc5ODc=" data-category="Show and tell" data-category-id=DIC_kwDOFWteI84CRmVn data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async>
    </script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/hellt target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/ntdvps target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.top", "navigation.instant", "navigation.tabs", "search.suggest", "content.code.annotate", "toc.follow", "content.tooltips", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.1e90e0fb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.2b189340.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>