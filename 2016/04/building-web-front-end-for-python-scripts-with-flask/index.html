<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Building Web front end for Python scripts with Flask |</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content><meta name=twitter:title content="Building Web front end for Python scripts with Flask"><meta name=twitter:description content><meta name=twitter:creator content="@ntdvps"><meta name=Description content="DevOps applied to networking"><meta property="og:title" content="Building Web front end for Python scripts with Flask"><meta property="og:description" content="Recently I revived my relationship with Python in an effort to tackle the routine tasks appearing here and there. So I started to write some pocket scripts and, luckily, was not the only one on this battlefield - my colleagues also have a bunch of useful scripts. With all those code snippets sent in the emails, cloned from the repos, grabbed on the network shares&mldr; I started to wonder how much easier would it be if someone had them all aggregated and presented with a Web UI for a shared access?
Thus, I started to build web front-end to the python scripts we used daily with these goals in mind:

allow people with a zero knowledge of Python to use the scripts by interacting with them through a simple Web UI;
make script&rsquo;s output more readable by leveraging CSS and HTML formatting;
aggregate all the scripts in one a single repo but in a separate sandboxed directories to maintain code manageability.

This short demo should give you some taste of what it is:


  


Disclaimer: I am nowhere near even a professional python or web developer. And what makes it even worse is that I used (a lot) a very dangerous coding paradigm - SDD - Stack Overflow Driven Development. So, hurt me plenty if you see some awful mistakes.
Project source code"><meta property="og:type" content="article"><meta property="og:url" content="https://netdevops.me/2016/04/building-web-front-end-for-python-scripts-with-flask/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-04-01T04:22:27+00:00"><meta property="article:modified_time" content="2021-04-20T09:24:02+02:00"><meta name=application-name content="NetDevOps"><meta name=apple-mobile-web-app-title content="NetDevOps"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://netdevops.me/2016/04/building-web-front-end-for-python-scripts-with-flask/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Building Web front end for Python scripts with Flask","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/netdevops.me\/2016\/04\/building-web-front-end-for-python-scripts-with-flask\/"},"genre":"posts","keywords":"Bootstrap, Flask, Python","wordCount":5850,"url":"https:\/\/netdevops.me\/2016\/04\/building-web-front-end-for-python-scripts-with-flask\/","datePublished":"2016-04-01T04:22:27+00:00","dateModified":"2021-04-20T09:24:02+02:00","description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':''==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:''==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header><div class="desktop header" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class="header-logo logo-svg"><img loading=lazy decoding=async class=logo src=/android-chrome-192x192.png alt=/android-chrome-192x192.png title=/android-chrome-192x192.png></a></div><div class=menu><nav><h2 class=display-hidden>Основная навигация</h2><ul class=menu-inner><li><a class=menu-item href=/posts/>Posts</a></li><li><a class=menu-item href=/about>About me</a></li><li><a class=menu-item href=/tags/>Tags</a></li></ul></nav><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=Search... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-desktop><span class="svg-icon icon-loading"></span></span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="mobile header" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class=header-logo><img loading=lazy decoding=async class=logo src=/android-chrome-192x192.png alt=/android-chrome-192x192.png title=/android-chrome-192x192.png></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=Search... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-mobile><span class="svg-icon icon-loading"></span></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><nav><h2 class=display-hidden>Основная навигация</h2><ul><li><a class=menu-item href=/posts/ title>Posts</a></li><li><a class=menu-item href=/about title>About me</a></li><li><a class=menu-item href=/tags/ title>Tags</a></li></ul></nav><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div></header><main class=main><div class="container content-article theme-classic"><div class=toc id=toc-auto><div class=toc-title>Contents</div><div class="toc-content always-active" id=toc-content-auto></div></div><article><header class=header-post><div class=post-title><div class=post-all-meta><nav class=breadcrumbs><ol><li><a href=/>Home</a></li><li>Building Web front end for Python scripts with Flask</li></ol></nav><h1 class="single-title flipInX">Building Web front end for Python scripts with Flask</h1><div class="post-meta summary-post-meta"><span class="post-meta-date meta-item"><span class="svg-icon icon-clock"></span><time class=timeago datetime=2016-04-01>2016-04-01</time>
</span><span class="post-meta-words meta-item"><span class="svg-icon icon-pencil"></span>5850 words</span>
<span class="post-meta-reading meta-item"><span class="svg-icon icon-stopwatch"></span>28 minutes</span></div></div></div></header><div class="article-post toc-start"><div class="content-block content-block-first content-block-position"><div class="post single"><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#tools--technologies>Tools & Technologies</a><ul><li><a href=#front-end>Front-end</a></li><li><a href=#back-end>Back-end</a></li></ul></li><li><a href=#project-structure-overview>Project structure overview</a></li><li><a href=#configuring-flask>Configuring Flask</a></li><li><a href=#setting-up-front-end>Setting up front-end</a><ul><li><a href=#layout>Layout</a></li></ul></li><li><a href=#flask-routes--templates>Flask routes & templates</a><ul><li><a href=#routes>Routes</a></li><li><a href=#templates>Templates</a></li></ul></li><li><a href=#flask-blueprints>Flask Blueprints</a><ul><li><a href=#blueprint-creation>Blueprint creation</a></li><li><a href=#register-a-blueprint>Register a blueprint</a></li></ul></li><li><a href=#front-end-back-end-data-exchange>Front-end&lt;->back-end data exchange</a><ul><li><a href=#serializing-input-data>Serializing input data</a></li><li><a href=#sending-serialized-data-to-the-back-end>Sending serialized data to the back-end</a></li><li><a href=#receiving-data-by-the-back-end-and-processing>Receiving data by the back-end and processing</a></li><li><a href=#passing-the-results-back-to-the-front-end>Passing the results back to the front-end</a></li></ul></li><li><a href=#adding-new-script-is-easy>Adding new script is easy</a><ul><li><a href=#create-the-file-structure>Create the file structure</a></li><li><a href=#create-html-files>Create HTML files</a></li><li><a href=#create--register-a-blueprint>Create & register a Blueprint</a></li></ul></li><li><a href=#how-to-test-plaza>How to test PLAZA?</a></li><li><a href=#whats-next>What&rsquo;s next?</a></li></ul></nav></div></div><div style="margin:20px 0"><span class=post-update><span class=s>Updated on 2021-04-20</span></span></div><p>Recently I revived my relationship with Python in an effort to tackle the routine tasks appearing here and there. So I started to write some <em>pocket scripts</em> and, luckily, was not the only one on this battlefield - my colleagues also have a bunch of useful scripts. With all those code snippets sent in the emails, cloned from the repos, grabbed on the network shares&mldr; I started to wonder how much easier would it be if someone had them all aggregated and presented with a Web UI for a shared access?</p><p>Thus, I started to build web front-end to the python scripts we used daily with these goals in mind:</p><ul><li>allow people with a zero knowledge of Python to use the scripts by interacting with them through a simple Web UI;</li><li>make script&rsquo;s output more readable by leveraging CSS and HTML formatting;</li><li>aggregate all the scripts in one a single repo but in a separate sandboxed directories to maintain code manageability.</li></ul><p>This short demo should give you some taste of what it is:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/KzOFlFYucvM style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p><strong>Disclaimer:</strong> I am nowhere near even a professional python or web developer. And what makes it even worse is that I used (a lot) a very dangerous coding paradigm - SDD - Stack Overflow Driven Development. So, hurt me plenty if you see some awful mistakes.</p><p><a href=https://github.com/hellt/PLAZA target=_blank rel="noopener noreffer">Project source code</a></p><p><strong>PLAZA</strong> (this is the name I gave this project) implements a straightforward user experience flow: a user opens a web page, selects a script from the menu, fills in the necessary input data and run a script to get the results back.</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88707_2e87ef65_orig.png alt=pic title=0_88707_2e87ef65_orig.png></p><p>By hitting <code>submit</code> data goes to the back-end part, where the chosen python script does it&rsquo;s noble job and produces some data. This data gets pushed back to the browser and as displayed to a user.</p><p>Obviously, one will need some front-end technologies to build the web layer and some back-end to process the incoming data.</p><h2 id=tools--technologies class=headerLink><a href=#tools--technologies class=header-mark></a>Tools & Technologies</h2><h3 id=front-end class=headerLink><a href=#front-end class=header-mark></a>Front-end</h3><p>To build a fairly fresh-looking (<em>fresh</em> as in 2016yr), dynamic web view we need a web framework to leverage. I used <a href=http://getbootstrap.com target=_blank rel="noopener noreffer">Bootstrap</a> package (CSS and JS) as it is well documented and have tons of implementations and examples.</p><p>What tastes good with Bootstrap - <a href=http://jquery.com target=_blank rel="noopener noreffer">JQuery</a>, of course. JQuery was used to handle AJAX response/request messages between the front-end and the back-end without reloading the whole page. Since I had no previous experience with both of these technologies, I heavily used everything google served me. Here is my list of useful resources I found noteworthy:</p><ol><li><a href=http://www.layoutit.com/build# target=_blank rel="noopener noreffer">Layoutit.com</a> - there you can create Bootstrap grid and play with elements in a drag and drop fashion. Load the result in a zip file and your grid system is almost ready.</li><li><a href="http://www.bootply.com/new?visual=1" target=_blank rel="noopener noreffer">Bootply.com</a> - visual builder for Bootstrap layout. It has some good examples which cover basic Bootstrap elements behavior (navbar, grid rules, etc).</li><li><a href=http://1000hz.github.io/bootstrap-validator/ target=_blank rel="noopener noreffer">Form validator by 1000hz</a> - well, it&rsquo;s a form validator. And since every script needs to get input data from a user, form validation is a must-have for a sleek user experience.</li><li><a href=http://bootsnipp.com/ target=_blank rel="noopener noreffer">Bootsnipp.com</a> - crowdsource collection of snippets written with Bootstrap. I grabbed my side menu from it. Another useful section from this site is <a href=http://bootsnipp.com/forms target=_blank rel="noopener noreffer">Form Builder</a>.</li><li><a href=https://formden.com/form-builder/ target=_blank rel="noopener noreffer">Formden</a> - another form builder.</li></ol><h3 id=back-end class=headerLink><a href=#back-end class=header-mark></a>Back-end</h3><p>The heavy lifting in the back is done by the gorgeous <a href=http://flask.pocoo.org/ target=_blank rel="noopener noreffer">Flask</a>, which is a micro framework for writing web applications. It includes a web-server, <a href=http://jinja.pocoo.org/docs/dev/ target=_blank rel="noopener noreffer">Jinja2</a> templating engine and lots of features to make back-end easy even for dummies like me.</p><p>As to the Flask related resources I cherry-picked the following:</p><ol><li><a href=http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world target=_blank rel="noopener noreffer">Famous Flask Mega Tutorial by Miguel Grinberg</a></li><li><a href=https://github.com/realpython/discover-flask target=_blank rel="noopener noreffer">Discover Flask</a> - A full season of youtube videos from Michael Herman</li><li><a href=https://flask.palletsprojects.com/en/1.1.x/quickstart/#quickstart target=_blank rel="noopener noreffer">Official documentation</a> of course!</li><li>Another good post on <a href="http://www.giantflyingsaucer.com/blog/?p=4310" target=_blank rel="noopener noreffer">AJAX+Flask interaction</a> from giantflyingsaucer.com</li></ol><h2 id=project-structure-overview class=headerLink><a href=#project-structure-overview class=header-mark></a>Project structure overview</h2><p>Having frameworks set and tools figured out I started to outline the project&rsquo;s high-level structure.</p><p>Flask maintains a simple yet flexible project structure. In my case, I didn&rsquo;t deviate far away from a basic setup, since the overall simplicity is one of the project&rsquo;s objectives.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>├── app.py        <span class=c1># Flask application</span>
├── config.py     <span class=c1># Flask configuration</span>
├── .env          <span class=c1># env variables for dev/prod environments</span>
├── scripts_bank  <span class=c1># directory to store all python scripts we&#39;re going to use via Web</span>
├── static        <span class=c1># static data for Bootstrap CSS, JS, custom fonts, etc</span>
│   ├── css
│   ├── fonts
│   └── js
├── templates     <span class=c1># HTML templates used to render pages&lt;/pre&gt;</span>
</code></pre></td></tr></table></div></div><p>Although the comments above give enough information about the structure, let&rsquo;s go into details a bit</p><ol><li>Flask application - <code>app.py</code> - is an entry point for the whole project. It starts the web-server, loads the <code>routes</code> (aka links to the pages of your web project) and plugs in python scripts stored in the <code>scripts_bank</code> directory.</li><li>As every other app, Flask app should be configured differently for development and production. This is done via the <code>config.py</code> and the environment variables <code>.env</code> file.</li><li>In the <code>static</code> directory you normally store your CSS, JS, pictures, custom fonts. So did I.</li><li>HTML pages are in the <code>templates</code> directory.</li><li>And the pythonic scripts with all the relevant files (unique HTML templates for input forms, additional front-end Javascript code, etc) are living inside the <code>scripts_bank</code> directory.</li></ol><h2 id=configuring-flask class=headerLink><a href=#configuring-flask class=header-mark></a>Configuring Flask</h2><p>Once you have Flask installed and got familiar with its basics (either through official quick start guide or tons of tutorials) it is time to configure it. There are <a href=https://flask.palletsprojects.com/en/1.1.x/config/ target=_blank rel="noopener noreffer">several</a> <a href=https://exploreflask.com/configuration.html target=_blank rel="noopener noreffer">ways</a> to configure a Flask application. The basic one is to specify the configuration statements as the arguments to your <code>app</code> instance:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=c1>## pass secret_key and SQLAlchemy params</span>
<span class=n>app</span><span class=o>.</span><span class=n>secret_key</span> <span class=o>=</span> <span class=s1>&#39;test&#39;</span>
<span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=n>SQLALCHEMY_DATABASE_URI</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;sqlite:///db/sql.db&#39;</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>debug</span><span class=o>=</span><span class=bp>True</span><span class=p>)</span>     <span class=c1>## pass DEBUG param&lt;/pre&gt;</span>

<span class=n>A</span> <span class=n>bit</span> <span class=n>more</span> <span class=n>advanced</span> <span class=n>way</span> <span class=ow>is</span> <span class=n>to</span> <span class=n>specify</span> <span class=nb>all</span> <span class=n>the</span> <span class=n>config</span> <span class=n>parameters</span> <span class=ow>in</span> <span class=n>uppercase</span> <span class=ow>in</span> <span class=n>your</span> <span class=sb>`app.py`</span> <span class=ow>and</span> <span class=n>tell</span> <span class=n>the</span> <span class=sb>`app`</span> <span class=n>instance</span> <span class=n>to</span> <span class=n>get</span> <span class=n>config</span> <span class=kn>from</span> <span class=nn>this</span> <span class=nn>file</span><span class=p>:</span>

<span class=sb>``</span><span class=err>`</span><span class=n>DEBUG</span> <span class=o>=</span> <span class=bp>True</span>
<span class=n>SECRET_KEY</span> <span class=o>=</span> <span class=s1>&#39;yekterces&#39;</span>
<span class=n>SQLALCHEMY_DATABASE_URI</span> <span class=o>=</span> <span class=s1>&#39;sqlite:///db/sql.db&#39;</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
<span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>from_object</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>   <span class=c1># get config from this module&lt;/pre&gt;</span>
</code></pre></td></tr></table></div></div><p>But the methods discussed so far can&rsquo;t let you have different configurations for Dev and Prod environments (which you&rsquo;d want to have eventually).</p><p>When I was choosing the configuration method for this app I followed a path which consists of these three key points:</p><ol><li>creating configuration classes for different environments using inheritance (explained <a href=https://flask.palletsprojects.com/en/1.1.x/config/#development-production target=_blank rel="noopener noreffer">here</a>)</li><li>choosing the right configuration class based on the current value of the environment variable</li><li>storing environment variables in a file (<code>.env</code>) and parsing its contents for parameters (<a href=https://stackoverflow.com/questions/21538859/pycharm-set-environment-variable-for-run-manage-py-task/29546356#29546356 target=_blank rel="noopener noreffer">more here</a>)</li></ol><blockquote><p><strong>Detailed explanation of Flask app configuration</strong></p></blockquote><blockquote><p>Going from bottom to top, <code>.env</code> is a file, which stores application parameters in a way like classic environment variables do.</p></blockquote><blockquote></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># This file is used to store configuration settings for</span>
<span class=c1># Dev and Prod environments. PLAZA_SETTINGS value is used by app.py to</span>
<span class=c1># properly detect which configuration class to use</span>

<span class=c1># uncomment/modify desired section prior to use</span>

<span class=c1># dev</span>
<span class=nv>PLAZA_SETTINGS</span> <span class=o>=</span> config.Development 

<span class=c1># prod</span>
<span class=c1># PLAZA_SETTINGS = config.Production</span>
<span class=c1># HOST = 0.0.0.0&lt;/pre&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>Then Flask application initializes and gets configuration from a class, stored in <code>PLAZA_SETTINGS</code> variable:</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>render_template</span>
<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>config</span>

<span class=n>root_folder_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=vm>__file__</span><span class=p>))</span>

<span class=c1># get env_settings list</span>
<span class=n>env_settings</span> <span class=o>=</span> <span class=n>config</span><span class=o>.</span><span class=n>EnvironmentSettings</span><span class=p>(</span><span class=n>root_folder_path</span><span class=p>)</span>

<span class=c1># initialize Flask app</span>
<span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=c1># configure Flask app from a class, stored in PLAZA_SETTINGS variable</span>
<span class=n>app</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>from_object</span><span class=p>(</span><span class=n>env_settings</span><span class=p>[</span><span class=s1>&#39;PLAZA_SETTINGS&#39;</span><span class=p>])</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
   <span class=c1># if we are in Prod, use HOST and PORT specified</span>
   <span class=k>try</span><span class=p>:</span>
       <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>env_settings</span><span class=p>[</span><span class=s1>&#39;HOST&#39;</span><span class=p>]),</span> <span class=n>port</span><span class=o>=</span><span class=mi>80</span><span class=p>)</span>
   <span class=k>except</span> <span class=n>config</span><span class=o>.</span><span class=n>ConfigurationError</span><span class=p>:</span>
       <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span><span class=o>&lt;/</span><span class=n>pre</span><span class=o>&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>Functions subject to configuration along with configuration classes are stored in the <code>config.py</code> file:</p></blockquote><blockquote></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>os</span>


<span class=c1># default config class</span>
<span class=k>class</span> <span class=nc>Base</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=n>DEBUG</span> <span class=o>=</span> <span class=bp>False</span>
    <span class=n>SECRET_KEY</span> <span class=o>=</span> <span class=s1>&#39;your_secret&#39;</span>


<span class=k>class</span> <span class=nc>Development</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
    <span class=n>DEBUG</span> <span class=o>=</span> <span class=bp>True</span>


<span class=k>class</span> <span class=nc>Production</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
    <span class=n>DEBUG</span> <span class=o>=</span> <span class=bp>False</span>


<span class=k>class</span> <span class=nc>EnvironmentSettings</span><span class=p>:</span>
    <span class=s2>&#34;&#34;&#34;
</span><span class=s2>    Access to environment variables via system os or .env file for different environments (Prod vs Dev)
</span><span class=s2>    &#34;&#34;&#34;</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root_folder_path</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_folder_path</span> <span class=o>=</span> <span class=n>root_folder_path</span>

    <span class=k>def</span> <span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_env_variable</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>InvalidOperationException</span><span class=p>(</span><span class=s1>&#39;Environment Settings are read-only&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__delitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>InvalidOperationException</span><span class=p>(</span><span class=s1>&#39;Environment Settings are read-only&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>_get_env_variable</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>var_name</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>False</span><span class=p>):</span>
        <span class=s2>&#34;&#34;&#34;
</span><span class=s2>        Get the environment variable or return exception
</span><span class=s2>        :param var_name: Environment Variable to lookup
</span><span class=s2>        &#34;&#34;&#34;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=n>var_name</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=kn>from</span> <span class=nn>io</span> <span class=kn>import</span> <span class=n>StringIO</span>
            <span class=kn>from</span> <span class=nn>configparser</span> <span class=kn>import</span> <span class=n>ConfigParser</span>

            <span class=n>env_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;PROJECT_ENV_FILE&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_folder_path</span> <span class=o>+</span> <span class=s2>&#34;/.env&#34;</span><span class=p>)</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>config</span> <span class=o>=</span> <span class=n>StringIO</span><span class=p>()</span>
                <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;[DATA]</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
                <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=nb>open</span><span class=p>(</span><span class=n>env_file</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
                <span class=n>config</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>SEEK_SET</span><span class=p>)</span>
                <span class=n>cp</span> <span class=o>=</span> <span class=n>ConfigParser</span><span class=p>()</span>
                <span class=n>cp</span><span class=o>.</span><span class=n>read_file</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
                <span class=n>value</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>cp</span><span class=o>.</span><span class=n>items</span><span class=p>(</span><span class=s1>&#39;DATA&#39;</span><span class=p>))[</span><span class=n>var_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()]</span>
                <span class=k>if</span> <span class=n>value</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>&#39;&#34;&#39;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>value</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s1>&#39;&#34;&#39;</span><span class=p>):</span>
                    <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
                <span class=k>elif</span> <span class=n>value</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&#34;&#39;&#34;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>value</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&#34;&#39;&#34;</span><span class=p>):</span>
                    <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
                <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>var_name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
                <span class=k>return</span> <span class=n>value</span>
            <span class=k>except</span> <span class=p>(</span><span class=ne>KeyError</span><span class=p>,</span> <span class=ne>IOError</span><span class=p>):</span>
                <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>False</span><span class=p>:</span>
                    <span class=k>return</span> <span class=n>default</span>
                <span class=n>error_msg</span> <span class=o>=</span> <span class=s2>&#34;Either set the env variable &#39;{var}&#39; or place it in your &#34;</span> \
                            <span class=s2>&#34;{env_file} file as &#39;{var} = VALUE&#39;&#34;</span>
                <span class=k>raise</span> <span class=n>ConfigurationError</span><span class=p>(</span><span class=n>error_msg</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>var</span><span class=o>=</span><span class=n>var_name</span><span class=p>,</span> <span class=n>env_file</span><span class=o>=</span><span class=n>env_file</span><span class=p>))</span>


<span class=k>class</span> <span class=nc>ConfigurationError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>InvalidOperationException</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></td></tr></table></div></div><h2 id=setting-up-front-end class=headerLink><a href=#setting-up-front-end class=header-mark></a>Setting up front-end</h2><p>Good, Flask app has been configured and is ready to render some pages, so let&rsquo;s go and prepare out front-end to display projects' web pages. Download <a href=http://getbootstrap.com target=_blank rel="noopener noreffer">Bootstrap</a>, <a href=http://jquery.com target=_blank rel="noopener noreffer">JQuery</a>, <a href=https://fortawesome.github.io/Font-Awesome/ target=_blank rel="noopener noreffer">Fontawesome</a> and store theirs minified <code>min.css</code> and <code>min.js</code> artifacts in the <code>static</code> directory of the project. This is how it should look like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>├── static
│   ├── css
│   │   ├── bootstrap.min.css
│   │   ├── font-awesome.min.css
│   │   └── style.css  <span class=c1># custom styles css for every page</span>
│   ├── fonts
│   │   ├── FontAwesome.otf
│   │   ├── NokiaPureHeadline_ExtraBold.ttf  <span class=c1># custom fonts like this also live here</span>
│   │   ├── fontawesome-webfont.eot
│   │   ├── fontawesome-webfont.svg
│   │   ├── fontawesome-webfont.ttf
│   │   ├── fontawesome-webfont.woff
│   │   ├── fontawesome-webfont.woff2
│   │   ├── glyphicons-halflings-regular.eot
│   │   ├── glyphicons-halflings-regular.svg
│   │   ├── glyphicons-halflings-regular.ttf
│   │   ├── glyphicons-halflings-regular.woff
│   │   └── glyphicons-halflings-regular.woff2
│   └── js
│       ├── bootstrap.min.js
│       ├── jquery-2.2.0.min.js
│       ├── loadingoverlay.min.js  <span class=c1># CSS for overlay animation. </span>
│       ├── scripts.js             <span class=c1># custom JS scripts </span>
│       └── validator.min.js       <span class=c1># form validation JS code</span>
</code></pre></td></tr></table></div></div><h3 id=layout class=headerLink><a href=#layout class=header-mark></a>Layout</h3><p>Before diving into HTML it is advised to think about pages layout. I recommend you to get familiar with <a href=https://getbootstrap.com/css/ target=_blank rel="noopener noreffer">Bootstrap CSS rules</a> and choose a layout that fits your project. I decided to go with a 3+9 scheme. Three parts are for side menu and nine parts are for a content area with a navigation bar at the top of the page.</p><p>I composed a sketch of the page depicting how I would like to see my projects web view for an arbitrary script:</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/124786/21639405.11c/0_88708_57e30946_XL.png alt=pic title=0_88708_57e30946_XL.png></p><p>Follow the <a href=http://codepen.io/hellt/pen/PNJwxq target=_blank rel="noopener noreffer">link</a> to see my script&rsquo;s page template on codepen and see how things interact. Do not worry if you can&rsquo;t pick rock solid layout right now, you will be able to modify it on-the-fly and decide what suits your needs better.</p><h2 id=flask-routes--templates class=headerLink><a href=#flask-routes--templates class=header-mark></a>Flask routes & templates</h2><h3 id=routes class=headerLink><a href=#routes class=header-mark></a>Routes</h3><p>Flask uses <a href=https://flask.palletsprojects.com/en/1.1.x/quickstart/#routing target=_blank rel="noopener noreffer">routes</a> to create URL&rsquo;s for the web pages. If we need to show the main page for example for the URL <code>abc.com</code> we need to define the root route - <code>/</code> - like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
    <span class=k>return</span> <span class=s1>&#39;Index Page&#39;</span>
</code></pre></td></tr></table></div></div><p>This will effectively bind the <code>index()</code> function to the route <code>/</code> , so when a user navigates to the application&rsquo;s root it will trigger the <code>index()</code> function.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;index.html&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>My <code>index()</code> function does one simple thing, it asks Flask to render specific template - <code>index.html</code>.</p><h3 id=templates class=headerLink><a href=#templates class=header-mark></a>Templates</h3><p>You might guess that a <a href=https://flask.palletsprojects.com/en/1.1.x/quickstart/#rendering-templates target=_blank rel="noopener noreffer">template</a> has to do something with the HTML content rendered by a browser. Yes, it has, but it is far more powerful than a static HTML file.</p><blockquote><p>Generating HTML from within Python is not fun, and actually pretty cumbersome because you have to do the HTML escaping on your own to keep the application secure. Because of that Flask configures the <a href=https://jinja.palletsprojects.com/en/2.11.x/ target=_blank rel="noopener noreffer">Jinja2</a> template engine for you automatically.</p></blockquote><p>So Flask&rsquo;s template is a Jinja2-based template which allows you to build <strong>dynamic</strong> web-pages instead of a static content. To render a template you can use the <a href=http://flask.pocoo.org/docs/1.0/api/#flask.render_template target=_blank rel="noopener noreffer"><code>render_template()</code></a> method. All you have to do is to provide the name of the template and the variables you want to pass to the template engine.</p><p>You can name your templates as you like, but normally it will have an <code>.html</code> extension to reflect their purpose. This is my <code>index.html</code> template mentioned earlier bound to the route <code>/</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html>{% extends &#39;base.html&#39; %}
{% block content %}
	<span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span> Welcome to <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-primary&#34;</span><span class=p>&gt;</span>PLAZA<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>. <span class=p>&lt;</span><span class=nt>small</span><span class=p>&gt;</span>front-end for python scripts we used to run from console<span class=p>&lt;/</span><span class=nt>small</span><span class=p>&gt;&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
	<span class=p>&lt;</span><span class=nt>h3</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-primary&#34;</span><span class=p>&gt;</span>
		What is PLAZA?
	<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
	<span class=p>&lt;</span><span class=nt>p</span> <span class=p>&gt;</span>
		PLAZA is a web front-end to python scripts built with these goals in mind:
		<span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>allow people with zero python knowledge to use the scripts by interaction through simple Web GUI;<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>beautify scripts&#39; output with modern CSS and HTML formatting;<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
			<span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>aggregate all the scripts in one repo but in a separate sandboxed directories to increase code manageability.<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
		<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
	<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>h3</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-primary&#34;</span><span class=p>&gt;</span>
		How to use?
	<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
	<span class=p>&lt;</span><span class=nt>p</span> <span class=p>&gt;</span>
		Navigate through the side menu to the desired script and follow the instructions.
	<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>h3</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-primary&#34;</span><span class=p>&gt;</span>
		Contacts
	<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
	<span class=p>&lt;</span><span class=nt>p</span> <span class=p>&gt;</span>
		Have any ideas, questions, problems? Visit <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/contacts&#34;</span><span class=p>&gt;</span>contacts<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span> page for all the details.
	<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
{% endblock %}
</code></pre></td></tr></table></div></div><p>And this is how it gets rendered:</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88709_76038afa_orig.png alt=pic title=0_88709_76038afa_orig.png></p><p><a href=http://codepen.io/hellt/pen/ONjwYY target=_blank rel="noopener noreffer">Dynamic version</a> of the index page can be found on the codepen as well. The trick behind that magic <code>template->rendered page</code> transformation is in the first two lines. This is <a href=https://flask.palletsprojects.com/en/1.1.x/patterns/templateinheritance/ target=_blank rel="noopener noreffer">template inheritance</a> magic - <code>{% extends 'base.html' %}</code> - and that is what makes templating so powerful.</p><h4 id=template-inheritance class=headerLink><a href=#template-inheritance class=header-mark></a>Template inheritance</h4><p>Inheritance drill <a href=https://flask.palletsprojects.com/en/1.1.x/patterns/templateinheritance/ target=_blank rel="noopener noreffer">described briefly</a> in the official documentation and the main part of it sounds like this:</p><blockquote><p>Template inheritance allows you to build a base “skeleton” template that contains all the common elements of your site and defines <strong>blocks</strong> that child templates can override.</p></blockquote><p>Apart from the official docs, you can watch <a href="https://www.youtube.com/watch?v=hNzruwVPtCE&feature=youtu.be" target=_blank rel="noopener noreffer">this video</a> from the <em>“Discover Flask”</em> series to better understand how does template inheritance work.</p><h4 id=main-template class=headerLink><a href=#main-template class=header-mark></a>Main template</h4><p>One of the best practices regarding template inheritance is to compose a <code>base template</code> or a layout for the whole site so every other template will inherit from it. My &ldquo;main&rdquo; template is called <code>base.html</code> and it describes the logical parts for each page in this project.</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/28982/21639405.11c/0_8870a_f83ca7b_orig.png alt=pic title=0_8870a_f83ca7b_orig.png></p><p>The main template consists of the static parts like Navbar, side menu, it also connects core CSS, JS and fonts. And finally, it specifies where would child template&rsquo;s content be placed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>HTML</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;X-UA-Compatible&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;IE=edge&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>PLAZA Project<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;description&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;NOKIA Launchpad for scripts&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;author&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;Roman Dodin&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/static/css/bootstrap.min.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/static/css/style.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span><span class=p>&gt;</span> <span class=c>&lt;!-- custom CSS --&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/static/css/font-awesome.min.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
        <span class=c>&lt;!-- NAV BAR --&gt;</span>
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;navbar navbar-nokia navbar-fixed-top&#34;</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;navbar-header&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;navbar-toggle&#34;</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;collapse&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;.navbar-collapse&#34;</span><span class=p>&gt;</span>
                        <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;icon-bar&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
                    <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;navbar-brand&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span>PLAZA<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;collapse navbar-collapse&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;nav navbar-nav&#34;</span><span class=p>&gt;</span>

                        <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
                            <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#contact&#34;</span><span class=p>&gt;</span>Contact<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                        <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                        <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
                           <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#modalSearch&#34;</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;modal&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;#modalSearch&#34;</span><span class=p>&gt;</span>
                               Search <span class=p>&lt;</span><span class=nt>span</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;searchGlyph&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;glyphicon glyphicon-search&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
                           <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                       <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                    <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=c>&lt;!--/.nav-collapse --&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=c>&lt;!-- NAV BAR --&gt;</span>


        <span class=c>&lt;!-- Search Modal (http://www.w3schools.com/bootstrap/bootstrap_modal.asp) --&gt;</span>
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;modalSearch&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal fade&#34;</span> <span class=na>role</span><span class=o>=</span><span class=s>&#34;dialog&#34;</span><span class=p>&gt;</span>
           <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-dialog modal-lg&#34;</span><span class=p>&gt;</span>

               <span class=c>&lt;!-- Modal content--&gt;</span>
               <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-content&#34;</span><span class=p>&gt;</span>
                   <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-header&#34;</span><span class=p>&gt;</span>
                       <span class=p>&lt;</span><span class=nt>button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;close&#34;</span> <span class=na>data-dismiss</span><span class=o>=</span><span class=s>&#34;modal&#34;</span><span class=p>&gt;</span><span class=ni>&amp;times;</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
                       <span class=p>&lt;</span><span class=nt>h4</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-title&#34;</span><span class=p>&gt;</span>Search PLAZA (under development)<span class=p>&lt;/</span><span class=nt>h4</span><span class=p>&gt;</span>
                   <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                   <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-body&#34;</span><span class=p>&gt;</span>
                       <span class=c>&lt;!-- Add the modal body here --&gt;</span>
                   <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                   <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;modal-footer&#34;</span><span class=p>&gt;</span>
                       <span class=p>&lt;</span><span class=nt>button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;btn btn-default&#34;</span> <span class=na>data-dismiss</span><span class=o>=</span><span class=s>&#34;modal&#34;</span><span class=p>&gt;</span>Close<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
                   <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
               <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
           <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>


        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;col-md-3&#34;</span><span class=p>&gt;</span>
                  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;nav-side-menu&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;brand&#34;</span><span class=p>&gt;</span>MENU<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-bars fa-3x toggle-btn&#34;</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;collapse&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;#menu-content&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>

                    <span class=c>&lt;!-- START OF SIDE MENU AREA--&gt;</span>
                    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;menu-list&#34;</span><span class=p>&gt;</span>
                      <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;menu-content&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;menu-content collapse out&#34;</span><span class=p>&gt;</span>
                          <span class=c>&lt;!-- PLACEHOLDER FOR ELEMENT W/O CHILDREN
</span><span class=c>                          &lt;li&gt;
</span><span class=c>                              &lt;a href=&#34;#&#34;&gt;
</span><span class=c>                                  &lt;i class=&#34;fa fa-angle-right fa-fw&#34;&gt;&lt;/i&gt;Element wo children
</span><span class=c>                              &lt;/a&gt;
</span><span class=c>                          &lt;/li&gt;
</span><span class=c>                          --&gt;</span>

                          <span class=p>&lt;</span><span class=nt>li</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;collapse&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;#5620sam&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;collapsed&#34;</span><span class=p>&gt;</span>
                              <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span><span class=p>&gt;</span>
                                  <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-double-right fa-fw chevron-rotate&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>5620 SAM
                              <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                          <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                              <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sub-menu collapse out&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;5620sam&#34;</span><span class=p>&gt;</span>
                                  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-right fa-fw&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/5620SAM/SAM-O_XML_API_Tester&#34;</span><span class=p>&gt;</span>
                                          SAM-O XML API Test Engine
                                      <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                                  <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                              <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>

                          <span class=p>&lt;</span><span class=nt>li</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;collapse&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;#vmware&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;collapsed&#34;</span><span class=p>&gt;</span>
                              <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span><span class=p>&gt;</span>
                                  <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-double-right fa-fw chevron-rotate&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>VMWare
                              <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                          <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                              <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sub-menu collapse out&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;vmware&#34;</span><span class=p>&gt;</span>
                                  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-right fa-fw&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/vmware/get_vmrc_links&#34;</span><span class=p>&gt;</span>
                                          VMRC Link Composer
                                      <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                                  <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>

                                  <span class=p>&lt;</span><span class=nt>li</span> <span class=na>data-toggle</span><span class=o>=</span><span class=s>&#34;collapse&#34;</span> <span class=na>data-target</span><span class=o>=</span><span class=s>&#34;#products2&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;collapsed&#34;</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-double-right fa-fw chevron-rotate&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span><span class=p>&gt;</span>Placeholder-sublevel1
                                      <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                                  <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                                      <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sub-sub-menu collapse out&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;products2&#34;</span><span class=p>&gt;</span>
                                          <span class=p>&lt;</span><span class=nt>li</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sub-level2&#34;</span><span class=p>&gt;</span>
                                              <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;fa fa-angle-right fa-fw&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>
                                              <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#&#34;</span><span class=p>&gt;</span>
                                                  Placeholder-sublevel2
                                              <span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                                          <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
                                      <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
                              <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
                      <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
                    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=c>&lt;!-- END OF SIDE MENU AREA --&gt;</span>
                <span class=c>&lt;!-- START OF CONTENT AREA --&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;col-md-9&#34;</span><span class=p>&gt;</span>
                    {% block content %}{% endblock %}
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=c>&lt;!-- END OF CONTENT AREA --&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>


        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/js/jquery-2.2.0.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/js/bootstrap.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/js/scripts.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>            <span class=c>&lt;!-- custom JS --&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/js/validator.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>      <span class=c>&lt;!-- https://github.com/1000hz/bootstrap-validator --&gt;</span>
        <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/js/loadingoverlay.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span> <span class=c>&lt;!-- http://gasparesganga.com/labs/jquery-loading-overlay/--&gt;</span>
        {% block added_js %}{% endblock %}                       <span class=c>&lt;!-- block for JS added on pages on demand --&gt;</span>
    <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>HTML</span><span class=p>&gt;</span>
</code></pre></td></tr></table></div></div><p>I marked the lines on which child template insertion occurs. Once again, read the docs on templating, read some blogs and you will catch it quickly.</p><h4 id=child-template class=headerLink><a href=#child-template class=header-mark></a>Child template</h4><p>Once you have the base template figured out you are ready to create it&rsquo;s successors - child templates. A while back I showed you the <code>/templates/index.html</code> template where the following construct</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html>{% extends &#39;base.html&#39; %}
{% block content %}
	<span class=c>&lt;!-- SOME HTML HERE --&gt;</span>
{% endblock %}
</code></pre></td></tr></table></div></div><p>effectively told Flask to extend <code>base.html</code> content section with some code relevant to this particular <code>index.html</code> page.</p><h4 id=intermediate-templates-and-multiple-inheritances class=headerLink><a href=#intermediate-templates-and-multiple-inheritances class=header-mark></a>Intermediate templates and multiple inheritances</h4><p>It is also possible to inherit more than once. See what I did for the pages with actual python scripts input and output forms:</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/25939/21639405.11c/0_8870b_aa304b21_orig.png alt=pic title=0_8870b_aa304b21_orig.png></p><p>As you will see shortly after - my user-facing scripts' page has some static sections like <em>Description</em>, <em>Usage</em>, <em>Limitations</em>, <em>Author</em> , etc. Normally, all of these sections will appear on every page thus it would be nice to move all this <strong>static and repetitious</strong> content to a separate template.</p><p>That&rsquo;s how <code>content_template.html</code> was born. In this template I define blocks with names corresponding to the static sections.</p><p>The last bit of this puzzle is the template <code>&lt;script_name>.html</code> which extends <code>content_template.html</code> and fills in all the data into blocks defined in his parent template. This template will be spawned each time a new script will be added. In the example below I demo the template called <code>get_vmrc_links.html</code> that is used for a particular script.</p><p><code>Content_template.html</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html>{% extends &#39;base.html&#39; %}
{% block content %}

<span class=p>&lt;</span><span class=nt>h2</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-primary&#34;</span><span class=p>&gt;</span>
    {% block title %}{% endblock %}
<span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;lead&#34;</span> <span class=p>&gt;</span>
    {% block main_purpose %}{% endblock %}
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>h3</span><span class=p>&gt;</span>
    Description
<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>{% block descr %}{% endblock %}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>h3</span><span class=p>&gt;</span>
    Usage
<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>{% block usage %}{% endblock %}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>


<span class=p>&lt;</span><span class=nt>h3</span><span class=p>&gt;</span>
    Limitations
<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>{% block limitations %}{% endblock %}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=c>&lt;!-- Author and info block --&gt;</span>
<span class=p>&lt;</span><span class=nt>small</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>dl</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;dl-horizontal&#34;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>Author<span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;</span>{% block author %}{% endblock %}<span class=p>&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>

  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>Version<span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;</span>{% block version %}{% endblock %}<span class=p>&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>

  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>Tags<span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;</span>{% block tags %}{% endblock %}<span class=p>&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>dl</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>small</span><span class=p>&gt;</span>

    {% block script_content %}<span class=c>&lt;!-- Custom HTML for scrip --&gt;</span>{% endblock %}

{% endblock %}

{% block added_js %}<span class=c>&lt;!-- Custom JavaScript for a script page--&gt;</span>{% endblock %}<span class=p>&lt;/</span><span class=nt>pre</span><span class=p>&gt;</span>
</code></pre></td></tr></table></div></div><p><code>templates/get_vmrc_links.html</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-txt data-lang=txt>{% extends &#39;content_template.html&#39; %}
{% block title %}
    VMRC Links Composer
{% endblock %}


{% block main_purpose %}
This script composes clickable links for VMWare Remote Console (VMRC) standalone client along with basic info
about VMs on a ESXi host or vCenter.
{% endblock %}


{% block descr %}
It became quite a pain to get Web-based console working on ESXi hosts or vCenter servers (&lt;=v.5.5) with
&lt;a href=&#34;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2114800&#34;&gt;deprecation of NPAPI&lt;/a&gt;
plugins in modern browsers. An easy method to get a remote console access would be to use a standalone
&lt;a href=&#34;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2091284&#34;&gt;Virtual Machine Remote Console client (VMRC)&lt;/a&gt;
which is available for free for major OSes.
&lt;p&gt;For standalone VMRC client to work a special link has to be composed - &lt;br/&gt;i.e. &lt;code&gt;vmrc://root@172.17.255.254:443/?moid=vm-13&lt;/code&gt;&lt;/p&gt;
This script generates such links and is based on an appropriate &lt;a href=&#34;http://noshut.ru/2016/01/getting-vmrc-links-with-python/&#34;&gt;console version&lt;/a&gt;.

{% endblock %}


{% block usage %}
Script works both with independent ESXi hosts and managed by vCenter. Select desired entity from the
&lt;code&gt;Known hosts&lt;/code&gt; select element or specify ESXi/vCenter IP address along with
credentials of the user with root privileges and you are good to go.
{% endblock %}


{% block limitations %}
In rare cases the script couldn&#39;t compose the whole link, in that case use the &lt;code&gt;moID&lt;/code&gt; value specified in the
output section to compose VMRC link manually.
{% endblock %}


{% block author %}
Roman Dodin
{% endblock %}


{% block version %}
0.1
{% endblock %}


{% block tags %}
VMWare, VMRC
{% endblock %}


{% block script_content %}

&lt;div class=&#34;container-fluid&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-12&#34;&gt;
            &lt;div class=&#34;panel panel-default&#34;&gt;
                &lt;div class=&#34;panel-heading&#34;&gt;
                    &lt;h3 class=&#34;panel-title&#34;&gt;Inputs&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div class=&#34;panel-body&#34;&gt;


                    &lt;!-- FORM --&gt;
                    &lt;form data-toggle=&#34;validator&#34; role=&#34;form&#34; method=&#34;post&#34;&gt; &lt;!-- validation form http://1000hz.github.io/bootstrap-validator/ --&gt;

                        &lt;div class=&#34;form-group col-md-12&#34;&gt;
                            &lt;label class=&#34;control-label&#34; for=&#34;known_hosts_select&#34;&gt;
                                Known hosts
                            &lt;/label&gt;
                            &lt;select class=&#34;form-control&#34; id=&#34;known_hosts_select&#34;&gt;
                              &lt;option&gt;-- List of known hosts --&lt;/option&gt;
                              &lt;option ip=&#34;172.17.255.254&#34; login=&#34;root&#34; pass=&#34;test_pass&#34;&gt;vCenter (172.17.255.254) -- vCenter&lt;/option&gt;
                              &lt;option ip=&#34;172.17.255.253&#34; login=&#34;root&#34; pass=&#34;test_pass&#34;&gt;ESXi (172.17.255.253) -- ESXi host&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;

                        &lt;div class=&#34;form-group col-md-12&#34;&gt;
                            &lt;label class=&#34;control-label requiredField&#34; for=&#34;vmware_ip_addr&#34;&gt;
                                ESXi/vCenter IP address
                            &lt;/label&gt;
                            &lt;input class=&#34;form-control&#34; type=&#34;text&#34;
                                   pattern=&#34;^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$&#34;
                                   id=&#34;vmware_ip_addr&#34; name=&#34;vmware_ip_addr&#34; placeholder=&#34;i.e. 172.17.255.255&#34;
                                   data-error=&#34;How did you pass NRS I? it&#39;s not a valid IP address&#34; /&gt;
                            &lt;div class=&#34;help-block with-errors&#34;&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class=&#34;form-group col-md-6&#34;&gt;
                            &lt;label class=&#34;control-label requiredField&#34; for=&#34;vmware_login&#34;&gt;Login
                            &lt;/label&gt;
                            &lt;input class=&#34;form-control&#34; id=&#34;vmware_login&#34; name=&#34;vmware_login&#34; placeholder=&#34;root&#34; type=&#34;text&#34; required/&gt;
                        &lt;/div&gt;
                        &lt;div class=&#34;form-group col-md-6&#34;&gt;
                            &lt;label class=&#34;control-label requiredField&#34; for=&#34;vmware_pass&#34;&gt;Password
                            &lt;/label&gt;
                            &lt;input class=&#34;form-control&#34;  id=&#34;vmware_pass&#34; name=&#34;vmware_pass&#34;
                                   placeholder=&#34;password&#34; type=&#34;password&#34; required/&gt;
                        &lt;/div&gt;
                        &lt;div class=&#34;form-group col-md-12&#34;&gt;
                            &lt;div&gt; &lt;!-- RD: type=&#34;submit&#34; changed to button, since JQuery is in use --&gt;
                                &lt;button class=&#34;btn btn-primary&#34; id=&#34;submit_form&#34; name=&#34;submit&#34; type=&#34;button&#34;&gt;
                                    Submit
                                &lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- OUTPUT SECTION --&gt;
            &lt;div class=&#34;panel panel-default&#34;&gt;
                &lt;div class=&#34;panel-heading&#34;&gt;
                    &lt;h3 class=&#34;panel-title&#34;&gt;Output&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div class=&#34;panel-body&#34; id=&#34;output_div&#34;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- END OF OUTPUT SECTION --&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
{% endblock %}
{% block added_js %}
&lt;script src=&#34;{{ url_for(&#39;get_vmrc_links.static&#39;, filename=&#39;get_vmrc_links.js&#39;) }}&#34;&gt;&lt;/script&gt;
{% endblock %}
</code></pre></td></tr></table></div></div><p>Rendered page:
<img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/47284/21639405.11c/0_8870c_6ef455c8_orig.png alt=pic title=0_8870c_6ef455c8_orig.png></p><p>Dynamic template: <a href=http://codepen.io/hellt/pen/PNJwxq>http://codepen.io/hellt/pen/PNJwxq</a></p><h2 id=flask-blueprints class=headerLink><a href=#flask-blueprints class=header-mark></a>Flask Blueprints</h2><p>Another project&rsquo;s major building block is <a href=https://flask.palletsprojects.com/en/1.1.x/blueprints/ target=_blank rel="noopener noreffer">Blueprint</a>. Blueprints are important and actually making it possible to isolate various scripts in their appropriate sandboxes. And by sandbox I mean separate directory which hosts all the files linked to the script.</p><p>Take a look inside <code>scripts_bank</code> directory which will host all the scripts-related files:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>├── scripts_bank
│   └── vmware
│       ├── __init__.py
│       └── get_vmrc_links
│           ├── __init__.py
│           ├── get_vmrc_links.py
│           ├── static
│           │   └── get_vmrc_links_scripts.js
│           └── templates
│               └── get_vmrc_links.html
</code></pre></td></tr></table></div></div><p>It&rsquo;s the blueprints which allow us to modularize the app by storing some of it&rsquo;s components in the different directories and still be able to link them up to the main Flask app. See how elegantly JS code along with CSS styles needed only by this particular application <code>get_vmrc_links</code> found their&rsquo;s place in a separate directory - <code>/scripts_bank/vmware/get_vmrc_links/</code>!</p><h3 id=blueprint-creation class=headerLink><a href=#blueprint-creation class=header-mark></a>Blueprint creation</h3><p>To create a Blueprint I placed this code in the <code>get_vmrc_links.py</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=n>get_vmrc_links_bp</span> <span class=o>=</span> <span class=n>Blueprint</span><span class=p>(</span><span class=s1>&#39;get_vmrc_links&#39;</span><span class=p>,</span> <span class=vm>__name__</span><span class=p>,</span> <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>static_folder</span><span class=o>=</span><span class=s1>&#39;static&#39;</span><span class=p>,</span>
                              <span class=n>static_url_path</span><span class=o>=</span><span class=s1>&#39;/get_vmrc_links/static&#39;</span><span class=p>)</span>

<span class=nd>@get_vmrc_links_bp.route</span><span class=p>(</span><span class=s1>&#39;/get_vmrc_links&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
<span class=k>def</span> <span class=nf>get_vmrc_links</span><span class=p>():</span>
 <span class=c1># some code</span>
</code></pre></td></tr></table></div></div><p>When I created a blueprint I defined it&rsquo;s <code>static_url_path</code> to <code>/get_vmrc_links/static</code> . But don&rsquo;t get confused if you don&rsquo;t see this path, I don&rsquo;t have it. That is because blueprints can be <strong>registered</strong> from a specific point and not directly from the project&rsquo;s root.</p><p>Once we have Blueprint created we need to bind it to the route (line 4 in the snippet above). And again the route <code>/get_vmrc_links</code> will have it&rsquo;s root at the directory where Blueprint will be registered later.</p><h3 id=register-a-blueprint class=headerLink><a href=#register-a-blueprint class=header-mark></a>Register a blueprint</h3><p>To register the blueprint navigate to the main <code>app.py</code> and add the following lines:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>scripts_bank.vmware.get_vmrc_links.get_vmrc_links</span> <span class=kn>import</span> <span class=n>get_vmrc_links_bp</span>
<span class=n>app</span><span class=o>.</span><span class=n>register_blueprint</span><span class=p>(</span><span class=n>get_vmrc_links_bp</span><span class=p>,</span> <span class=n>url_prefix</span><span class=o>=</span><span class=s1>&#39;/vmware&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>Registration is easy! Have you spotted the <code>url_prefix='/vmware'</code> part? This is the Blueprints root directory I was talking about! So now you can glue the parts in a whole picture.</p><ol><li>Blueprint&rsquo;s root directory is <code>/vmware</code></li><li>It&rsquo;s static directory path is <code>/get_vmrc_links/static</code> which turns to <code>/vmware + /get_vmrc_links/static == /vmware/get_vmrc_links/static</code></li><li>The Flask route <code>/get_vmrc_links</code> transforms to <code>/vmware/get_vmrc_links</code> and by following this URL the script&rsquo;s page will be rendered</li></ol><h2 id=front-end-back-end-data-exchange class=headerLink><a href=#front-end-back-end-data-exchange class=header-mark></a>Front-end&lt;->back-end data exchange</h2><p>To pass data back and forth between front-end and back-end we need to:</p><ol><li><strong>(@front-end)</strong> serialize data from the input elements</li><li><strong>(@front-end)</strong> pass this data to the back-end</li><li><strong>(@back-end)</strong> receive data, make calculations, construct a response, send it</li><li><strong>(@front-end)</strong> receive a response and render it in the output form, handle errors</li></ol><h3 id=serializing-input-data class=headerLink><a href=#serializing-input-data class=header-mark></a>Serializing input data</h3><p>Serializing is not hard at all. Since it is a front-end&rsquo;s task it is done by the JS code which is also stored in a separate file unique to this particular script <code>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links.js</code>.</p><p>This example shows you how you separate one script from another by maintaining all related files in a script&rsquo;s folder, in this example I&rsquo;m working on <code>get_vmrc_links</code> script, so all the JS and specific HTML templates are stored under <code>/scripts_bank/vmware/get_vmrc_links/</code> directory.</p><p>Take a look at <code>get_vmrc_links.js</code> and pay attention to <code>$('#submit_form').click(function()</code>. This function handles things occurring on <code>on-click</code> event to the <code>Submit</code> button.</p><p><code>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=c1>// filling data to the input elements based on selection of predefined hosts
</span><span class=c1></span><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#known_hosts_select&#39;</span><span class=p>).</span><span class=nx>change</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=nx>$</span><span class=p>(</span><span class=s2>&#34;#vmware_ip_addr&#34;</span><span class=p>).</span><span class=nx>val</span><span class=p>(</span><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#known_hosts_select option:selected&#39;</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s1>&#39;ip&#39;</span><span class=p>));</span>
    <span class=nx>$</span><span class=p>(</span><span class=s2>&#34;#vmware_login&#34;</span><span class=p>).</span><span class=nx>val</span><span class=p>(</span><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#known_hosts_select option:selected&#39;</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s1>&#39;login&#39;</span><span class=p>));</span>
    <span class=nx>$</span><span class=p>(</span><span class=s2>&#34;#vmware_pass&#34;</span><span class=p>).</span><span class=nx>val</span><span class=p>(</span><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#known_hosts_select option:selected&#39;</span><span class=p>).</span><span class=nx>attr</span><span class=p>(</span><span class=s1>&#39;pass&#39;</span><span class=p>));</span>
<span class=p>});</span>

<span class=nx>$</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#submit_form&#39;</span><span class=p>).</span><span class=nx>click</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
        <span class=c1>// start showing loading animation
</span><span class=c1></span>        <span class=nx>$</span><span class=p>.</span><span class=nx>LoadingOverlay</span><span class=p>(</span><span class=s2>&#34;show&#34;</span><span class=p>,</span> <span class=p>{</span>
                        <span class=nx>image</span>       <span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
                        <span class=nx>fontawesome</span> <span class=o>:</span> <span class=s2>&#34;fa fa-cog fa-spin&#34;</span>
                        <span class=p>})</span>
        <span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span><span class=p>({</span>
            <span class=nx>url</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>pathname</span><span class=p>,</span> <span class=c1>// url: /vmware/get_vmrc_links
</span><span class=c1></span>            <span class=nx>data</span><span class=o>:</span> <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>).</span><span class=nx>serialize</span><span class=p>(),</span>
            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
            <span class=nx>success</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
                <span class=nx>$</span><span class=p>.</span><span class=nx>LoadingOverlay</span><span class=p>(</span><span class=s2>&#34;hide&#34;</span><span class=p>);</span>
                <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>error</span> <span class=o>!=</span> <span class=s2>&#34;&#34;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#output_div&#39;</span><span class=p>).</span><span class=nx>HTML</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>error</span><span class=p>)</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#output_div&#39;</span><span class=p>).</span><span class=nx>HTML</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>collected_vm_info</span><span class=p>)</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>});</span>
    <span class=p>});</span>
<span class=p>});</span>
</code></pre></td></tr></table></div></div><p>String <code>data: $('form').serialize()</code> produces a string of <a href=https://api.jquery.com/serialize/ target=_blank rel="noopener noreffer">serialized</a> data with all <code>&lt;form></code>&rsquo;s input elements IDs and their values. Along with serialization task, this JS file contains additional things like showing &ldquo;Loading&rdquo; overlay and filling the <code>inputs</code> with the predefined data from <code>select</code> object.</p><h3 id=sending-serialized-data-to-the-back-end class=headerLink><a href=#sending-serialized-data-to-the-back-end class=header-mark></a>Sending serialized data to the back-end</h3><p>Serialized data goes via <code>POST</code> method to the back-end via an <code>url</code> you specify.</p><p>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span><span class=p>({</span>
            <span class=nx>url</span><span class=o>:</span> <span class=nx>newPathname</span> <span class=o>+</span> <span class=s1>&#39;/get_vmrc_links&#39;</span><span class=p>,</span> <span class=c1>// url: /vmware/get_vmrc_links
</span><span class=c1></span>            <span class=nx>data</span><span class=o>:</span> <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>).</span><span class=nx>serialize</span><span class=p>(),</span>
            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</code></pre></td></tr></table></div></div><h3 id=receiving-data-by-the-back-end-and-processing class=headerLink><a href=#receiving-data-by-the-back-end-and-processing class=header-mark></a>Receiving data by the back-end and processing</h3><p>To receive serialized data you need to create a <code>POST</code> requests handler:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1># /scripts_bank/vmware/get_vmrc_links/get_vmrc_links.py</span>
<span class=nd>@get_vmrc_links_bp.route</span><span class=p>(</span><span class=s1>&#39;/get_vmrc_links&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
<span class=k>def</span> <span class=nf>get_vmrc_links</span><span class=p>():</span>
    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;get_vmrc_links.html&#39;</span><span class=p>)</span>

    <span class=c1># handle POST method from JQuery</span>
    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
        <span class=n>getvmrc_args</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_ip_addr&#39;</span><span class=p>],</span>
                        <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_login&#39;</span><span class=p>],</span>
                        <span class=s1>&#39;pass&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_pass&#39;</span><span class=p>]}</span>
</code></pre></td></tr></table></div></div><p>To get the contents arrived in <code>POST</code> I queried <code>form</code> data structure of the <a href=https://werkzeug.palletsprojects.com/en/1.0.x/wrappers/# target=_blank rel="noopener noreffer">request</a> object with appropriate keys. <code>form[]</code> object is an <code>ImmutableDict</code> data structure which contains all the data received in the <code>POST</code> method:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=n>ImmutableMultiDict</span><span class=p>([(</span><span class=s1>&#39;vmware_pass&#39;</span><span class=p>,</span> <span class=s1>&#39;mypass&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;vmware_ip_addr&#39;</span><span class=p>,</span> <span class=s1>&#39;172.17.255.253&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;vmware_login&#39;</span><span class=p>,</span> <span class=s1>&#39;root&#39;</span><span class=p>)])</span>
</code></pre></td></tr></table></div></div><p>Once you received your inputs you pass it along to the main function of the chosen script to process. Here I should mention that you have two ways of generating output data:</p><ol><li>you could leave it in plain text and wrap it in the appropriate <code>HTML</code> tags with Flask</li><li>or you could enclose scripts' output data in <code>HTML</code> tags during scripts execution process</li></ol><p>In this example with the <code>get_vmrc_links.py</code> script I chose the latter option and wrapped the whole output of the script (which normally would have found it&rsquo;s peace in <code>stdout</code>) with HTML tags:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1># /scripts_bank/vmware/get_vmrc_links/get_vmrc_links.py</span>
<span class=o>&lt;...</span> <span class=n>omitted</span> <span class=o>...&gt;</span>

<span class=n>vmrc_links</span><span class=p>[</span><span class=s1>&#39;collected_vm_info&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=s2>&#34;&lt;p&gt;&lt;pre&gt;&#34;</span> <span class=c1># opening paragraph and preformatted section</span>
<span class=n>vmrc_links</span><span class=p>[</span><span class=s1>&#39;collected_vm_info&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=s2>&#34;&lt;strong&gt;Name       : &#34;</span> <span class=o>+</span> <span class=n>vm_summary</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>name</span> <span class=o>+</span> <span class=s2>&#34;&lt;/strong&gt;&lt;/br&gt;&#34;</span>
<span class=n>vmrc_links</span><span class=p>[</span><span class=s1>&#39;collected_vm_info&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=s2>&#34;Path       : &#34;</span> <span class=o>+</span> <span class=n>vm_summary</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>vmPathName</span> <span class=o>+</span> <span class=s2>&#34;&lt;/strong&gt;&lt;/br&gt;&#34;</span>

<span class=o>&lt;...</span> <span class=n>omitted</span> <span class=o>...&gt;</span>
</code></pre></td></tr></table></div></div><p>See these <code>&lt;pre></code>, <code>&lt;p></code> and <code>&lt;strong></code> tags I used? It&rsquo;d done exactly to get rich formatting.</p><h3 id=passing-the-results-back-to-the-front-end class=headerLink><a href=#passing-the-results-back-to-the-front-end class=header-mark></a>Passing the results back to the front-end</h3><p>One of the goals of this project was to make script&rsquo;s output look more readable. Thanks to modern front-end techniques and frameworks you could render whatever/however you like, your skills are the limit. At this time, my scripts produce just some text which I can render in various ways with HTML. But how do I actually pass this data to the front-end engine and in a what form?</p><p>I pass it as <code>JSON</code>-formatted structure composed in a two-step process:</p><p>Firstly, I collected scripts output data as a <code>dict</code> with the keys representing output data and errors (if any):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=n>vmrc_links</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;collected_vm_info&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>  <span class=c1>## collected results</span>
              <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>}</span>              <span class=c1>## errors</span>
</code></pre></td></tr></table></div></div><p>Once I have a dict with results and errors to show I use Flask&rsquo;s <a href=https://flask.palletsprojects.com/en/1.1.x/api/#flask.json.jsonify target=_blank rel="noopener noreffer">jsonify</a> function to represent my dict as JSON and compose a <code>Response</code> object to pass it further to the front-end:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python>    <span class=o>&lt;...</span> <span class=n>omitted</span> <span class=o>...&gt;</span>

    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
            <span class=n>getvmrc_args</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_ip_addr&#39;</span><span class=p>],</span>
                            <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_login&#39;</span><span class=p>],</span>
                            <span class=s1>&#39;pass&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=p>[</span><span class=s1>&#39;vmware_pass&#39;</span><span class=p>]}</span>

            <span class=k>global</span> <span class=n>vmrc_links</span>
            <span class=n>vmrc_links</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;collected_vm_info&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
                        <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>}</span>

            <span class=n>vm_info</span> <span class=o>=</span> <span class=n>main</span><span class=p>(</span><span class=n>getvmrc_args</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>vm_info</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>And that&rsquo;s it. Now fast forward to the front-end and see how it processes received data:</p><p>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=nx>$</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#submit_form&#39;</span><span class=p>).</span><span class=nx>click</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
        <span class=c1>// start showing loading animation
</span><span class=c1></span>        <span class=nx>$</span><span class=p>.</span><span class=nx>LoadingOverlay</span><span class=p>(</span><span class=s2>&#34;show&#34;</span><span class=p>,</span> <span class=p>{</span>
                        <span class=nx>image</span>       <span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
                        <span class=nx>fontawesome</span> <span class=o>:</span> <span class=s2>&#34;fa fa-cog fa-spin&#34;</span>
                        <span class=p>})</span>
        <span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span><span class=p>({</span>
            <span class=nx>url</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>pathname</span><span class=p>,</span> <span class=c1>// url: /vmware/get_vmrc_links
</span><span class=c1></span>            <span class=nx>data</span><span class=o>:</span> <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>).</span><span class=nx>serialize</span><span class=p>(),</span>
            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
            <span class=nx>success</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
                <span class=nx>$</span><span class=p>.</span><span class=nx>LoadingOverlay</span><span class=p>(</span><span class=s2>&#34;hide&#34;</span><span class=p>);</span>
                <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>error</span> <span class=o>!=</span> <span class=s2>&#34;&#34;</span><span class=p>)</span> <span class=p>{</span>
                    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#output_div&#39;</span><span class=p>).</span><span class=nx>HTML</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>error</span><span class=p>)</span>
                <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#output_div&#39;</span><span class=p>).</span><span class=nx>HTML</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>collected_vm_info</span><span class=p>)</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>});</span>
    <span class=p>});</span>
<span class=p>});</span>
</code></pre></td></tr></table></div></div><p>On a successful return, I check if output has any errors and if it has - put an error message in the <code>#output_div</code> block. If things went smooth I put collected results in this block instead.</p><h2 id=adding-new-script-is-easy class=headerLink><a href=#adding-new-script-is-easy class=header-mark></a>Adding new script is easy</h2><h3 id=create-the-file-structure class=headerLink><a href=#create-the-file-structure class=header-mark></a>Create the file structure</h3><p>It&rsquo;s very easy to add a new script. Walk with me and see how easily I add completely separate script called <code>SAM-O XML API Tester</code>.</p><p>At first, I created directories which represent sandbox for the script in a folder dedicated to storing scripts (<code>scripts_bank</code>). As I said, my directory structure follows my side-menu bar, that&rsquo;s why for the new script called <code>SAM-O_XML_API_Tester</code> I first off created root directory <code>5620sam</code> and then subdirectory <code>SAM-O_XML_API_Tester</code>. The latter dir will carry all files related to this particular script.</p><p>Do not forget to create empty <code>__init.py__</code> files inside directories of the script to treat folders as python packages.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>.
├── scripts_bank
│  ├── _5620sam
│  │  ├── sam_xml_api_tester
│  │  │  ├── __init__.py
│  │  │  ├── static
│  │  │  └── templates
│  │  └── __init__.py
│  ├── __init__.py
</code></pre></td></tr></table></div></div><h3 id=create-html-files class=headerLink><a href=#create-html-files class=header-mark></a>Create HTML files</h3><p>Now it&rsquo;s user-facing HTML template&rsquo;s turn. I created <code>sam-o_xml_api_tester.html</code> file in <code>SAM-O_XML_API_Tester/templates</code> dir leveraging sandbox environment. See, this makes individual script management very convenient, one directory stores em all.</p><p>Following inheritance model this template inherits markup from the <code>content-template.html</code>. As I explained earlier it makes easier to fill in general text information (such as a name of the script, usage guide, author info, etc). Consider this as static or temporary layout for almost every new script.</p><p>/scripts_bank/5620sam/SAM-O_XML_API_Tester/templates/sam-o_xml_api_tester.html:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-html data-lang=html>{% extends &#39;content_template.html&#39; %}
{% block title %}
    New script
{% endblock %}

{% block main_purpose %}
This is just demo for the blog.
{% endblock %}

{% block descr %}
Description TBD...
{% endblock %}

{% block usage %}
It does nothing, <span class=p>&lt;</span><span class=nt>mark</span><span class=p>&gt;</span>for now<span class=p>&lt;/</span><span class=nt>mark</span><span class=p>&gt;</span>
{% endblock %}

{% block limitations %}
My code does not have limitation!
{% endblock %}

{% block author %}
Roman Dodin
{% endblock %}

{% block version %}
0.1
{% endblock %}

{% block tags %}
noshut.ru
{% endblock %}

{% block script_content %}

<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container-fluid&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;col-md-12&#34;</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel panel-default&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-heading&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>h3</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-title&#34;</span><span class=p>&gt;</span>Inputs<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-body&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
            
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel panel-default&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-heading&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>h3</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-title&#34;</span><span class=p>&gt;</span>Output<span class=p>&lt;/</span><span class=nt>h3</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;panel-body&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;output_div&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
{% endblock %}
{% block added_js %}
<span class=c>&lt;!-- nothing here for the moment --&gt;</span>
{% endblock %}
</code></pre></td></tr></table></div></div><h3 id=create--register-a-blueprint class=headerLink><a href=#create--register-a-blueprint class=header-mark></a>Create & register a Blueprint</h3><p>Now it&rsquo;s time to write few lines for back-end part. Create a python file which will hold blueprint for this script we&rsquo;ve been adding and back-end activities:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=c1>#/scripts_bank/_5620sam/sam_xml_api_tester/sam_xml_api_tester.py</span>
<span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>render_template</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>Blueprint</span><span class=p>,</span> <span class=n>jsonify</span>

<span class=c1>###############</span>
<span class=c1>#### FLASK ####</span>
<span class=c1>###############</span>

<span class=n>sam_api_tester_bp</span> <span class=o>=</span> <span class=n>Blueprint</span><span class=p>(</span><span class=s1>&#39;sam_api_tester&#39;</span><span class=p>,</span> <span class=vm>__name__</span><span class=p>,</span> <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>static_folder</span><span class=o>=</span><span class=s1>&#39;static&#39;</span><span class=p>,</span>
                              <span class=n>static_url_path</span><span class=o>=</span><span class=s1>&#39;/sam_xml_api_tester/static&#39;</span><span class=p>)</span>

<span class=nd>@sam_api_tester_bp.route</span><span class=p>(</span><span class=s1>&#39;/sam_xml_api_tester&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
<span class=k>def</span> <span class=nf>sam_api_tester</span><span class=p>():</span>
    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;GET&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;sam_xml_api_tester.html&#39;</span><span class=p>)</span>

    <span class=c1># handle POST method from JQuery (will be filled later)</span>
    <span class=k>elif</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=mi>0</span>
</code></pre></td></tr></table></div></div><p>Register it in the main <code>app.py</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>scripts_bank._5620sam.sam_xml_api_tester.sam_xml_api_tester</span> <span class=kn>import</span> <span class=n>sam_api_tester_bp</span>
<span class=n>app</span><span class=o>.</span><span class=n>register_blueprint</span><span class=p>(</span><span class=n>sam_api_tester_bp</span><span class=p>,</span> <span class=n>url_prefix</span><span class=o>=</span><span class=s1>&#39;/5620sam&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><p>And you are good to go!</p><h2 id=how-to-test-plaza class=headerLink><a href=#how-to-test-plaza class=header-mark></a>How to test PLAZA?</h2><p>Apart from traditional way of cloning a <a href=https://github.com/hellt/PLAZA target=_blank rel="noopener noreffer">repo</a> and building a virtual environment, you can use a <a href=https://hub.docker.com/r/hellt/plaza-demo/ target=_blank rel="noopener noreffer">docker container</a>.</p><h2 id=whats-next class=headerLink><a href=#whats-next class=header-mark></a>What&rsquo;s next?</h2><p>Tons of useful things are missing at the moment - no search, no active tags, no login-based system, no tests, etc. I will probably add some of this features later, but you are welcome to suggest, blame, and pull-request. Yeah, the code <code>as is</code> can be grabbed from <a href=https://github.com/hellt/PLAZA target=_blank rel="noopener noreffer">GitHub</a>.</p></div><footer><div class=post><div class=post-share><div class=share-link><a class="share-icon share-twitter" href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://netdevops.me/2016/04/building-web-front-end-for-python-scripts-with-flask/ data-title="Building Web front end for Python scripts with Flask" data-via=ntdvps data-hashtags=Bootstrap,Flask,Python><span class="svg-social-icon icon-twitter"></span></a></div><div class=share-link><a class="share-icon share-facebook" href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://netdevops.me/2016/04/building-web-front-end-for-python-scripts-with-flask/ data-hashtag=Bootstrap><span class="svg-social-icon icon-facebook"></span></a></div><div class=share-link><a class="share-icon share-linkedin" href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://netdevops.me/2016/04/building-web-front-end-for-python-scripts-with-flask/><span class="svg-social-icon icon-linkedin"></span></a></div></div><div class=post-tags><a href=/tags/bootstrap/ class=tag>bootstrap</a><a href=/tags/flask/ class=tag>Flask</a><a href=/tags/python/ class=tag>python</a></div></div></footer></div><div id=toc-final></div></div></article><aside class=article-post><div class="content-block content-block-position block-donate"><div class=post><div class=title><div style=text-align:center><svg width="90" height="90" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M376 30c-27.783.0-53.255 8.804-75.707 26.168-21.525 16.647-35.856 37.85-44.293 53.268-8.437-15.419-22.768-36.621-44.293-53.268C189.255 38.804 163.783 30 136 30 58.468 30 0 93.417.0 177.514c0 90.854 72.943 153.015 183.369 247.118l62.099 53.414C248.38 480.596 252.12 482 256 482s7.62-1.404 10.532-3.953l62.111-53.425C439.057 330.529 512 268.368 512 177.514 512 93.417 453.532 30 376 30z"/></svg></div><div style=text-align:center;margin-top:20px><span class=title>If any of my work was helpful, you can:</span></div></div><div class=donate-text><ul><li>✉️ Share this post with your colleagues</li><li>💬 Comment, ask questions and report any issues/typos found</li><li>💰 Make a one-time or recurring donation to support my work</li></ul></div><div class=donate-button><a href=https://github.com/sponsors/hellt class="button button-big button-white">Donate</a></div></div></div></aside><section class="page single comments content-block-position"><h1 class=display-hidden>Комментарии</h1><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></section></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.82.0">Hugo</a> | Theme - <a href="https://ublogger.netlify.app/?utm_source=https://netdevops.me/&utm_medium=footer&utm_campaign=config&utm_term=2.0.1" target=_blank title="uBlogger 2.0.1">uBlogger</a></div><div class=footer-line><i class="svg-icon icon-copyright"></i><span>2015 - 2022</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><aside id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="svg-icon icon-arrow-up"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="svg-icon icon-comments-fixed"></i></a></aside><link rel=stylesheet href=/drawio.css><script src=/lib/smooth-scroll/smooth-scroll.min.js></script><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:20},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"comment",lightTheme:"github-light",repo:"hellt/netdevops.me"}},search:{algoliaAppID:"H1AI8QKFEK",algoliaIndex:"blog",algoliaSearchKey:"0544bc3c928ba0e387c3b3353112e43d",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:60,type:"algolia"}}</script><script src=/js/theme.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101537614-1','auto'),ga('send','pageview')</script></body></html>