<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="Applying DevOps to networks." name="description"/><meta content="Roman Dodin" name="author"/><link href="https://netdevops.me/2016/building-web-front-end-for-python-scripts-with-flask/" rel="canonical"/><link href="../../2015/basic-l3vpn-bgpmpls-vpn-or-vprn-configuration-on-nokia-alcatel-lucent-sros-juniper-mx/" rel="prev"/><link href="../bgp-vpls-deep-dive-nokia-sr-os-juniper/" rel="next"/><link href="../../feed_rss_created.xml" rel="alternate" title="RSS feed" type="application/rss+xml"/><link href="../../feed_rss_updated.xml" rel="alternate" title="RSS feed of updated content" type="application/rss+xml"/><link href="../../assets/images/code.svg" rel="icon"/><meta content="mkdocs-1.4.2, mkdocs-material-9.1.4+insiders-4.32.4" name="generator"/><title>Building Web front end for Python scripts with Flask - Applying DevOps to networks</title><link href="../../assets/stylesheets/main.f49c7df4.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.6932e648.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Google Sans";--md-code-font:"Fira Mono"}</style><link href="../../stylesheets/extra.css" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-Y7R34KCT4N"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-Y7R34KCT4N",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-Y7R34KCT4N",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../assets/javascripts/glightbox.min.js"></script></head> <body data-md-color-accent="cyan" data-md-color-primary="white" data-md-color-scheme="default" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#building-web-front-end-for-python-scripts-with-flask"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> <a href="https://twitter.com/ntdvps"> For updates follow <strong>@ntdvps</strong> on <span class="twemoji twitter"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </span> <strong>Twitter</strong> </a> </div> </aside> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="Applying DevOps to networks" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Applying DevOps to networks"> <svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Applying DevOps to networks </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Building Web front end for Python scripts with Flask </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="cyan" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="white" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="cyan" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/hellt/netdevops.me" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class="md-source__repository"> hellt/netdevops.me </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link md-tabs__link--active" href="../.."> Blog </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../tags/"> Tags </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../subscribe/"> Subscribe </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden=""> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="Applying DevOps to networks" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Applying DevOps to networks"> <svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg> </a> Applying DevOps to networks </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/hellt/netdevops.me" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class="md-source__repository"> hellt/netdevops.me </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/> <div class="md-nav__link md-nav__container"> <a class="md-nav__link" href="../.."> <span class="md-ellipsis"> Blog </span> </a> </div> <nav aria-expanded="true" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_1"> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class="md-nav__list" data-md-scrollfix=""> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tags/"> <span class="md-ellipsis"> Tags </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../subscribe/"> <span class="md-ellipsis"> Subscribe </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#tools-technologies"> <span class="md-ellipsis"> Tools &amp; Technologies </span> </a> <nav aria-label="Tools &amp; Technologies" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#front-end"> <span class="md-ellipsis"> Front-end </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#back-end"> <span class="md-ellipsis"> Back-end </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#project-structure-overview"> <span class="md-ellipsis"> Project structure overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuring-flask"> <span class="md-ellipsis"> Configuring Flask </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#setting-up-front-end"> <span class="md-ellipsis"> Setting up front-end </span> </a> <nav aria-label="Setting up front-end" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#layout"> <span class="md-ellipsis"> Layout </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#flask-routes-templates"> <span class="md-ellipsis"> Flask routes &amp; templates </span> </a> <nav aria-label="Flask routes &amp; templates" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#routes"> <span class="md-ellipsis"> Routes </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#templates"> <span class="md-ellipsis"> Templates </span> </a> <nav aria-label="Templates" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#template-inheritance"> <span class="md-ellipsis"> Template inheritance </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#main-template"> <span class="md-ellipsis"> Main template </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#child-template"> <span class="md-ellipsis"> Child template </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#intermediate-templates-and-multiple-inheritances"> <span class="md-ellipsis"> Intermediate templates and multiple inheritances </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#flask-blueprints"> <span class="md-ellipsis"> Flask Blueprints </span> </a> <nav aria-label="Flask Blueprints" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#blueprint-creation"> <span class="md-ellipsis"> Blueprint creation </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#register-a-blueprint"> <span class="md-ellipsis"> Register a blueprint </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#front-end-back-end-data-exchange"> <span class="md-ellipsis"> Front-end&lt;-&gt;back-end data exchange </span> </a> <nav aria-label="Front-end&lt;-&gt;back-end data exchange" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#serializing-input-data"> <span class="md-ellipsis"> Serializing input data </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#sending-serialized-data-to-the-back-end"> <span class="md-ellipsis"> Sending serialized data to the back-end </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#receiving-data-by-the-back-end-and-processing"> <span class="md-ellipsis"> Receiving data by the back-end and processing </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#passing-the-results-back-to-the-front-end"> <span class="md-ellipsis"> Passing the results back to the front-end </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#adding-new-script-is-easy"> <span class="md-ellipsis"> Adding new script is easy </span> </a> <nav aria-label="Adding new script is easy" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#create-the-file-structure"> <span class="md-ellipsis"> Create the file structure </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#create-html-files"> <span class="md-ellipsis"> Create HTML files </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#create-register-a-blueprint"> <span class="md-ellipsis"> Create &amp; register a Blueprint </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#how-to-test-plaza"> <span class="md-ellipsis"> How to test PLAZA? </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#whats-next"> <span class="md-ellipsis"> What's next? </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component="content"> <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner md-post"> <nav class="md-nav"> <div class="md-post__back"> <div class="md-nav__title md-nav__container"> <a class="md-nav__link" href="../.."> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> <span class="md-ellipsis"> Back to index </span> </a> </div> </div> <div class="md-post__authors md-typeset"> <div class="md-profile md-post__profile"> <span class="md-author md-author--long"> <img alt="Roman Dodin" src="https://avatars.githubusercontent.com/u/5679861"/> </span> <span class="md-profile__description"> <strong>Roman Dodin</strong><br/> Network Automater </span> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__title"> <div class="md-nav__link"> <span class="md-ellipsis"> Metadata </span> </div> </li> <li class="md-nav__item"> <div class="md-nav__link"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"></path></svg> <time class="md-ellipsis" datetime="2016-04-01 00:00:00">April 1, 2016</time> </div> </li> <li class="md-nav__item"> <div class="md-nav__link"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"></path></svg> <span class="md-ellipsis"> 22 min read </span> </div> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <nav class="md-tags"> <a class="md-tag" href="../../tags/#bootstrap">bootstrap</a> <a class="md-tag" href="../../tags/#flask">flask</a> <a class="md-tag" href="../../tags/#python">python</a> </nav> <h1 id="building-web-front-end-for-python-scripts-with-flask">Building Web front end for Python scripts with Flask<a class="headerlink" href="#building-web-front-end-for-python-scripts-with-flask" title="Permanent link">#</a></h1> <p>Recently I revived my relationship with Python in an effort to tackle the routine tasks appearing here and there. So I started to write some <em>pocket scripts</em> and, luckily, was not the only one on this battlefield - my colleagues also have a bunch of useful scripts. With all those code snippets sent in the emails, cloned from the repos, grabbed on the network shares... I started to wonder how much easier would it be if someone had them all aggregated and presented with a Web UI for a shared access?</p> <p>Thus, I started to build web front-end to the python scripts we used daily with these goals in mind:</p> <ul> <li>allow people with a zero knowledge of Python to use the scripts by interacting with them through a simple Web UI;</li> <li>make script's output more readable by leveraging CSS and HTML formatting;</li> <li>aggregate all the scripts in one a single repo but in a separate sandboxed directories to maintain code manageability.</li> </ul> <p>This short demo should give you some taste of what it is:</p> <p><center><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/KzOFlFYucvM" title="YouTube video player" width="560"></iframe></center></p> <p><strong>Disclaimer:</strong> I am nowhere near even a professional python or web developer. And what makes it even worse is that I used (a lot) a very dangerous coding paradigm - SDD - Stack Overflow Driven Development. So, hurt me plenty if you see some awful mistakes.</p> <p><a href="https://github.com/hellt/PLAZA">Project source code</a></p> <!-- more --> <p><strong>PLAZA</strong> (this is the name I gave this project) implements a straightforward user experience flow: a user opens a web page, selects a script from the menu, fills in the necessary input data and run a script to get the results back.</p> <p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88707_2e87ef65_orig.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88707_2e87ef65_orig.png"/></a></p> <p>By hitting <code>submit</code> data goes to the back-end part, where the chosen python script does it's noble job and produces some data. This data gets pushed back to the browser and as displayed to a user.</p> <p>Obviously, one will need some front-end technologies to build the web layer and some back-end to process the incoming data.</p> <h2 id="tools-technologies">Tools &amp; Technologies<a class="headerlink" href="#tools-technologies" title="Permanent link">#</a></h2> <h3 id="front-end">Front-end<a class="headerlink" href="#front-end" title="Permanent link">#</a></h3> <p>To build a fairly fresh-looking (<em>fresh</em> as in 2016yr), dynamic web view we need a web framework to leverage. I used <a href="http://getbootstrap.com">Bootstrap</a> package (CSS and JS) as it is well documented and have tons of implementations and examples.</p> <p>What tastes good with Bootstrap - <a href="http://jquery.com">JQuery</a>, of course. JQuery was used to handle AJAX response/request messages between the front-end and the back-end without reloading the whole page. Since I had no previous experience with both of these technologies, I heavily used everything google served me. Here is my list of useful resources I found noteworthy:</p> <ol> <li><a href="http://www.layoutit.com/build#">Layoutit.com</a> - there you can create Bootstrap grid and play with elements in a drag and drop fashion. Load the result in a zip file and your grid system is almost ready.</li> <li><a href="http://www.bootply.com/new?visual=1">Bootply.com</a> - visual builder for Bootstrap layout. It has some good examples which cover basic Bootstrap elements behavior (navbar, grid rules, etc).</li> <li><a href="http://1000hz.github.io/bootstrap-validator/">Form validator by 1000hz</a> - well, it's a form validator. And since every script needs to get input data from a user, form validation is a must-have for a sleek user experience.</li> <li><a href="http://bootsnipp.com/">Bootsnipp.com</a> - crowdsource collection of snippets written with Bootstrap. I grabbed my side menu from it. Another useful section from this site is <a href="http://bootsnipp.com/forms">Form Builder</a>.</li> <li><a href="https://formden.com/form-builder/">Formden</a> - another form builder.</li> </ol> <h3 id="back-end">Back-end<a class="headerlink" href="#back-end" title="Permanent link">#</a></h3> <p>The heavy lifting in the back is done by the gorgeous <a href="http://flask.pocoo.org/">Flask</a>, which is a micro framework for writing web applications. It includes a web-server, <a href="http://jinja.pocoo.org/docs/dev/">Jinja2</a> templating engine and lots of features to make back-end easy even for dummies like me.</p> <p>As to the Flask related resources I cherry-picked the following:</p> <ol> <li><a href="http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world">Famous Flask Mega Tutorial by Miguel Grinberg</a></li> <li><a href="https://github.com/realpython/discover-flask">Discover Flask</a> - A full season of youtube videos from Michael Herman</li> <li><a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#quickstart">Official documentation</a> of course!</li> <li>Another good post on <a href="http://www.giantflyingsaucer.com/blog/?p=4310">AJAX+Flask interaction</a> from giantflyingsaucer.com</li> </ol> <h2 id="project-structure-overview">Project structure overview<a class="headerlink" href="#project-structure-overview" title="Permanent link">#</a></h2> <p>Having frameworks set and tools figured out I started to outline the project's high-level structure.</p> <p>Flask maintains a simple yet flexible project structure. In my case, I didn't deviate far away from a basic setup, since the overall simplicity is one of the project's objectives.</p> <div class="highlight"><pre><span></span><code>├──<span class="w"> </span>app.py<span class="w">        </span><span class="c1"># Flask application</span>
├──<span class="w"> </span>config.py<span class="w">     </span><span class="c1"># Flask configuration</span>
├──<span class="w"> </span>.env<span class="w">          </span><span class="c1"># env variables for dev/prod environments</span>
├──<span class="w"> </span>scripts_bank<span class="w">  </span><span class="c1"># directory to store all python scripts we're going to use via Web</span>
├──<span class="w"> </span>static<span class="w">        </span><span class="c1"># static data for Bootstrap CSS, JS, custom fonts, etc</span>
│<span class="w">   </span>├──<span class="w"> </span>css
│<span class="w">   </span>├──<span class="w"> </span>fonts
│<span class="w">   </span>└──<span class="w"> </span>js
├──<span class="w"> </span>templates<span class="w">     </span><span class="c1"># HTML templates used to render pages&lt;/pre&gt;</span>
</code></pre></div> <p>Although the comments above give enough information about the structure, let's go into details a bit</p> <ol> <li>Flask application - <code>app.py</code> - is an entry point for the whole project. It starts the web-server, loads the <code>routes</code> (aka links to the pages of your web project) and plugs in python scripts stored in the <code>scripts_bank</code> directory.</li> <li>As every other app, Flask app should be configured differently for development and production. This is done via the <code>config.py</code> and the environment variables <code>.env</code> file.</li> <li>In the <code>static</code> directory you normally store your CSS, JS, pictures, custom fonts. So did I.</li> <li>HTML pages are in the <code>templates</code> directory.</li> <li>And the pythonic scripts with all the relevant files (unique HTML templates for input forms, additional front-end Javascript code, etc) are living inside the <code>scripts_bank</code> directory.</li> </ol> <h2 id="configuring-flask">Configuring Flask<a class="headerlink" href="#configuring-flask" title="Permanent link">#</a></h2> <p>Once you have Flask installed and got familiar with its basics (either through official quick start guide or tons of tutorials) it is time to configure it. There are <a href="https://flask.palletsprojects.com/en/1.1.x/config/">several</a> <a href="https://exploreflask.com/configuration.html">ways</a> to configure a Flask application. The basic one is to specify the configuration statements as the arguments to your <code>app</code> instance:</p> <div class="highlight"><pre><span></span><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1">## pass secret_key and SQLAlchemy params</span>
<span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">'test'</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">SQLALCHEMY_DATABASE_URI</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'sqlite:///db/sql.db'</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>     <span class="c1">## pass DEBUG param&lt;/pre&gt;</span>

<span class="n">A</span> <span class="n">bit</span> <span class="n">more</span> <span class="n">advanced</span> <span class="n">way</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">specify</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">config</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="n">uppercase</span> <span class="ow">in</span> <span class="n">your</span> <span class="err">`</span><span class="n">app</span><span class="o">.</span><span class="n">py</span><span class="err">`</span> <span class="ow">and</span> <span class="n">tell</span> <span class="n">the</span> <span class="err">`</span><span class="n">app</span><span class="err">`</span> <span class="n">instance</span> <span class="n">to</span> <span class="n">get</span> <span class="n">config</span> <span class="kn">from</span> <span class="nn">this</span> <span class="n">file</span><span class="p">:</span>

<span class="err">```</span><span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">'yekterces'</span>
<span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s1">'sqlite:///db/sql.db'</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>   <span class="c1"># get config from this module&lt;/pre&gt;</span>
</code></pre></div> <p>But the methods discussed so far can't let you have different configurations for Dev and Prod environments (which you'd want to have eventually).</p> <p>When I was choosing the configuration method for this app I followed a path which consists of these three key points:</p> <ol> <li>creating configuration classes for different environments using inheritance (explained <a href="https://flask.palletsprojects.com/en/1.1.x/config/#development-production">here</a>)</li> <li>choosing the right configuration class based on the current value of the environment variable</li> <li>storing environment variables in a file (<code>.env</code>) and parsing its contents for parameters (<a href="https://stackoverflow.com/questions/21538859/pycharm-set-environment-variable-for-run-manage-py-task/29546356#29546356">more here</a>)</li> </ol> <blockquote> <p><strong>Detailed explanation of Flask app configuration</strong></p> <p>Going from bottom to top, <code>.env</code> is a file, which stores application parameters in a way like classic environment variables do.</p> <div class="highlight"><pre><span></span><code><span class="c1"># This file is used to store configuration settings for</span>
<span class="c1"># Dev and Prod environments. PLAZA_SETTINGS value is used by app.py to</span>
<span class="c1"># properly detect which configuration class to use</span>

<span class="c1"># uncomment/modify desired section prior to use</span>

<span class="c1"># dev</span>
<span class="nv">PLAZA_SETTINGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>config.Development<span class="w"> </span>

<span class="c1"># prod</span>
<span class="c1"># PLAZA_SETTINGS = config.Production</span>
<span class="c1"># HOST = 0.0.0.0&lt;/pre&gt;</span>
</code></pre></div> <p>Then Flask application initializes and gets configuration from a class, stored in <code>PLAZA_SETTINGS</code> variable:</p> <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">config</span>

<span class="n">root_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>

<span class="c1"># get env_settings list</span>
<span class="n">env_settings</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">EnvironmentSettings</span><span class="p">(</span><span class="n">root_folder_path</span><span class="p">)</span>

<span class="c1"># initialize Flask app</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># configure Flask app from a class, stored in PLAZA_SETTINGS variable</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">env_settings</span><span class="p">[</span><span class="s1">'PLAZA_SETTINGS'</span><span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
   <span class="c1"># if we are in Prod, use HOST and PORT specified</span>
   <span class="k">try</span><span class="p">:</span>
       <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">env_settings</span><span class="p">[</span><span class="s1">'HOST'</span><span class="p">]),</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
   <span class="k">except</span> <span class="n">config</span><span class="o">.</span><span class="n">ConfigurationError</span><span class="p">:</span>
       <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</code></pre></div> <p>Functions subject to configuration along with configuration classes are stored in the <code>config.py</code> file:</p> <div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>


<span class="c1"># default config class</span>
<span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">'your_secret'</span>


<span class="k">class</span> <span class="nc">Development</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">class</span> <span class="nc">Production</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>


<span class="k">class</span> <span class="nc">EnvironmentSettings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Access to environment variables via system os or .env file for different environments (Prod vs Dev)</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_folder_path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root_folder_path</span> <span class="o">=</span> <span class="n">root_folder_path</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_env_variable</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">InvalidOperationException</span><span class="p">(</span><span class="s1">'Environment Settings are read-only'</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">InvalidOperationException</span><span class="p">(</span><span class="s1">'Environment Settings are read-only'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_env_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Get the environment variable or return exception</span>
<span class="sd">        :param var_name: Environment Variable to lookup</span>
<span class="sd">        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
            <span class="kn">from</span> <span class="nn">configparser</span> <span class="kn">import</span> <span class="n">ConfigParser</span>

            <span class="n">env_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'PROJECT_ENV_FILE'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_folder_path</span> <span class="o">+</span> <span class="s2">"/.env"</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"[DATA]</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">env_file</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">config</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
                <span class="n">cp</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
                <span class="n">cp</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">cp</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="s1">'DATA'</span><span class="p">))[</span><span class="n">var_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'"'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'"'</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"'"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"'"</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">var_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">IOError</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">default</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="s2">"Either set the env variable '</span><span class="si">{var}</span><span class="s2">' or place it in your "</span> \
                            <span class="s2">"</span><span class="si">{env_file}</span><span class="s2"> file as '</span><span class="si">{var}</span><span class="s2"> = VALUE'"</span>
                <span class="k">raise</span> <span class="n">ConfigurationError</span><span class="p">(</span><span class="n">error_msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">var_name</span><span class="p">,</span> <span class="n">env_file</span><span class="o">=</span><span class="n">env_file</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">ConfigurationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">InvalidOperationException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div> </blockquote> <h2 id="setting-up-front-end">Setting up front-end<a class="headerlink" href="#setting-up-front-end" title="Permanent link">#</a></h2> <p>Good, Flask app has been configured and is ready to render some pages, so let's go and prepare out front-end to display projects' web pages. Download <a href="http://getbootstrap.com">Bootstrap</a>, <a href="http://jquery.com">JQuery</a>, <a href="https://fontawesome.com/">Fontawesome</a> and store theirs minified <code>min.css</code> and <code>min.js</code> artifacts in the <code>static</code> directory of the project. This is how it should look like:</p> <div class="highlight"><pre><span></span><code>├──<span class="w"> </span>static
│<span class="w">   </span>├──<span class="w"> </span>css
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>bootstrap.min.css
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>font-awesome.min.css
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>style.css<span class="w">  </span><span class="c1"># custom styles css for every page</span>
│<span class="w">   </span>├──<span class="w"> </span>fonts
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>FontAwesome.otf
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>NokiaPureHeadline_ExtraBold.ttf<span class="w">  </span><span class="c1"># custom fonts like this also live here</span>
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>fontawesome-webfont.eot
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>fontawesome-webfont.svg
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>fontawesome-webfont.ttf
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>fontawesome-webfont.woff
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>fontawesome-webfont.woff2
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>glyphicons-halflings-regular.eot
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>glyphicons-halflings-regular.svg
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>glyphicons-halflings-regular.ttf
│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>glyphicons-halflings-regular.woff
│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>glyphicons-halflings-regular.woff2
│<span class="w">   </span>└──<span class="w"> </span>js
│<span class="w">       </span>├──<span class="w"> </span>bootstrap.min.js
│<span class="w">       </span>├──<span class="w"> </span>jquery-2.2.0.min.js
│<span class="w">       </span>├──<span class="w"> </span>loadingoverlay.min.js<span class="w">  </span><span class="c1"># CSS for overlay animation. </span>
│<span class="w">       </span>├──<span class="w"> </span>scripts.js<span class="w">             </span><span class="c1"># custom JS scripts </span>
│<span class="w">       </span>└──<span class="w"> </span>validator.min.js<span class="w">       </span><span class="c1"># form validation JS code</span>
</code></pre></div> <h3 id="layout">Layout<a class="headerlink" href="#layout" title="Permanent link">#</a></h3> <p>Before diving into HTML it is advised to think about pages layout. I recommend you to get familiar with <a href="https://getbootstrap.com/css/">Bootstrap CSS rules</a> and choose a layout that fits your project. I decided to go with a 3+9 scheme. Three parts are for side menu and nine parts are for a content area with a navigation bar at the top of the page.</p> <p>I composed a sketch of the page depicting how I would like to see my projects web view for an arbitrary script:</p> <p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/124786/21639405.11c/0_88708_57e30946_XL.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/124786/21639405.11c/0_88708_57e30946_XL.png"/></a></p> <p>Follow the <a href="http://codepen.io/hellt/pen/PNJwxq">link</a> to see my script's page template on codepen and see how things interact. Do not worry if you can't pick rock solid layout right now, you will be able to modify it on-the-fly and decide what suits your needs better.</p> <h2 id="flask-routes-templates">Flask routes &amp; templates<a class="headerlink" href="#flask-routes-templates" title="Permanent link">#</a></h2> <h3 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">#</a></h3> <p>Flask uses <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#routing">routes</a> to create URL's for the web pages. If we need to show the main page for example for the URL <code>abc.com</code> we need to define the root route - <code>/</code> - like this:</p> <div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">'Index Page'</span>
</code></pre></div> <p>This will effectively bind the <code>index()</code> function to the route <code>/</code> , so when a user navigates to the application's root it will trigger the <code>index()</code> function.</p> <div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'index.html'</span><span class="p">)</span>
</code></pre></div> <p>My <code>index()</code> function does one simple thing, it asks Flask to render specific template - <code>index.html</code>.</p> <h3 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">#</a></h3> <p>You might guess that a <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#rendering-templates">template</a> has to do something with the HTML content rendered by a browser. Yes, it has, but it is far more powerful than a static HTML file.</p> <blockquote> <p>Generating HTML from within Python is not fun, and actually pretty cumbersome because you have to do the HTML escaping on your own to keep the application secure. Because of that Flask configures the <a href="https://jinja.palletsprojects.com/en/2.11.x/">Jinja2</a> template engine for you automatically.</p> </blockquote> <p>So Flask's template is a Jinja2-based template which allows you to build <strong>dynamic</strong> web-pages instead of a static content. To render a template you can use the <a href="http://flask.pocoo.org/docs/1.0/api/#flask.render_template"><code>render_template()</code></a> method. All you have to do is to provide the name of the template and the variables you want to pass to the template engine.</p> <p>You can name your templates as you like, but normally it will have an <code>.html</code> extension to reflect their purpose. This is my <code>index.html</code> template mentioned earlier bound to the route <code>/</code>.</p> <div class="highlight"><pre><span></span><code>{% extends 'base.html' %}
{% block content %}
 <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span> Welcome to <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-primary"</span><span class="p">&gt;</span>PLAZA<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>. <span class="p">&lt;</span><span class="nt">small</span><span class="p">&gt;</span>front-end for python scripts we used to run from console<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-primary"</span><span class="p">&gt;</span>
  What is PLAZA?
 <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">p</span> <span class="p">&gt;</span>
  PLAZA is a web front-end to python scripts built with these goals in mind:
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>allow people with zero python knowledge to use the scripts by interaction through simple Web GUI;<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>beautify scripts' output with modern CSS and HTML formatting;<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>aggregate all the scripts in one repo but in a separate sandboxed directories to increase code manageability.<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-primary"</span><span class="p">&gt;</span>
  How to use?
 <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">p</span> <span class="p">&gt;</span>
  Navigate through the side menu to the desired script and follow the instructions.
 <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-primary"</span><span class="p">&gt;</span>
  Contacts
 <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">p</span> <span class="p">&gt;</span>
  Have any ideas, questions, problems? Visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/contacts"</span><span class="p">&gt;</span>contacts<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> page for all the details.
 <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endblock %}
</code></pre></div> <p>And this is how it gets rendered:</p> <p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88709_76038afa_orig.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_88709_76038afa_orig.png"/></a></p> <p><a href="http://codepen.io/hellt/pen/ONjwYY">Dynamic version</a> of the index page can be found on the codepen as well. The trick behind that magic <code>template-&gt;rendered page</code> transformation is in the first two lines. This is <a href="https://flask.palletsprojects.com/en/1.1.x/patterns/templateinheritance/">template inheritance</a> magic - <code>{% extends 'base.html' %}</code> - and that is what makes templating so powerful.</p> <h4 id="template-inheritance">Template inheritance<a class="headerlink" href="#template-inheritance" title="Permanent link">#</a></h4> <p>Inheritance drill <a href="https://flask.palletsprojects.com/en/1.1.x/patterns/templateinheritance/">described briefly</a> in the official documentation and the main part of it sounds like this:</p> <blockquote> <p>Template inheritance allows you to build a base “skeleton” template that contains all the common elements of your site and defines <strong>blocks</strong> that child templates can override.</p> </blockquote> <p>Apart from the official docs, you can watch <a href="https://www.youtube.com/watch?v=hNzruwVPtCE&amp;feature=youtu.be">this video</a> from the <em>“Discover Flask”</em> series to better understand how does template inheritance work.</p> <h4 id="main-template">Main template<a class="headerlink" href="#main-template" title="Permanent link">#</a></h4> <p>One of the best practices regarding template inheritance is to compose a <code>base template</code> or a layout for the whole site so every other template will inherit from it. My "main" template is called <code>base.html</code> and it describes the logical parts for each page in this project.</p> <p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_8870a_f83ca7b_orig.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/28982/21639405.11c/0_8870a_f83ca7b_orig.png"/></a></p> <p>The main template consists of the static parts like Navbar, side menu, it also connects core CSS, JS and fonts. And finally, it specifies where would child template's content be placed.</p> <div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="p">&lt;</span><span class="nt">HTML</span> <span class="na">lang</span><span class="o">=</span><span class="s">"en"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content</span><span class="o">=</span><span class="s">"IE=edge"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>PLAZA Project<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"description"</span> <span class="na">content</span><span class="o">=</span><span class="s">"NOKIA Launchpad for scripts"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"author"</span> <span class="na">content</span><span class="o">=</span><span class="s">"Roman Dodin"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">"/static/css/bootstrap.min.css"</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">"/static/css/style.css"</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span><span class="p">&gt;</span> <span class="cm">&lt;!-- custom CSS --&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">"/static/css/font-awesome.min.css"</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- NAV BAR --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"navbar navbar-nokia navbar-fixed-top"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"navbar-header"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"navbar-toggle"</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"collapse"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">".navbar-collapse"</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"icon-bar"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"navbar-brand"</span> <span class="na">href</span><span class="o">=</span><span class="s">"/"</span><span class="p">&gt;</span>PLAZA<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"collapse navbar-collapse"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav navbar-nav"</span><span class="p">&gt;</span>

                        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#contact"</span><span class="p">&gt;</span>Contact<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                           <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#modalSearch"</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"modal"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">"#modalSearch"</span><span class="p">&gt;</span>
                               Search <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">"searchGlyph"</span> <span class="na">class</span><span class="o">=</span><span class="s">"glyphicon glyphicon-search"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                           <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                       <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="cm">&lt;!--/.nav-collapse --&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- NAV BAR --&gt;</span>


        <span class="cm">&lt;!-- Search Modal (http://www.w3schools.com/bootstrap/bootstrap_modal.asp) --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"modalSearch"</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal fade"</span> <span class="na">role</span><span class="o">=</span><span class="s">"dialog"</span><span class="p">&gt;</span>
           <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-dialog modal-lg"</span><span class="p">&gt;</span>

               <span class="cm">&lt;!-- Modal content--&gt;</span>
               <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-content"</span><span class="p">&gt;</span>
                   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-header"</span><span class="p">&gt;</span>
                       <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"modal"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                       <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-title"</span><span class="p">&gt;</span>Search PLAZA (under development)<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
                   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-body"</span><span class="p">&gt;</span>
                       <span class="cm">&lt;!-- Add the modal body here --&gt;</span>
                   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"modal-footer"</span><span class="p">&gt;</span>
                       <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-default"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"modal"</span><span class="p">&gt;</span>Close<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
               <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
           <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-md-3"</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav-side-menu"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"brand"</span><span class="p">&gt;</span>MENU<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-bars fa-3x toggle-btn"</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"collapse"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">"#menu-content"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>

                    <span class="cm">&lt;!-- START OF SIDE MENU AREA--&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"menu-list"</span><span class="p">&gt;</span>
                      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">"menu-content"</span> <span class="na">class</span><span class="o">=</span><span class="s">"menu-content collapse out"</span><span class="p">&gt;</span>
                          <span class="cm">&lt;!-- PLACEHOLDER FOR ELEMENT W/O CHILDREN</span>
<span class="cm">                          &lt;li&gt;</span>
<span class="cm">                              &lt;a href="#"&gt;</span>
<span class="cm">                                  &lt;i class="fa fa-angle-right fa-fw"&gt;&lt;/i&gt;Element wo children</span>
<span class="cm">                              &lt;/a&gt;</span>
<span class="cm">                          &lt;/li&gt;</span>
<span class="cm">                          --&gt;</span>

                          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"collapse"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">"#5620sam"</span> <span class="na">class</span><span class="o">=</span><span class="s">"collapsed"</span><span class="p">&gt;</span>
                              <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span><span class="p">&gt;</span>
                                  <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-double-right fa-fw chevron-rotate"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>5620 SAM
                              <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                              <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-menu collapse out"</span> <span class="na">id</span><span class="o">=</span><span class="s">"5620sam"</span><span class="p">&gt;</span>
                                  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-right fa-fw"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/5620SAM/SAM-O_XML_API_Tester"</span><span class="p">&gt;</span>
                                          SAM-O XML API Test Engine
                                      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                                  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                              <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

                          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"collapse"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">"#vmware"</span> <span class="na">class</span><span class="o">=</span><span class="s">"collapsed"</span><span class="p">&gt;</span>
                              <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span><span class="p">&gt;</span>
                                  <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-double-right fa-fw chevron-rotate"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>VMWare
                              <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                              <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-menu collapse out"</span> <span class="na">id</span><span class="o">=</span><span class="s">"vmware"</span><span class="p">&gt;</span>
                                  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-right fa-fw"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/vmware/get_vmrc_links"</span><span class="p">&gt;</span>
                                          VMRC Link Composer
                                      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                                  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

                                  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">data-toggle</span><span class="o">=</span><span class="s">"collapse"</span> <span class="na">data-target</span><span class="o">=</span><span class="s">"#products2"</span> <span class="na">class</span><span class="o">=</span><span class="s">"collapsed"</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-double-right fa-fw chevron-rotate"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span><span class="p">&gt;</span>Placeholder-sublevel1
                                      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                                  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                                      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-sub-menu collapse out"</span> <span class="na">id</span><span class="o">=</span><span class="s">"products2"</span><span class="p">&gt;</span>
                                          <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"sub-level2"</span><span class="p">&gt;</span>
                                              <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"fa fa-angle-right fa-fw"</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
                                              <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span><span class="p">&gt;</span>
                                                  Placeholder-sublevel2
                                              <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                                          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                                      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
                              <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
                      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="cm">&lt;!-- END OF SIDE MENU AREA --&gt;</span>
                <span class="cm">&lt;!-- START OF CONTENT AREA --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-md-9"</span><span class="p">&gt;</span>
                    {% block content %}{% endblock %}
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="cm">&lt;!-- END OF CONTENT AREA --&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/js/jquery-2.2.0.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/js/bootstrap.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/js/scripts.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>            <span class="cm">&lt;!-- custom JS --&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/js/validator.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>      <span class="cm">&lt;!-- https://github.com/1000hz/bootstrap-validator --&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"/static/js/loadingoverlay.min.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span> <span class="cm">&lt;!-- http://gasparesganga.com/labs/jquery-loading-overlay/--&gt;</span>
        {% block added_js %}{% endblock %}                       <span class="cm">&lt;!-- block for JS added on pages on demand --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">HTML</span><span class="p">&gt;</span>
</code></pre></div> <p>I marked the lines on which child template insertion occurs. Once again, read the docs on templating, read some blogs and you will catch it quickly.</p> <h4 id="child-template">Child template<a class="headerlink" href="#child-template" title="Permanent link">#</a></h4> <p>Once you have the base template figured out you are ready to create it's successors - child templates. A while back I showed you the <code>/templates/index.html</code> template where the following construct</p> <div class="highlight"><pre><span></span><code>{% extends 'base.html' %}
{% block content %}
 <span class="cm">&lt;!-- SOME HTML HERE --&gt;</span>
{% endblock %}
</code></pre></div> <p>effectively told Flask to extend <code>base.html</code> content section with some code relevant to this particular <code>index.html</code> page.</p> <h4 id="intermediate-templates-and-multiple-inheritances">Intermediate templates and multiple inheritances<a class="headerlink" href="#intermediate-templates-and-multiple-inheritances" title="Permanent link">#</a></h4> <p>It is also possible to inherit more than once. See what I did for the pages with actual python scripts input and output forms:</p> <p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/25939/21639405.11c/0_8870b_aa304b21_orig.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/25939/21639405.11c/0_8870b_aa304b21_orig.png"/></a></p> <p>As you will see shortly after - my user-facing scripts' page has some static sections like <em>Description</em>, <em>Usage</em>, <em>Limitations</em>, <em>Author</em> , etc. Normally, all of these sections will appear on every page thus it would be nice to move all this <strong>static and repetitious</strong> content to a separate template.</p> <p>That's how <code>content_template.html</code> was born. In this template I define blocks with names corresponding to the static sections.</p> <p>The last bit of this puzzle is the template <code>&lt;script_name&gt;.html</code> which extends <code>content_template.html</code> and fills in all the data into blocks defined in his parent template. This template will be spawned each time a new script will be added. In the example below I demo the template called <code>get_vmrc_links.html</code> that is used for a particular script.</p> <p><code>Content_template.html</code>:</p> <div class="highlight"><pre><span></span><code>{% extends 'base.html' %}
{% block content %}

<span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-primary"</span><span class="p">&gt;</span>
    {% block title %}{% endblock %}
<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"lead"</span> <span class="p">&gt;</span>
    {% block main_purpose %}{% endblock %}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
    Description
<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{% block descr %}{% endblock %}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
    Usage
<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{% block usage %}{% endblock %}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>


<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
    Limitations
<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{% block limitations %}{% endblock %}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="cm">&lt;!-- Author and info block --&gt;</span>
<span class="p">&lt;</span><span class="nt">small</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dl</span> <span class="na">class</span><span class="o">=</span><span class="s">"dl-horizontal"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Author<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{% block author %}{% endblock %}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Version<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{% block version %}{% endblock %}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Tags<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{% block tags %}{% endblock %}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>

    {% block script_content %}<span class="cm">&lt;!-- Custom HTML for scrip --&gt;</span>{% endblock %}

{% endblock %}

{% block added_js %}<span class="cm">&lt;!-- Custom JavaScript for a script page--&gt;</span>{% endblock %}<span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
</code></pre></div> <p><code>templates/get_vmrc_links.html</code>:</p> <div class="highlight"><pre><span></span><code>{% extends 'content_template.html' %}
{% block title %}
    VMRC Links Composer
{% endblock %}


{% block main_purpose %}
This script composes clickable links for VMWare Remote Console (VMRC) standalone client along with basic info
about VMs on a ESXi host or vCenter.
{% endblock %}


{% block descr %}
It became quite a pain to get Web-based console working on ESXi hosts or vCenter servers (&lt;=v.5.5) with
&lt;a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2114800"&gt;deprecation of NPAPI&lt;/a&gt;
plugins in modern browsers. An easy method to get a remote console access would be to use a standalone
&lt;a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2091284"&gt;Virtual Machine Remote Console client (VMRC)&lt;/a&gt;
which is available for free for major OSes.
&lt;p&gt;For standalone VMRC client to work a special link has to be composed - &lt;br/&gt;i.e. &lt;code&gt;vmrc://root@172.17.255.254:443/?moid=vm-13&lt;/code&gt;&lt;/p&gt;
This script generates such links and is based on an appropriate &lt;a href="http://noshut.ru/2016/01/getting-vmrc-links-with-python/"&gt;console version&lt;/a&gt;.

{% endblock %}


{% block usage %}
Script works both with independent ESXi hosts and managed by vCenter. Select desired entity from the
&lt;code&gt;Known hosts&lt;/code&gt; select element or specify ESXi/vCenter IP address along with
credentials of the user with root privileges and you are good to go.
{% endblock %}


{% block limitations %}
In rare cases the script couldn't compose the whole link, in that case use the &lt;code&gt;moID&lt;/code&gt; value specified in the
output section to compose VMRC link manually.
{% endblock %}


{% block author %}
Roman Dodin
{% endblock %}


{% block version %}
0.1
{% endblock %}


{% block tags %}
VMWare, VMRC
{% endblock %}


{% block script_content %}

&lt;div class="container-fluid"&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-12"&gt;
            &lt;div class="panel panel-default"&gt;
                &lt;div class="panel-heading"&gt;
                    &lt;h3 class="panel-title"&gt;Inputs&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div class="panel-body"&gt;


                    &lt;!-- FORM --&gt;
                    &lt;form data-toggle="validator" role="form" method="post"&gt; &lt;!-- validation form http://1000hz.github.io/bootstrap-validator/ --&gt;

                        &lt;div class="form-group col-md-12"&gt;
                            &lt;label class="control-label" for="known_hosts_select"&gt;
                                Known hosts
                            &lt;/label&gt;
                            &lt;select class="form-control" id="known_hosts_select"&gt;
                              &lt;option&gt;-- List of known hosts --&lt;/option&gt;
                              &lt;option ip="172.17.255.254" login="root" pass="test_pass"&gt;vCenter (172.17.255.254) -- vCenter&lt;/option&gt;
                              &lt;option ip="172.17.255.253" login="root" pass="test_pass"&gt;ESXi (172.17.255.253) -- ESXi host&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group col-md-12"&gt;
                            &lt;label class="control-label requiredField" for="vmware_ip_addr"&gt;
                                ESXi/vCenter IP address
                            &lt;/label&gt;
                            &lt;input class="form-control" type="text"
                                   pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                   id="vmware_ip_addr" name="vmware_ip_addr" placeholder="i.e. 172.17.255.255"
                                   data-error="How did you pass NRS I? it's not a valid IP address" /&gt;
                            &lt;div class="help-block with-errors"&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="form-group col-md-6"&gt;
                            &lt;label class="control-label requiredField" for="vmware_login"&gt;Login
                            &lt;/label&gt;
                            &lt;input class="form-control" id="vmware_login" name="vmware_login" placeholder="root" type="text" required/&gt;
                        &lt;/div&gt;
                        &lt;div class="form-group col-md-6"&gt;
                            &lt;label class="control-label requiredField" for="vmware_pass"&gt;Password
                            &lt;/label&gt;
                            &lt;input class="form-control"  id="vmware_pass" name="vmware_pass"
                                   placeholder="password" type="password" required/&gt;
                        &lt;/div&gt;
                        &lt;div class="form-group col-md-12"&gt;
                            &lt;div&gt; &lt;!-- RD: type="submit" changed to button, since JQuery is in use --&gt;
                                &lt;button class="btn btn-primary" id="submit_form" name="submit" type="button"&gt;
                                    Submit
                                &lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- OUTPUT SECTION --&gt;
            &lt;div class="panel panel-default"&gt;
                &lt;div class="panel-heading"&gt;
                    &lt;h3 class="panel-title"&gt;Output&lt;/h3&gt;
                &lt;/div&gt;
                &lt;div class="panel-body" id="output_div"&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- END OF OUTPUT SECTION --&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
{% endblock %}
{% block added_js %}
&lt;script src="{{ url_for('get_vmrc_links.static', filename='get_vmrc_links.js') }}"&gt;&lt;/script&gt;
{% endblock %}
</code></pre></div> <p>Rendered page: <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://img-fotki.yandex.ru/get/47284/21639405.11c/0_8870c_6ef455c8_orig.png"><img alt="pic" src="https://img-fotki.yandex.ru/get/47284/21639405.11c/0_8870c_6ef455c8_orig.png"/></a></p> <p>Dynamic template: <a href="http://codepen.io/hellt/pen/PNJwxq">http://codepen.io/hellt/pen/PNJwxq</a></p> <h2 id="flask-blueprints">Flask Blueprints<a class="headerlink" href="#flask-blueprints" title="Permanent link">#</a></h2> <p>Another project's major building block is <a href="https://flask.palletsprojects.com/en/1.1.x/blueprints/">Blueprint</a>. Blueprints are important and actually making it possible to isolate various scripts in their appropriate sandboxes. And by sandbox I mean separate directory which hosts all the files linked to the script.</p> <p>Take a look inside <code>scripts_bank</code> directory which will host all the scripts-related files:</p> <div class="highlight"><pre><span></span><code>├──<span class="w"> </span>scripts_bank
│<span class="w">   </span>└──<span class="w"> </span>vmware
│<span class="w">       </span>├──<span class="w"> </span>__init__.py
│<span class="w">       </span>└──<span class="w"> </span>get_vmrc_links
│<span class="w">           </span>├──<span class="w"> </span>__init__.py
│<span class="w">           </span>├──<span class="w"> </span>get_vmrc_links.py
│<span class="w">           </span>├──<span class="w"> </span>static
│<span class="w">           </span>│<span class="w">   </span>└──<span class="w"> </span>get_vmrc_links_scripts.js
│<span class="w">           </span>└──<span class="w"> </span>templates
│<span class="w">               </span>└──<span class="w"> </span>get_vmrc_links.html
</code></pre></div> <p>It's the blueprints which allow us to modularize the app by storing some of it's components in the different directories and still be able to link them up to the main Flask app. See how elegantly JS code along with CSS styles needed only by this particular application <code>get_vmrc_links</code> found their's place in a separate directory - <code>/scripts_bank/vmware/get_vmrc_links/</code>!</p> <h3 id="blueprint-creation">Blueprint creation<a class="headerlink" href="#blueprint-creation" title="Permanent link">#</a></h3> <p>To create a Blueprint I placed this code in the <code>get_vmrc_links.py</code>:</p> <div class="highlight"><pre><span></span><code><span class="n">get_vmrc_links_bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">'get_vmrc_links'</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">,</span> <span class="n">template_folder</span><span class="o">=</span><span class="s1">'templates'</span><span class="p">,</span> <span class="n">static_folder</span><span class="o">=</span><span class="s1">'static'</span><span class="p">,</span>
                              <span class="n">static_url_path</span><span class="o">=</span><span class="s1">'/get_vmrc_links/static'</span><span class="p">)</span>

<span class="nd">@get_vmrc_links_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/get_vmrc_links'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_vmrc_links</span><span class="p">():</span>
 <span class="c1"># some code</span>
</code></pre></div> <p>When I created a blueprint I defined it's <code>static_url_path</code> to <code>/get_vmrc_links/static</code> . But don't get confused if you don't see this path, I don't have it. That is because blueprints can be <strong>registered</strong> from a specific point and not directly from the project's root.</p> <p>Once we have Blueprint created we need to bind it to the route (line 4 in the snippet above). And again the route <code>/get_vmrc_links</code> will have it's root at the directory where Blueprint will be registered later.</p> <h3 id="register-a-blueprint">Register a blueprint<a class="headerlink" href="#register-a-blueprint" title="Permanent link">#</a></h3> <p>To register the blueprint navigate to the main <code>app.py</code> and add the following lines:</p> <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">scripts_bank.vmware.get_vmrc_links.get_vmrc_links</span> <span class="kn">import</span> <span class="n">get_vmrc_links_bp</span>
<span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">get_vmrc_links_bp</span><span class="p">,</span> <span class="n">url_prefix</span><span class="o">=</span><span class="s1">'/vmware'</span><span class="p">)</span>
</code></pre></div> <p>Registration is easy! Have you spotted the <code>url_prefix='/vmware'</code> part? This is the Blueprints root directory I was talking about! So now you can glue the parts in a whole picture.</p> <ol> <li>Blueprint's root directory is <code>/vmware</code></li> <li>It's static directory path is <code>/get_vmrc_links/static</code> which turns to <code>/vmware + /get_vmrc_links/static == /vmware/get_vmrc_links/static</code></li> <li>The Flask route <code>/get_vmrc_links</code> transforms to <code>/vmware/get_vmrc_links</code> and by following this URL the script's page will be rendered</li> </ol> <h2 id="front-end-back-end-data-exchange">Front-end&lt;-&gt;back-end data exchange<a class="headerlink" href="#front-end-back-end-data-exchange" title="Permanent link">#</a></h2> <p>To pass data back and forth between front-end and back-end we need to:</p> <ol> <li><strong>(@front-end)</strong> serialize data from the input elements</li> <li><strong>(@front-end)</strong> pass this data to the back-end</li> <li><strong>(@back-end)</strong> receive data, make calculations, construct a response, send it</li> <li><strong>(@front-end)</strong> receive a response and render it in the output form, handle errors</li> </ol> <h3 id="serializing-input-data">Serializing input data<a class="headerlink" href="#serializing-input-data" title="Permanent link">#</a></h3> <p>Serializing is not hard at all. Since it is a front-end's task it is done by the JS code which is also stored in a separate file unique to this particular script <code>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links.js</code>.</p> <p>This example shows you how you separate one script from another by maintaining all related files in a script's folder, in this example I'm working on <code>get_vmrc_links</code> script, so all the JS and specific HTML templates are stored under <code>/scripts_bank/vmware/get_vmrc_links/</code> directory.</p> <p>Take a look at <code>get_vmrc_links.js</code> and pay attention to <code>$('#submit_form').click(function()</code>. This function handles things occurring on <code>on-click</code> event to the <code>Submit</code> button.</p> <p><code>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js</code>:</p> <div class="highlight"><pre><span></span><code><span class="c1">// filling data to the input elements based on selection of predefined hosts</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#known_hosts_select'</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s2">"#vmware_ip_addr"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#known_hosts_select option:selected'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'ip'</span><span class="p">));</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s2">"#vmware_login"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#known_hosts_select option:selected'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'login'</span><span class="p">));</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s2">"#vmware_pass"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#known_hosts_select option:selected'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'pass'</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#submit_form'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// start showing loading animation</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">LoadingOverlay</span><span class="p">(</span><span class="s2">"show"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">image</span><span class="w">       </span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">fontawesome</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">"fa fa-cog fa-spin"</span>
<span class="w">                        </span><span class="p">})</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
<span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span><span class="p">,</span><span class="w"> </span><span class="c1">// url: /vmware/get_vmrc_links</span>
<span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="s1">'form'</span><span class="p">).</span><span class="nx">serialize</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">$</span><span class="p">.</span><span class="nx">LoadingOverlay</span><span class="p">(</span><span class="s2">"hide"</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#output_div'</span><span class="p">).</span><span class="nx">HTML</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#output_div'</span><span class="p">).</span><span class="nx">HTML</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">collected_vm_info</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div> <p>String <code>data: $('form').serialize()</code> produces a string of <a href="https://api.jquery.com/serialize/">serialized</a> data with all <code>&lt;form&gt;</code>'s input elements IDs and their values. Along with serialization task, this JS file contains additional things like showing "Loading" overlay and filling the <code>inputs</code> with the predefined data from <code>select</code> object.</p> <h3 id="sending-serialized-data-to-the-back-end">Sending serialized data to the back-end<a class="headerlink" href="#sending-serialized-data-to-the-back-end" title="Permanent link">#</a></h3> <p>Serialized data goes via <code>POST</code> method to the back-end via an <code>url</code> you specify.</p> <p>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js:</p> <div class="highlight"><pre><span></span><code><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
<span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nx">newPathname</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/get_vmrc_links'</span><span class="p">,</span><span class="w"> </span><span class="c1">// url: /vmware/get_vmrc_links</span>
<span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="s1">'form'</span><span class="p">).</span><span class="nx">serialize</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
</code></pre></div> <h3 id="receiving-data-by-the-back-end-and-processing">Receiving data by the back-end and processing<a class="headerlink" href="#receiving-data-by-the-back-end-and-processing" title="Permanent link">#</a></h3> <p>To receive serialized data you need to create a <code>POST</code> requests handler:</p> <div class="highlight"><pre><span></span><code><span class="c1"># /scripts_bank/vmware/get_vmrc_links/get_vmrc_links.py</span>
<span class="nd">@get_vmrc_links_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/get_vmrc_links'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_vmrc_links</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'get_vmrc_links.html'</span><span class="p">)</span>

    <span class="c1"># handle POST method from JQuery</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">'POST'</span><span class="p">:</span>
        <span class="n">getvmrc_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'host'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_ip_addr'</span><span class="p">],</span>
                        <span class="s1">'user'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_login'</span><span class="p">],</span>
                        <span class="s1">'pass'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_pass'</span><span class="p">]}</span>
</code></pre></div> <p>To get the contents arrived in <code>POST</code> I queried <code>form</code> data structure of the <a href="https://werkzeug.palletsprojects.com/en/1.0.x/wrappers/#">request</a> object with appropriate keys. <code>form[]</code> object is an <code>ImmutableDict</code> data structure which contains all the data received in the <code>POST</code> method:</p> <div class="highlight"><pre><span></span><code><span class="n">ImmutableMultiDict</span><span class="p">([(</span><span class="s1">'vmware_pass'</span><span class="p">,</span> <span class="s1">'mypass'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'vmware_ip_addr'</span><span class="p">,</span> <span class="s1">'172.17.255.253'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'vmware_login'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">)])</span>
</code></pre></div> <p>Once you received your inputs you pass it along to the main function of the chosen script to process. Here I should mention that you have two ways of generating output data:</p> <ol> <li>you could leave it in plain text and wrap it in the appropriate <code>HTML</code> tags with Flask</li> <li>or you could enclose scripts' output data in <code>HTML</code> tags during scripts execution process</li> </ol> <p>In this example with the <code>get_vmrc_links.py</code> script I chose the latter option and wrapped the whole output of the script (which normally would have found it's peace in <code>stdout</code>) with HTML tags:</p> <div class="highlight"><pre><span></span><code><span class="c1"># /scripts_bank/vmware/get_vmrc_links/get_vmrc_links.py</span>
<span class="o">&lt;...</span> <span class="n">omitted</span> <span class="o">...&gt;</span>

<span class="n">vmrc_links</span><span class="p">[</span><span class="s1">'collected_vm_info'</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">"&lt;p&gt;&lt;pre&gt;"</span> <span class="c1"># opening paragraph and preformatted section</span>
<span class="n">vmrc_links</span><span class="p">[</span><span class="s1">'collected_vm_info'</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">"&lt;strong&gt;Name       : "</span> <span class="o">+</span> <span class="n">vm_summary</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">"&lt;/strong&gt;&lt;/br&gt;"</span>
<span class="n">vmrc_links</span><span class="p">[</span><span class="s1">'collected_vm_info'</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">"Path       : "</span> <span class="o">+</span> <span class="n">vm_summary</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">vmPathName</span> <span class="o">+</span> <span class="s2">"&lt;/strong&gt;&lt;/br&gt;"</span>

<span class="o">&lt;...</span> <span class="n">omitted</span> <span class="o">...&gt;</span>
</code></pre></div> <p>See these <code>&lt;pre&gt;</code>, <code>&lt;p&gt;</code> and <code>&lt;strong&gt;</code> tags I used? It'd done exactly to get rich formatting.</p> <h3 id="passing-the-results-back-to-the-front-end">Passing the results back to the front-end<a class="headerlink" href="#passing-the-results-back-to-the-front-end" title="Permanent link">#</a></h3> <p>One of the goals of this project was to make script's output look more readable. Thanks to modern front-end techniques and frameworks you could render whatever/however you like, your skills are the limit. At this time, my scripts produce just some text which I can render in various ways with HTML. But how do I actually pass this data to the front-end engine and in a what form?</p> <p>I pass it as <code>JSON</code>-formatted structure composed in a two-step process:</p> <p>Firstly, I collected scripts output data as a <code>dict</code> with the keys representing output data and errors (if any): </p> <div class="highlight"><pre><span></span><code><span class="n">vmrc_links</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'collected_vm_info'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>  <span class="c1">## collected results</span>
              <span class="s1">'error'</span><span class="p">:</span> <span class="s1">''</span><span class="p">}</span>              <span class="c1">## errors</span>
</code></pre></div> <p>Once I have a dict with results and errors to show I use Flask's <a href="https://flask.palletsprojects.com/en/1.1.x/api/#flask.json.jsonify">jsonify</a> function to represent my dict as JSON and compose a <code>Response</code> object to pass it further to the front-end:</p> <div class="highlight"><pre><span></span><code>    <span class="o">&lt;...</span> <span class="n">omitted</span> <span class="o">...&gt;</span>

    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">'POST'</span><span class="p">:</span>
            <span class="n">getvmrc_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'host'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_ip_addr'</span><span class="p">],</span>
                            <span class="s1">'user'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_login'</span><span class="p">],</span>
                            <span class="s1">'pass'</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">'vmware_pass'</span><span class="p">]}</span>

            <span class="k">global</span> <span class="n">vmrc_links</span>
            <span class="n">vmrc_links</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'collected_vm_info'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
                        <span class="s1">'error'</span><span class="p">:</span> <span class="s1">''</span><span class="p">}</span>

            <span class="n">vm_info</span> <span class="o">=</span> <span class="n">main</span><span class="p">(</span><span class="n">getvmrc_args</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">vm_info</span><span class="p">)</span>
</code></pre></div> <p>And that's it. Now fast forward to the front-end and see how it processes received data:</p> <p>/scripts_bank/vmware/get_vmrc_links/static/get_vmrc_links_scripts.js:</p> <div class="highlight"><pre><span></span><code><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#submit_form'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// start showing loading animation</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">LoadingOverlay</span><span class="p">(</span><span class="s2">"show"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">image</span><span class="w">       </span><span class="o">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">fontawesome</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">"fa fa-cog fa-spin"</span>
<span class="w">                        </span><span class="p">})</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
<span class="w">            </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span><span class="p">,</span><span class="w"> </span><span class="c1">// url: /vmware/get_vmrc_links</span>
<span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="s1">'form'</span><span class="p">).</span><span class="nx">serialize</span><span class="p">(),</span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">$</span><span class="p">.</span><span class="nx">LoadingOverlay</span><span class="p">(</span><span class="s2">"hide"</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#output_div'</span><span class="p">).</span><span class="nx">HTML</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">$</span><span class="p">(</span><span class="s1">'#output_div'</span><span class="p">).</span><span class="nx">HTML</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">collected_vm_info</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div> <p>On a successful return, I check if output has any errors and if it has - put an error message in the <code>#output_div</code> block. If things went smooth I put collected results in this block instead.</p> <h2 id="adding-new-script-is-easy">Adding new script is easy<a class="headerlink" href="#adding-new-script-is-easy" title="Permanent link">#</a></h2> <h3 id="create-the-file-structure">Create the file structure<a class="headerlink" href="#create-the-file-structure" title="Permanent link">#</a></h3> <p>It's very easy to add a new script. Walk with me and see how easily I add completely separate script called <code>SAM-O XML API Tester</code>.</p> <p>At first, I created directories which represent sandbox for the script in a folder dedicated to storing scripts (<code>scripts_bank</code>). As I said, my directory structure follows my side-menu bar, that's why for the new script called <code>SAM-O_XML_API_Tester</code> I first off created root directory <code>5620sam</code> and then subdirectory <code>SAM-O_XML_API_Tester</code>. The latter dir will carry all files related to this particular script.</p> <p>Do not forget to create empty <code>__init.py__</code> files inside directories of the script to treat folders as python packages.</p> <div class="highlight"><pre><span></span><code>.
├──<span class="w"> </span>scripts_bank
│<span class="w">  </span>├──<span class="w"> </span>_5620sam
│<span class="w">  </span>│<span class="w">  </span>├──<span class="w"> </span>sam_xml_api_tester
│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>├──<span class="w"> </span>__init__.py
│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>├──<span class="w"> </span>static
│<span class="w">  </span>│<span class="w">  </span>│<span class="w">  </span>└──<span class="w"> </span>templates
│<span class="w">  </span>│<span class="w">  </span>└──<span class="w"> </span>__init__.py
│<span class="w">  </span>├──<span class="w"> </span>__init__.py
</code></pre></div> <h3 id="create-html-files">Create HTML files<a class="headerlink" href="#create-html-files" title="Permanent link">#</a></h3> <p>Now it's user-facing HTML template's turn. I created <code>sam-o_xml_api_tester.html</code> file in <code>SAM-O_XML_API_Tester/templates</code> dir leveraging sandbox environment. See, this makes individual script management very convenient, one directory stores em all.</p> <p>Following inheritance model this template inherits markup from the <code>content-template.html</code>. As I explained earlier it makes easier to fill in general text information (such as a name of the script, usage guide, author info, etc). Consider this as static or temporary layout for almost every new script.</p> <p>/scripts_bank/5620sam/SAM-O_XML_API_Tester/templates/sam-o_xml_api_tester.html:</p> <div class="highlight"><pre><span></span><code>{% extends 'content_template.html' %}
{% block title %}
    New script
{% endblock %}

{% block main_purpose %}
This is just demo for the blog.
{% endblock %}

{% block descr %}
Description TBD...
{% endblock %}

{% block usage %}
It does nothing, <span class="p">&lt;</span><span class="nt">mark</span><span class="p">&gt;</span>for now<span class="p">&lt;/</span><span class="nt">mark</span><span class="p">&gt;</span>
{% endblock %}

{% block limitations %}
My code does not have limitation!
{% endblock %}

{% block author %}
Roman Dodin
{% endblock %}

{% block version %}
0.1
{% endblock %}

{% block tags %}
noshut.ru
{% endblock %}

{% block script_content %}

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container-fluid"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-md-12"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel panel-default"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-heading"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-title"</span><span class="p">&gt;</span>Inputs<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-body"</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel panel-default"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-heading"</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-title"</span><span class="p">&gt;</span>Output<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-body"</span> <span class="na">id</span><span class="o">=</span><span class="s">"output_div"</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endblock %}
{% block added_js %}
<span class="cm">&lt;!-- nothing here for the moment --&gt;</span>
{% endblock %}
</code></pre></div> <h3 id="create-register-a-blueprint">Create &amp; register a Blueprint<a class="headerlink" href="#create-register-a-blueprint" title="Permanent link">#</a></h3> <p>Now it's time to write few lines for back-end part. Create a python file which will hold blueprint for this script we've been adding and back-end activities:</p> <div class="highlight"><pre><span></span><code><span class="c1">#/scripts_bank/_5620sam/sam_xml_api_tester/sam_xml_api_tester.py</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">Blueprint</span><span class="p">,</span> <span class="n">jsonify</span>

<span class="c1">###############</span>
<span class="c1">#### FLASK ####</span>
<span class="c1">###############</span>

<span class="n">sam_api_tester_bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">'sam_api_tester'</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">,</span> <span class="n">template_folder</span><span class="o">=</span><span class="s1">'templates'</span><span class="p">,</span> <span class="n">static_folder</span><span class="o">=</span><span class="s1">'static'</span><span class="p">,</span>
                              <span class="n">static_url_path</span><span class="o">=</span><span class="s1">'/sam_xml_api_tester/static'</span><span class="p">)</span>

<span class="nd">@sam_api_tester_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/sam_xml_api_tester'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">sam_api_tester</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'sam_xml_api_tester.html'</span><span class="p">)</span>

    <span class="c1"># handle POST method from JQuery (will be filled later)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">'POST'</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</code></pre></div> <p>Register it in the main <code>app.py</code>:</p> <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">scripts_bank._5620sam.sam_xml_api_tester.sam_xml_api_tester</span> <span class="kn">import</span> <span class="n">sam_api_tester_bp</span>
<span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">sam_api_tester_bp</span><span class="p">,</span> <span class="n">url_prefix</span><span class="o">=</span><span class="s1">'/5620sam'</span><span class="p">)</span>
</code></pre></div> <p>And you are good to go!</p> <h2 id="how-to-test-plaza">How to test PLAZA?<a class="headerlink" href="#how-to-test-plaza" title="Permanent link">#</a></h2> <p>Apart from traditional way of cloning a <a href="https://github.com/hellt/PLAZA">repo</a> and building a virtual environment, you can use a <a href="https://hub.docker.com/r/hellt/plaza-demo/">docker container</a>.</p> <h2 id="whats-next">What's next?<a class="headerlink" href="#whats-next" title="Permanent link">#</a></h2> <p>Tons of useful things are missing at the moment - no search, no active tags, no login-based system, no tests, etc. I will probably add some of this features later, but you are welcome to suggest, blame, and pull-request. Yeah, the code <code>as is</code> can be grabbed from <a href="https://github.com/hellt/PLAZA">GitHub</a>.</p> <h2 id="__comments">Comments</h2> <script async="" crossorigin="anonymous" data-category="Show and tell" data-category-id="DIC_kwDOFWteI84CRmVn" data-emit-metadata="0" data-input-position="top" data-lang="en" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="hellt/netdevops.me" data-repo-id="MDEwOlJlcG9zaXRvcnkzNTkzNTc5ODc=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs Insiders </a> </div> <div class="md-social"> <a class="md-social__link" href="https://github.com/hellt" rel="noopener" target="_blank" title="github.com"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class="md-social__link" href="https://twitter.com/ntdvps" rel="noopener" target="_blank" title="twitter.com"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.instant", "navigation.tabs", "search.suggest", "content.code.annotate", "toc.follow", "content.tooltips", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.6c7302c4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src="../../assets/javascripts/bundle.9ab90144.min.js"></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>