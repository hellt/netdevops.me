<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Applying DevOps to networks."><meta name=author content="Roman Dodin"><link href=https://netdevops.me/2016/bgp-vpls-deep-dive-nokia-sr-os-juniper/ rel=canonical><link rel=icon href=../../assets/images/code.svg><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.5.3+insiders-4.24.0"><title>BGP VPLS deep dive. Nokia SR OS & Juniper - Applying DevOps to networks</title><link rel=stylesheet href=../../assets/stylesheets/main.9b015cc2.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Google Sans";--md-code-font:"Fira Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-Y7R34KCT4N"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-Y7R34KCT4N",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-Y7R34KCT4N",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#bgp-vpls-deep-dive-nokia-sr-os-juniper class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=https://twitter.com/ntdvps> For updates follow <strong>@ntdvps</strong> on <span class="twemoji twitter"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </span> <strong>Twitter</strong> </a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Applying DevOps to networks" class="md-header__button md-logo" aria-label="Applying DevOps to networks" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Applying DevOps to networks </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> BGP VPLS deep dive. Nokia SR OS & Juniper </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hellt/netdevops.me title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hellt/netdevops.me </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class="md-tabs__link md-tabs__link--active"> Blog </a> </li> <li class=md-tabs__item> <a href=../../tags/ class=md-tabs__link> Tags </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Applying DevOps to networks" class="md-nav__button md-logo" aria-label="Applying DevOps to networks" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg> </a> Applying DevOps to networks </label> <div class=md-nav__source> <a href=https://github.com/hellt/netdevops.me title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hellt/netdevops.me </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> Blog </span> </a> </div> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#bgp-vpls-basics class=md-nav__link> <span class=md-ellipsis> BGP VPLS Basics </span> </a> <nav class=md-nav aria-label="BGP VPLS Basics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#auto-discovery class=md-nav__link> <span class=md-ellipsis> Auto-discovery </span> </a> </li> <li class=md-nav__item> <a href=#signalling class=md-nav__link> <span class=md-ellipsis> Signalling </span> </a> </li> <li class=md-nav__item> <a href=#label-blocks class=md-nav__link> <span class=md-ellipsis> Label Blocks </span> </a> </li> <li class=md-nav__item> <a href=#pseudowire-setup-process class=md-nav__link> <span class=md-ellipsis> Pseudowire setup process </span> </a> </li> <li class=md-nav__item> <a href=#layer-2-info-extended-community class=md-nav__link> <span class=md-ellipsis> Layer 2 Info Extended community </span> </a> <nav class=md-nav aria-label="Layer 2 Info Extended community"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mtu-considerations class=md-nav__link> <span class=md-ellipsis> MTU considerations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vlan-tag-multiplexing class=md-nav__link> <span class=md-ellipsis> VLAN tag multiplexing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vpls-data-plane class=md-nav__link> <span class=md-ellipsis> VPLS data plane </span> </a> <nav class=md-nav aria-label="VPLS data plane"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mac-learning class=md-nav__link> <span class=md-ellipsis> MAC learning </span> </a> </li> <li class=md-nav__item> <a href=#aging-flooding-bum-traffic class=md-nav__link> <span class=md-ellipsis> Aging, Flooding, BUM traffic </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#case-study-single-homed-vpls class=md-nav__link> <span class=md-ellipsis> Case study: Single-homed VPLS </span> </a> <nav class=md-nav aria-label="Case study: Single-homed VPLS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bgp-configuration class=md-nav__link> <span class=md-ellipsis> BGP configuration </span> </a> </li> <li class=md-nav__item> <a href=#interface-configuration class=md-nav__link> <span class=md-ellipsis> Interface configuration </span> </a> </li> <li class=md-nav__item> <a href=#service-configuration class=md-nav__link> <span class=md-ellipsis> Service configuration </span> </a> </li> <li class=md-nav__item> <a href=#vlan-handling-in-vpls class=md-nav__link> <span class=md-ellipsis> VLAN handling in VPLS </span> </a> </li> <li class=md-nav__item> <a href=#control-plane-walk-through class=md-nav__link> <span class=md-ellipsis> Control plane walk through </span> </a> </li> <li class=md-nav__item> <a href=#data-plane-walk-through class=md-nav__link> <span class=md-ellipsis> Data plane walk through </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references-further-reading class=md-nav__link> <span class=md-ellipsis> References &amp; further reading </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component=content> <div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class="md-sidebar__inner md-post"> <nav class=md-nav> <div class=md-post__back> <div class="md-nav__title md-nav__container"> <a href=../.. class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> <span class=md-ellipsis> Back to index </span> </a> </div> </div> <div class="md-post__authors md-typeset"> <div class="md-profile md-post__profile"> <span class="md-author md-author--long"> <img src=https://avatars.githubusercontent.com/u/5679861 alt="Roman Dodin"> </span> <span class=md-profile__description> <strong>Roman Dodin</strong><br> Network Automater </span> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__title"> <div class=md-nav__link> <span class=md-ellipsis> Metadata </span> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg> <time datetime=2016-11-14 class=md-ellipsis>November 14, 2016</time> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg> <span class=md-ellipsis> 21 min read </span> </div> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../tags/#bgp class=md-tag>bgp</a> <a href=../../tags/#vpls class=md-tag>vpls</a> <a href=../../tags/#nokia class=md-tag>nokia</a> <a href=../../tags/#juniper class=md-tag>juniper</a> </nav> <a href=https://github.com/hellt/netdevops.me/edit/master/blog/posts/noshut/2016-11-14-bgp-vpls-explained.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=bgp-vpls-deep-dive-nokia-sr-os-juniper>BGP VPLS deep dive. Nokia SR OS &amp; Juniper<a class=headerlink href=#bgp-vpls-deep-dive-nokia-sr-os-juniper title="Permanent link">#</a></h1> <p>It may very well be that VPLS days are numbered and EVPN is to blame. Nevertheless, it would be naive to expect VPLS extinction in the near future. With all its shortcomings VPLS is still very well standardized, interop-proven and has a huge footprint in MPLS networks of various scale.</p> <p>In this post I will cover theory and configuration parts for one particular flavor of VPLS signalling - BGP VPLS (aka Kompella VPLS) defined in <a href=http://www.rfcreader.com/#rfc4761>RFC4761</a>. I'll start with simple single home VPLS scenario while multi-homing techniques and some advanced configurations might appear in a separate post later.</p> <p>In this topic the following SW releases were used:</p> <ul> <li>Nokia (Alcatel-Lucent) VSR 14.0.R4</li> <li>Juniper vMX 14.1R1.10</li> </ul> <!-- more --> <h3 id=bgp-vpls-basics>BGP VPLS Basics<a class=headerlink href=#bgp-vpls-basics title="Permanent link">#</a></h3> <p>Virtual Private LAN Service (VPLS) is seen like an Ethernet LAN by the customers of a Service Provider. However, in a VPLS, not all of the customers are connected to a single LAN; they may be spread across a metro or wide area network. In essence, a VPLS glues together several individual LANs across a packet switched network to appear and function as a single LAN. This is accomplished by incorporating MAC address learning, flooding, and forwarding functions in the context of pseudowires that connect these individual LANs.</p> <p>The entire VPLS service behaves like a big switch with distributed MAC learning intelligence implemented on each PE, and as in a switch, MAC learning happens in a dataplane.</p> <div align=center> <img src=https://img-fotki.yandex.ru/get/194989/21639405.11c/0_8b216_eacf5704_XL.png> </div> <p>The following two types of interfaces are typical for VPLS:</p> <ol> <li>Attachment Circuits (AC) - circuits connecting Customer Edge (CE) devices to Provider Edge (PE) routers. PE routers often called VPLS Edge (VE) devices in VPLS terminology.</li> <li>Pseudowires (PW) - circuits connecting PEs between each other</li> </ol> <p>In the context of a given VPLS instance, a PE can have one or more local ACs, and one or more PWs toward remote PEs. Full-mesh of transport tunnels between PEs is required.</p> <p>In Kompella VPLS, BGP is a key enabler and is responsible for:</p> <ul> <li><strong>Auto-discovery</strong>: process of finding all PE routers participating in a VPLS instance;</li> <li><strong>Signalling</strong>: the setup and tear-down of pseudowires (PW) that constitute the VPLS service.</li> </ul> <h4 id=auto-discovery>Auto-discovery<a class=headerlink href=#auto-discovery title="Permanent link">#</a></h4> <p>Each PE "discovers" which other PEs are part of a given VPLS by means of BGP. This allows each PE's configuration to consist only of the identity of the VPLS instance established on this PE, not the identity of every other PE in that VPLS instance. Moreover, when the topology of a VPLS changes, only the affected PE's configuration changes; other PEs automatically find out about the change and adapt.</p> <blockquote> <p>The Route Target community is used to identify members of a VPLS. A PE announces that it belongs to <code>VPLS V</code> by annotating its NLRIs for <code>VPLS V</code> with Route Target <code>RT</code>, and acts on this by accepting NLRIs from other PEs that have Route Target <code>RT</code>. A PE announces that it no longer participates in <code>VPLS V</code> by withdrawing all NLRIs that it had advertised with Route Target <code>RT</code>.</p> </blockquote> <h4 id=signalling>Signalling<a class=headerlink href=#signalling title="Permanent link">#</a></h4> <p>Once discovery is done, each pair of PEs in a VPLS must be able to establish (and tear down) pseudowires to each other, i.e., exchange (and withdraw) <em>demultiplexors</em>. This process is known as signaling. Signaling is also used to transmit certain characteristics of the pseudowires that a PE sets up for a given VPLS.</p> <p>BGP Update message carrying BGP VPLS NLRI (AFI:25, SAFI:65) is used to signal VPLS membership and multiplexors for a VPLS service:</p> <p><img src=http://img-fotki.yandex.ru/get/194989/21639405.11c/0_8b217_8630d094_XL.png></p> <p>Let's expand some of the fields of the BGP VPLS NLRI:</p> <ul> <li><strong>Route Distinguisher</strong> - used to differentiate between customer NLRIs thus should be unique for every VPLS service. </li> <li><strong>VE ID</strong> - unique identifier (aka site-id), manually assigned to every VPLS Edge device. </li> <li><strong>VE Block Offset, VE Block Size and Label Base</strong> are used for calculating the service label (multiplexor).</li> </ul> <h4 id=label-blocks>Label Blocks<a class=headerlink href=#label-blocks title="Permanent link">#</a></h4> <p>Using a distinct BGP Update message to send a demultiplexor to each remote PE would require the originating PE to send N such messages for N remote PEs. In order to minimize the control plane load original standard introduced <code>Label Blocks</code> which drastically reduce the amount of BGP Update messages. A label block is a set of demultiplexor labels used to reach a given VE ID.</p> <p>A single BGP VPLS NLRI signals a label block which consists of:</p> <ul> <li><strong>VE ID</strong> - manually assigned to VE device identifier</li> <li><strong>Label Base (LB)</strong> - first label assigned to a label block</li> <li><strong>VE Block Size (VBS)</strong> - number of labels assigned to a label block. Vendor-dependant value, Nokia and Juniper both use Block Size of 8.</li> <li><strong>VE Block Offset (VBO)</strong> - first VE ID assigned to a label block</li> </ul> <p>A contiguous label block defined by <code>&lt;LB, VBO, VBS&gt;</code> is the set <code>{LB+VBO, LB+VBO+1, ..., LB+VBO+VBS-1}</code>. Thus, instead of a single large label block to cover all VE IDs in a VPLS, one can have several label blocks, each with a different label base.</p> <div align=center> <img src=http://img-fotki.yandex.ru/get/194989/21639405.11c/0_8b218_ad2446d0_XL.png alt width=622 height=800> </div> <h4 id=pseudowire-setup-process>Pseudowire setup process<a class=headerlink href=#pseudowire-setup-process title="Permanent link">#</a></h4> <p><a href=http://www.rfcreader.com/#rfc4761_line427>Section 3.2.3</a> of RFC4761 highlights the steps VE routers go through during PW setup/teardown. Lets see by an example how PW setup takes places in a BGP VPLS between routers VE1 and VE7.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/172931/21639405.11c/0_8b219_25de426c_orig.png><img src=http://img-fotki.yandex.ru/get/172931/21639405.11c/0_8b219_25de426c_XL.png alt width=543 height=800></a> </div> <ol> <li> <p>Router VE1 is part of VPLS <code>BLUE</code> and has VPLS service configured with the following parameters:</p> <div class=highlight><pre><span></span><code>VE ID: 1
RT: 65000:10
RD: 1.1.1.1:10
</code></pre></div> <p>Upon a service config router VE1 sends BGP Update message to all its BGP peers with NLRI describing its label block. Since for this moment VE1 has no knowledge about any other router participating in <code>VPLS BLUE</code> service it sends only one NLRI. This NLRI covers a label block which has its own VE-ID (refer to the figure 40)</p> </li> <li> <p>When VE10 router boots with the same <code>VPLS BLUE</code> service configured using the following params:</p> <div class=highlight><pre><span></span><code>VE ID: 10
RT: 65000:10
RD: 10.10.10.10:10
</code></pre></div> <p>it sends BGP Update to all its peers. Again, since VE10 hasn't seen any VE routers yet, it will send only one NLRI with a label block which its VE-ID reside in.</p> </li> <li> <p>VE1 receive BGP Update send by VE10 and since route-target community is the same on both routers VE1 accepts it. Then VE1 performs a check whether the NLRI it received from VE10 can be used for PW setup (see Fig. 50, step 3). Since the result of the check returned false, VE1 can't use received NLRI from VE10 for PW setup towards it. <div align=center> <a href=http://img-fotki.yandex.ru/get/172684/21639405.11c/0_8b21a_2dba3df9_orig.png><img src=http://img-fotki.yandex.ru/get/172684/21639405.11c/0_8b21a_2dba3df9_XL.png alt width=475 height=800></a> </div></p> </li> <li>By receiving an update from VE10, VE1 now has knowledge of VE10 existence and checks if it has sent label block which contains a label for VE10. As stated in Fig. 40, VE1 sent label block containing information that can be used by routers with VE-ID from 1 to 8, thus VE10 can not setup PW using this label block. VE1 then sends another BGP Update with NLRI covering VE-IDs from 9 to 16 to satisfy VE10 needs.</li> <li>Router VE10 performs the same check against received NLRI. This time the check is passed and VE10 can calculate a label (multiplexor) which it should use for PW from VE10 to VE1.</li> <li>As in step 4, VE10 generates additional BGP Update with NLRI covering VE1 range.</li> </ol> <p>This enables PW to setup from VE1 to V10 and from VE10 to VE1 by using MPLS labels calculated on each router independently.</p> <h4 id=layer-2-info-extended-community>Layer 2 Info Extended community<a class=headerlink href=#layer-2-info-extended-community title="Permanent link">#</a></h4> <p>Additional extended community is used in VPLS service establishment - originally <code>Layer 2 Info</code> extended community was defined in section <a href=http://www.rfcreader.com/#rfc4761_line453>3.2.4</a>. It is used to signal control information about the pseudowires to be setup for a given VPLS. Two additional bits (D, F) later were introduced by <a href=https://tools.ietf.org/html/draft-ietf-bess-vpls-multihoming-01#section-3.3.1>vpls-multihoming draft</a>.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/195853/21639405.11c/0_8b21b_9f734cbc_orig.png><img src=http://img-fotki.yandex.ru/get/195853/21639405.11c/0_8b21b_9f734cbc_XL.png alt width=800 height=605></a> </div> <h5 id=mtu-considerations>MTU considerations<a class=headerlink href=#mtu-considerations title="Permanent link">#</a></h5> <p>One of the important fields in L2 Info community is the <code>Layer 2 MTU</code>. VE routers signal MTU which can be carried within VPLS service, moreover some router platforms will bring service into down state if the MTU values mismatch. Usually you can find configuration knobs which will turn off <code>MTU matching</code>, though it is better to keep MTU consistent between endpoints.</p> <p>Interesting fact is that Juniper routers (at least vMX 14.1) defaults to signal <code>MTU=0</code> (as seen in Figure 80), which wont bring service down, because this means <strong>do not consider MTU value</strong>. Again, in vMX 14.1 there is no way to signal any particular MTU value for VPLS service, though starting with 15.1 it is possible with <code>mtu</code> keyword.</p> <h4 id=vlan-tag-multiplexing>VLAN tag multiplexing<a class=headerlink href=#vlan-tag-multiplexing title="Permanent link">#</a></h4> <p>To understand how ethernet frames are handled by PE and transported over PW we need to cover possible variations of frames on AC, as well as different modes of PW operation.</p> <p>Frames from the CE devices can be seen on the attachment circuits in different flavours:</p> <ul> <li>untagged</li> <li>tagged (dot1q, q-in-q) by CE device itself</li> <li>additionally tagged by some SP's aggregation device (SVLAN put by L2 agg. device)</li> </ul> <p>When it comes to PW operation modes, <a href=http://www.rfcreader.com/#rfc4448_line274>RFC 4448</a> gives us two options: <strong>raw</strong> and <strong>tagged</strong>. Thus, we can distinguish two cases regarding tagged frames coming from AC:</p> <ul> <li> <p><strong>The tag is service-delimiting.</strong><br> This means that the tag was placed on the frame by some piece of service provider-operated equipment, and the tag is used by the service provider to distinguish the traffic. For example, LANs from different customers might be attached to the same service provider switch, which applies VLAN tags to distinguish one customer's traffic from another's, and then forwards the frames to the PE.</p> </li> <li> <p><strong>The tag is not service-delimiting.</strong><br> This means that the tag was placed in the frame by a piece of customer equipment, and is not meaningful to the PE.</p> </li> </ul> <p>RFC 4448 explains further possible scenarios actions:</p> <ul> <li>PW is operating in <strong>raw mode (aka Ether)</strong>:</li> <li>Service-delimiting tags are NEVER sent over the PW, if tag is present, it MUST be stripped before sending on PW</li> <li>When sending a frame on AC, PE may add service-delimiting tag, but <strong>can not</strong> strip or rewrite any existing tags present on a frame</li> <li>PW is operating in <strong>tagged</strong> <strong>mode (aka VLAN)</strong>:</li> <li>PW MUST have a service-delimiting VLAN tag. If service-delimiting tag is not present, the PE must prepend the frame with a dummy VLAN tag before sending the frame on the PW</li> <li>When sending a frame on AC, PE may rewrite or strip tag entirely</li> <li>Whether or not the tag is service-delimiting is determined by local configuration on the PE</li> <li>Service-delimiting tag have local to PE-CE interface significance</li> <li>Non-service-delimiting tags are passed transparently across the PW as part of the payload</li> </ul> <h3 id=vpls-data-plane>VPLS data plane<a class=headerlink href=#vpls-data-plane title="Permanent link">#</a></h3> <p>This topic is focusing on VPLS data plane encapsulation, as defined in <a href=http://www.rfcreader.com/#rfc4448>RFC 4448</a> - Encapsulation Methods for Transport of Ethernet over MPLS Networks.</p> <h4 id=mac-learning>MAC learning<a class=headerlink href=#mac-learning title="Permanent link">#</a></h4> <p>VPLS is a multipoint service with a MAC learning on a data plane. This means that the entire Service Provider network should appear as a single logical learning bridge (Ethernet switch) for each VPLS that the SP network supports. The logical ports for the SP "bridge" are the AC as well as the PW on a PE. As a result of MAC learning, bridges populate a MAC table in which they keep track of the interface (or PW) where each unicast MAC is reachable.</p> <h4 id=aging-flooding-bum-traffic>Aging, Flooding, BUM traffic<a class=headerlink href=#aging-flooding-bum-traffic title="Permanent link">#</a></h4> <p>VPLS PEs SHOULD have an aging mechanism to remove a MAC address associated with a logical port. Aging reduces the size of a VPLS MAC table to just the active MAC addresses. When a bridge receives a packet to a destination that is not in its FIB, it floods the packet on all the other ports (process known as replication). Frames that should be flooded are Broadcast, Unknown unicast and Multicast</p> <ul> <li>Broadcast frames have destination MAC address <code>ff:ff:ff:ff:ff:ff</code>.</li> <li>Multicast frames have a destination MAC address whose first octet has its last bit set to one</li> </ul> <p>To avoid loops during replication process split-horizon rule should be honored: A frame received on a PW is never sent back on the same or any other PW (default, but configurable behavior).</p> <h3 id=case-study-single-homed-vpls>Case study: Single-homed VPLS<a class=headerlink href=#case-study-single-homed-vpls title="Permanent link">#</a></h3> <p>Enough with theory, time to practice some VPLS! I will start with a simple case of two CE routers (CE1 and CE2) connected to a Service Provider's PE routers (R1, R2) configured with a VPLS service. Refer to Fig. 60 outlining lab topology for this case. It is assumed that ISIS and LDP are configured and operational.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/194989/21639405.11d/0_8b222_20c181b9_orig.png><img src=http://img-fotki.yandex.ru/get/194989/21639405.11d/0_8b222_20c181b9_XL.png alt width=800 height=658></a> </div> <p>Refer to these baseline configurations:</p> <ul> <li><a href=https://gist.github.com/hellt/f9adc0cf6aba73eb7cc9f232c5243008>R1 (Nokia)</a></li> <li><a href=https://gist.github.com/hellt/1536d41be077390915d46178b72b1179>R2 (Juniper)</a></li> <li><a href=https://gist.github.com/hellt/a525df301d56c7065ec9ed2b5bd74f0c>R3 Route reflector (Nokia)</a></li> </ul> <h4 id=bgp-configuration>BGP configuration<a class=headerlink href=#bgp-configuration title="Permanent link">#</a></h4> <p>This one is really simple. All we need is to configure MP-iBGP peering between PEs and RR with <strong>L2 VPN family</strong> enabled:</p> <p><strong>R1 (Nokia)</strong></p> <div class=highlight><pre><span></span><code>*A:R1&gt;config&gt;router# info
#--------------------------------------------------
echo &quot;IP Configuration&quot;
#--------------------------------------------------
## &lt; Output omitted for brevity &gt;

        autonomous-system 65000
#--------------------------------------------------


*A:R1&gt;config&gt;router&gt;bgp# info
----------------------------------------------
            connect-retry 1
            min-route-advertisement 1
            rapid-withdrawal
            rapid-update l2-vpn
            group &quot;RR&quot;
                family l2-vpn
                enable-peer-tracking
                neighbor 3.3.3.3
                    type internal
                exit
            exit
            no shutdown
----------------------------------------------
</code></pre></div> <p><strong>R3 Route reflector (Nokia)</strong></p> <div class=highlight><pre><span></span><code>*A:R3&gt;config&gt;router# info
#--------------------------------------------------
echo &quot;IP Configuration&quot;
#--------------------------------------------------
## &lt; Output omitted for brevity &gt;

        autonomous-system 65000
#--------------------------------------------------


A:R3&gt;config&gt;router&gt;bgp# info
----------------------------------------------
            family l2-vpn
            connect-retry 1
            min-route-advertisement 1
            enable-peer-tracking
            rapid-withdrawal
            rapid-update l2-vpn
            group &quot;RRC&quot;
                cluster 3.3.3.3
                neighbor 1.1.1.1
                    type internal
                exit
                neighbor 2.2.2.2
                    type internal
                exit
            exit
            no shutdown
----------------------------------------------
</code></pre></div> <p><strong>R2 (Juniper)</strong></p> <div class=highlight><pre><span></span><code>root@R2# show routing-options | grep auto
autonomous-system 65000;

root@R2# show protocols bgp
group RR {
    type internal;
    family l2vpn {
        signaling;
    }
    neighbor 3.3.3.3;
}
</code></pre></div> <h4 id=interface-configuration>Interface configuration<a class=headerlink href=#interface-configuration title="Permanent link">#</a></h4> <p>To demonstrate vlan-normalization methods I used two different vlans on attachment circuits connected to R1 and R2. Our CE1 and CE2 devices have simple dot1q interfaces addressed in this way:</p> <ul> <li>CE1 has interface <code>toCE2</code> with address <code>192.168.1.1/24</code>, <code>VLAN 10</code></li> <li>CE1 has interface <code>toCE1</code> with address <code>192.168.1.2/24</code>, <code>VLAN 600</code></li> </ul> <p>Router R1 has vlan 10 on its AC, while R2 configured with vlan-id 600 (on Juniper vlan ids values for VPLS interfaces must be &gt; 512).</p> <p>Nokia routers do not differ if interface is going to be used in any particular service or in no service at all, therefore the configuration steps are obvious. The part which enables particular ethernet encapsulation (802.1q in this case) is done under port configuration:</p> <p><strong>R1:</strong></p> <div class=highlight><pre><span></span><code>A:R1# configure port 1/1/2
A:R1&gt;config&gt;port# info
----------------------------------------------
        ethernet
            mode hybrid  ## hybrid means that port can act as an access &amp; network port
            encap-type dot1q
        exit
        no shutdown
----------------------------------------------
</code></pre></div> <p>Configuration of <code>Vlan-id 10</code> attachment to a VPLS service will be done later in the VPLS configuration section.</p> <p>Note, that Ethernet MTU on Nokia routers includes Ethernet header. This means that, for instance, interface with MTU 2000 will be able to put on wire exactly 2000 bytes, for example:</p> <div class=highlight><pre><span></span><code>TOTAL 2000B == Frame 54: 2000 bytes on wire (16000 bits), 2000 bytes captured (16000 bits) on interface 0
14B         == Ethernet II, Src: 50:01:00:04:00:01 (50:01:00:04:00:01), Dst: 50:01:00:05:00:01 (50:01:00:05:00:01)
4B          == 802.1Q Virtual LAN, PRI: 7, CFI: 0, ID: 10
20B         == Internet Protocol Version 4, Src: 192.168.1.1, Dst: 192.168.1.2
1962B       == Internet Control Message Protocol
</code></pre></div> <p>In contrast with Nokia, Juniper's configuration of interface is done in a different way.</p> <div class=highlight><pre><span></span><code>root@R2# show interfaces ge-0/0/1
flexible-vlan-tagging;
encapsulation flexible-ethernet-services;
unit 600 {
    encapsulation vlan-vpls;
    vlan-id 600;
}
</code></pre></div> <p>In Juniper you have to specify <code>encapsulation vlan-vpls</code> under the interface's configuration for a logical unit you're going to use as an AC.</p> <h4 id=service-configuration>Service configuration<a class=headerlink href=#service-configuration title="Permanent link">#</a></h4> <p>Now to the main course, service configuration. Both Nokia and Juniper has some vendor-specifics and different defaults worth mentioning.</p> <p>Let's take one section at a time and discuss the details. On R1 I configured VPLS service with <code>id 10</code>. The same id I used for RD and RT.</p> <div class=highlight><pre><span></span><code>A:R1# configure service vpls 10
A:R1&gt;config&gt;service&gt;vpls# info
----------------------------------------------
            bgp
                route-distinguisher 1.1.1.1:10
                route-target export target:65000:10 import target:65000:10
                pw-template-binding 11
                exit
            exit
</code></pre></div> <p>BGP section of VPLS service has RD/RT values which used for route distinguishing between different VPLS services and auto-discovering based on Route Target. What is interesting here is <code>pw-template-binding</code> keyword. In SROS we use pseudowire templates to describe pseudowire characteristics. Based on this template PW will later bind to a VPLS service and established.</p> <div class=highlight><pre><span></span><code>A:R1# configure service pw-template 11
A:R1&gt;config&gt;service&gt;pw-template# info
----------------------------------------------
            controlword
            force-vlan-vc-forwarding
            split-horizon-group &quot;mesh&quot;
            exit
----------------------------------------------
</code></pre></div> <p>The MPLS transport tunnel between PEs can be signaled using LDP or RSVP-TE. LDP based pseudowires can be automatically instantiated. RSVP-TE based SDPs have to be pre-provisioned. In this post I rely on automatically created LDP LSP. Using this mechanism SDPs will be auto-instantiated.</p> <p>A keyword <code>controlword</code> indicates that control word must be used in dataplane. A pseudowire template is required containing a split horizon group. Each SDP created with this template is contained within a split horizon group so that traffic cannot be forwarded between them.</p> <p>By using <code>force-vlan-vc-forwarding</code> command we force a VE router to push service-delimiting vlan-id when sending data on PW (it is PW vlan-tagged mode). By default service-delimiting tag will be stripped off (equals to PW raw mode).</p> <p>Next section carries bgp-vpls specific commands:</p> <div class=highlight><pre><span></span><code>bgp-vpls
    max-ve-id 10
    ve-name &quot;BLUE&quot;
    ve-id 1
    exit
    no shutdown
exit
</code></pre></div> <p>In this section VPLS Edge name should be configured along with <code>ve-id</code>. What is specific to Nokia SR OS is the necessity to configure <code>max-ve-id</code> value.<br> The choice of ve-id is crucial in ensuring efficient allocation of de-multiplexer labels. The most efficient choice is for ve-ids to be allocated starting at 1 and incrementing for each PE as the following section explains.</p> <p>The <code>max-ve-id</code> value determines the range of the ve-id value that can be configured. If a PE receives a BGP-VPLS update containing a ve-id with a greater value than the configured <code>max-ve-id</code>, then the update is dropped and no service labels are installed for this ve-id.</p> <blockquote> <p>Note: For Juniper it is not mandatory (but possible) to configure maximum VE devices in a service.</p> </blockquote> <p>The rest of the service configuration goes like this:</p> <div class=highlight><pre><span></span><code>            stp
                shutdown
            exit
            sap 1/1/2:10 create
                no shutdown
            exit
            no shutdown
</code></pre></div> <p>Important part here is <code>sap</code> (service access point) binding. Command <code>sap 1/1/2:10</code> basically tells that frames coming in <code>port 1/1/2</code> encapsulated with <code>vlan-id 10</code> will be attached to this VPLS service. Note, that <code>vlan-id 10</code> is a service delimiter. Read more about processing of vlan tags <a href="https://infocenter.alcatel-lucent.com/public/7750SR140R4/topic/com.sr.l2/html/vpls.html?cp=5_2_2_2#i4833010">here</a>.</p> <p>Since our topology is loop-free we do not need to run STP, thus it is shutdowned.</p> <p>Juniper configuration of a service is as follows. A couple of lines need to be explained, while most of them are pretty standard:</p> <div class=highlight><pre><span></span><code>root@R2# show routing-instances VPLS-BLUE
instance-type vpls;
vlan-id 10;
interface ge-0/0/1.600;
route-distinguisher 2.2.2.2:10;
vrf-target target:65000:10;
protocols {
    vpls {
        control-word;
        no-tunnel-services;
        site CE2 {
            site-identifier 2;  ## VE-ID
            interface ge-0/0/1.600;
        }
    }
}
</code></pre></div> <p>For VPLS service Juniper offers two types of routing instances: vpls and virtual-switch. Differences between them covered for example in the <a href=http://shop.oreilly.com/product/0636920033905.do>MPLS in the SDN Era</a> book chapter 7. I used a simple <code>vpls</code> instance.</p> <p>The reason for <code>no-tunnel-services</code> covered in this <a href=https://www.juniper.net/documentation/en_US/junos14.2/topics/usage-guidelines/vpls-configuring-without-tunnel-services-pic.html>article</a>.</p> <p><code>vlan-id 10</code> statement used for vlan-normalization, refer to the next section for the details.</p> <h4 id=vlan-handling-in-vpls>VLAN handling in VPLS<a class=headerlink href=#vlan-handling-in-vpls title="Permanent link">#</a></h4> <p>Most common problem with VPLS services are VLAN handling when vlan-id on attachment circuits differs. And our topology is a perfect example of this, two ACs use different vlans (10 on R1 and 600 on R2). At the same time these vlan-ids are of service-delimiting purpose, meaning that they are not CE provisioned vlans, but actually SPs assigned for multiplexing different customers/services on a single AC.</p> <p>Handling of service-delimiting vlans is different on Nokia and Juniper. Take a look at Fig. 70 and refer once again to <a href=http://shop.oreilly.com/product/0636920033905.do>MPLS in the SDN Era</a> book chapter 7 where each of VLAN modes discussed in details:</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/172931/21639405.11d/0_8b21d_319fce5b_orig.png><img src=http://img-fotki.yandex.ru/get/172931/21639405.11d/0_8b21d_319fce5b_XL.png alt width=523 height=800></a> </div> <h4 id=control-plane-walk-through>Control plane walk through<a class=headerlink href=#control-plane-walk-through title="Permanent link">#</a></h4> <p>To assemble all the pieces discussed earlier into a picture I will cover things that happen in control and data planes during the VPLS service creation and operation.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/58675/21639405.11d/0_8b21e_95f1af3e_orig.png><img src=http://img-fotki.yandex.ru/get/58675/21639405.11d/0_8b21e_95f1af3e_XL.png alt width=800 height=674></a> </div> <p><strong>Step 1</strong><br> For simplicity of discussion lets assume that router R1 has its VPLS service configured first and send MP-BGP Update to Route Reflector. BGP Update consists of elements we have covered in previous sections of this post.</p> <p>Worth mentioning here is that R1 sends only one label block of size 8 (despite that <code>max-ve-id</code> has been configured for 10 VE devices). This is the result of optimization techniques, router does not send all the blocks, it will send ones that necessary once it receive an update message with CE-ID which is not part of blocks advertised by a router so far.</p> <p><strong>Step 2</strong><br> R2 receives update from R1 (via R3) and goes through PW setup process discussed earlier. At this step R2 calculates a service MPLS label it will use in the data plane.</p> <p><strong>Step 3</strong><br> Now operator enables VPLS service on R2 and its R2's turn to send BGP Update towards R1.</p> <p><strong>Step 4</strong><br> R1 follows the same procedure as R2 did in step 2.<br> At the end of control plane messages exchange we should have a pseudowire established with a certain characteristics and the service status should be healthy. Lets ensure that from control plane perspective VPLS service is up and running on both platforms.</p> <p>Getting status of VPLS service with id 10:</p> <div class=highlight><pre><span></span><code>A:R1# show service id 10 base 

===============================================================================
Service Basic Information
===============================================================================
Service Id        : 10                  Vpn Id            : 0
Service Type      : VPLS                
Name              : (Not Specified)
Description       : (Not Specified)
Customer Id       : 1                   Creation Origin   : manual
Last Status Change: 03/13/2016 07:59:09 
Last Mgmt Change  : 03/13/2016 07:59:34 
Etree Mode        : Disabled            
Admin State       : Up                  Oper State        : Up
MTU               : 1514                Def. Mesh VC Id   : 10
SAP Count         : 1                   SDP Bind Count    : 1
Snd Flush on Fail : Disabled            Host Conn Verify  : Disabled
SHCV pol IPv4     : None
Propagate MacFlush: Disabled            Per Svc Hashing   : Disabled
Allow IP Intf Bind: Disabled            
Fwd-IPv4-Mcast-To*: Disabled            Fwd-IPv6-Mcast-To*: Disabled
Def. Gateway IP   : None                
Def. Gateway MAC  : None                
Temp Flood Time   : Disabled            Temp Flood        : Inactive
Temp Flood Chg Cnt: 0                   
SPI load-balance  : Disabled            
TEID load-balance : Disabled            
Src Tep IP        : N/A                 
VSD Domain        : &lt;none&gt;

-------------------------------------------------------------------------------
Service Access &amp; Destination Points
-------------------------------------------------------------------------------
Identifier Type         AdmMTU  OprMTU  Adm  Opr
-------------------------------------------------------------------------------
sap:1/1/2:10                             q-tag        8704    8704    Up   Up
sdp:17407:4294967293 SB(2.2.2.2)         BgpVpls      0       8678    Up   Up
===============================================================================
</code></pre></div> <p>Basic information about a service shows us its Admin and Oper states. As well as <code>sap</code> and <code>sdp</code> this service has along with their statuses. To see the service labels calculated on a Nokia router you need to query for SDP section of a service:</p> <div class=highlight><pre><span></span><code>A:R1# show service id 10 sdp detail | match &quot;Egress Label&quot;
Ingress Label      : 131064                   Egress Label      : 262145
</code></pre></div> <p>So R1 will use service label <code>262145</code> when will send traffic destined to a VPLS service configure on R2.</p> <p>For Juniper basic verification of VPLS service goes like this:</p> <div class=highlight><pre><span></span><code>root@R2# run show vpls connections instance VPLS-BLUE 

Layer-2 VPN connections:
Instance: VPLS-BLUE
  Local site: CE2 (2)
    Number of local interfaces: 1
    Number of local interfaces up: 1
    IRB interface present: no
    ge-0/0/1.600       
    lsi.1049088         1         Intf - vpls VPLS-BLUE local site 2 remote site 1
    Label-base        Offset     Size  Range     Preference
    262145            1          8      8         100   
    connection-site           Type  St     Time last up          # Up trans
    1                         rmt   Up     Nov 11 19:30:43 2016           1
      Remote PE: 1.1.1.1, Negotiated control-word: Yes (Null)
      Incoming label: 262145, Outgoing label: 131064
      Local interface: lsi.1049088, Status: Up, Encapsulation: VPLS
        Description: Intf - vpls VPLS-BLUE local site 2 remote site 1
    Connection History:
        Nov 11 19:30:43 2016  status update timer  
        Nov 11 19:30:43 2016  loc intf up                  lsi.1049088
        Nov 11 19:30:43 2016  PE route changed     
        Nov 11 19:30:43 2016  Out lbl Update                    131064
        Nov 11 19:30:43 2016  In lbl Update                     262145
        Nov 11 19:30:43 2016  loc intf down
</code></pre></div> <p>Both access (ge-0/0/1.600) and tunnel (lsi.1049088) interfaces are shown along with calculated service label values.</p> <h4 id=data-plane-walk-through>Data plane walk through<a class=headerlink href=#data-plane-walk-through title="Permanent link">#</a></h4> <p>And now we are ready to explore data plane! In VPLS data plane is crucial as it is the only way how MAC addresses can be learned. With this being said it is clear that since no MACs were learned during control plane messages exchange, CE devices <strong>have no ARP entries</strong> except for their own IP addresses.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/6300/21639405.11d/0_8b21f_f3c8fcab_orig.png><img src=http://img-fotki.yandex.ru/get/6300/21639405.11d/0_8b21f_f3c8fcab_XL.png alt width=683 height=800></a> </div> <p><strong>ARP handling</strong><br> To demonstrate data plane operations I will issue a ping from CE1 (<code>192.168.1.1/24</code>) to CE2 (<code>192.168.1.2/24</code>). Since ARP table on CE1 is empty it is necessary to start with ARP request, but to keep this section a bit shorter I will omit ARP packets propagation since the same path will IP packets take.</p> <p>The only difference ARP packets have is that they represent layer 2 broadcast traffic, therefore these traffic will be replicated by VPLS VE router and sent out from any local VPLS interface as well as out from every pseudowire of particular VPLS instance. During ARP packets propagation local MAC tables on R1 and R2 will be populated with MAC-IP pairs of CE routers.</p> <p><strong>Known unicast</strong><br> Thanks to ARP process, a packet destined from CE1 to CE2 will be a known unicast by nature, since destination IP address of <code>192.168.1.2</code> is known in VPLS MAC tables of R1 and R2.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/196736/21639405.11d/0_8b220_4b717aba_orig.png><img src=http://img-fotki.yandex.ru/get/196736/21639405.11d/0_8b220_4b717aba_XL.png alt width=800 height=734></a> </div> <p><strong>Step 1</strong><br> When a request to ping CE2 address arises on CE1, the latter checks its ARP table to see if it has Layer 2 address corresponding to this IP. Since ARP process has already been done, CE1 has MAC address of CE2 resolved. Thus it can construct the whole frame and send it out via its interface towards R1.</p> <p>Since interface <code>toCE2</code> has particular <code>VLAN ID 10</code> assigned, the resulting packet will resemble the following structure ICMP-IP-VlanID-Ethernet:</p> <p>Note, no MPLS encapsulation happens on the wire between CE1 and R1, it is plain IP packet with Ethernet on data layer.</p> <p><strong>Step 2</strong><br> At Step 2.1 R1 receives the data on the service access point <code>1/1/2:10</code> which is included in VPLS service with <code>id 10</code>. R1 queries with destination MAC address (<code>50:01:00:05:00:01</code>) VPLS's forwarding database (fdb or MAC table) and (thanks to previous ARP messages) matches a service distribution point (sdp or transport tunnel) where this MAC was learned from.</p> <p>R1 knows what label (or demultiplexor) it should use when placing a customers packet on a pseudowire, this label were calculated based on the seed material received during control plane operations. Step 2.3 depicts how R1 assembles all the pieces to place a packet on a PW. It is worth to note that we see only service label on the wire, transport label is missing due to <code>implicit null</code> label received from R2.</p> <div align=center> <a href=http://img-fotki.yandex.ru/get/196237/21639405.11d/0_8b221_60a6cbba_orig.png><img src=http://img-fotki.yandex.ru/get/196237/21639405.11d/0_8b221_60a6cbba_XL.png alt width=800 height=791></a> </div> <p><strong>Step 3</strong><br> When R2 receives a packet from R1 it strips Ethernet and VLAN headers and analyzes a MPLS label. As was discussed, label values were calculated during control plane convergency, therefore R2 has a proper label action for a label value of <code>262145</code> (Step 3.2).</p> <p>By using <code>no-tunnel-services</code> command on R2 we created a label-switched interface (LSI) to provide VPLS functionality. An LSI MPLS label is used as the inner label for VPLS. This label maps to a VPLS routing instance. On the PE router, the LSI label is stripped and then mapped to a logical LSI interface. The Layer 2 Ethernet frame is then forwarded using the LSI interface to the correct VPLS routing instance. Step 3.1 shows LSI interface and VPLS service binding.</p> <p>Since VPLS service behaves like a normal switch packet forwarding decisions are based on MAC table lookup. So far we decapsulated our packet up customer Ethernet header, which has <code>Dest MAC: 50:01:00:05:00:01</code>. R2 consults a MAC table inside VPLS service (Step 3.3) and finds out that destination MAC was seen behind <code>ge-0/0/1.600</code> interface (this MAC was learned during ARP operation). This information is enough for R2 to decide in what direction customers traffic should go further.</p> <p>Step 3.4 shows that R2 sends out of its <code>ge-0/0/0.600</code> interface a packet towards a recipient CE2 and uses the <code>VLAN ID 600</code> since this is the tag used by this attachment circuit. Note, that in step 2.3 we had <code>VLAN ID 10</code> placed by R1 because of <code>force-vlan-vc-forwarding</code> command on R1. This VLAN has been recognized by R2 because of this part in its service configuration:</p> <div class=highlight><pre><span></span><code>root@R2# show routing-instances VPLS-BLUE
instance-type vpls;
vlan-id 10;
interface ge-0/0/1.600;
route-distinguisher 2.2.2.2:10;
vrf-target target:65000:10;
protocols {
    vpls {
        control-word;
        no-tunnel-services;
        site CE2 {
            site-identifier 2;  ## VE-ID
            interface ge-0/0/1.600;
        }
    }
}
</code></pre></div> <p>R2 sees that this is the VLAN ID used by VPLS and swaps it with VLAN ID used on its attachment circuit when sending traffic out of its <code>ge-0/0/0.600</code> interface.This is how you normalize VLAN IDs in data plane.</p> <p><strong>Step 4</strong><br> In the end CE2 receives a standard ICMP packet encapsulated within Ethernet 802.1q frame and processes it accordingly.</p> <p>Return traffic follows the same login in the opposite direction with a slight change in MPLS operation. Since Nokia vSR does not use implicit null label, you will see two labels in the data plane between R2 and R1. Top label will be LDP transport label, and bottom label will act as a service VPLS label.</p> <h3 id=references-further-reading>References &amp; further reading<a class=headerlink href=#references-further-reading title="Permanent link">#</a></h3> <ul> <li><a href=http://www.rfcreader.com/#rfc4761>RFC4761</a> Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling</li> <li><a href=http://www.rfcreader.com/#rfc4448>RFC4448</a> Encapsulation Methods for Transport of Ethernet over MPLS Networks</li> <li><a href=https://tools.ietf.org/html/draft-ietf-bess-vpls-multihoming>draft-vpls-multihoming</a> BGP based Multi-homing in Virtual Private LAN Service</li> <li><a href="https://infocenter.alcatel-lucent.com/public/7750SR140R4/topic/com.sr.l2/html/vpls_config.html?cp=5_2_5">Configuring VPLS on SR OS</a></li> <li><a href=https://www.juniper.net/techpubs/en_US/junos14.1/topics/concept/vpn-vpls-introduction.html>VPLS Services</a> in JunOS</li> <li><a href=https://infoproducts.alcatel-lucent.com/html/0_add-h-f/93-0267-HTML/7X50_Advanced_Configuration_Guide/BGP-VPLS.html>Configuring and troubleshooting BGP VPLS on Nokia SROS</a></li> <li><a href="https://infocenter.alcatel-lucent.com/public/7750SR140R4/topic/com.sr.l2/html/vpls.html?cp=5_2">VPLS services explained (Nokia official doc)</a></li> <li><a href=http://shop.oreilly.com/product/0636920033905.do>MPLS in the SDN Era</a></li> </ul> <h2 id=__comments>Comments</h2> <script src=https://giscus.app/client.js data-repo=hellt/netdevops.me data-repo-id="MDEwOlJlcG9zaXRvcnkzNTkzNTc5ODc=" data-category="Show and tell" data-category-id=DIC_kwDOFWteI84CRmVn data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async>
    </script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../building-web-front-end-for-python-scripts-with-flask/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Building Web front end for Python scripts with Flask" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Building Web front end for Python scripts with Flask </div> </div> </a> <a href=../../2017/destroy-and-undefine-kvm-vms-in-a-single-run/ class="md-footer__link md-footer__link--next" aria-label="Next: Destroy and Undefine KVM VMs in a single run" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Destroy and Undefine KVM VMs in a single run </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://github.com/hellt target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/ntdvps target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.top", "navigation.instant", "navigation.tabs", "search.suggest", "content.code.annotate", "toc.follow", "content.tooltips", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.720157f5.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.f4c6f307.min.js></script> </body> </html>