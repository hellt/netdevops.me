<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>How to patch Ubuntu 20.04 Focal Fossa with UKSM? |</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content><meta name=twitter:title content="How to patch Ubuntu 20.04 Focal Fossa with UKSM?"><meta name=twitter:description content><meta name=twitter:creator content="@ntdvps"><meta name=Description content="DevOps applied to networking"><meta property="og:title" content="How to patch Ubuntu 20.04 Focal Fossa with UKSM?"><meta property="og:description" content="Running multiple VMs out of the same disk image is something we, network engineers, do quite often. A virtualized network usually consists of a few identical virtualized network elements that we interconnected with links making a topology.
 In the example above we have 7 virtualized routers in total, although we used only two VM images to create this topology (virtualized Nokia router and it&rsquo;s Juniper vMX counterpart). Each of this VMs require some memory to run, for the simplicity, lets say each VM requires 5GB of RAM."><meta property="og:type" content="article"><meta property="og:url" content="https://netdevops.me/2021/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-18T06:00:00+00:00"><meta property="article:modified_time" content="2021-04-19T12:35:46+02:00"><meta name=application-name content="NetDevOps"><meta name=apple-mobile-web-app-title content="NetDevOps"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://netdevops.me/2021/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How to patch Ubuntu 20.04 Focal Fossa with UKSM?","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/netdevops.me\/2021\/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm\/"},"genre":"posts","keywords":"uksm, ubuntu","wordCount":1425,"url":"https:\/\/netdevops.me\/2021\/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm\/","datePublished":"2021-02-18T06:00:00+00:00","dateModified":"2021-04-19T12:35:46+02:00","description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':''==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:''==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header><div class="desktop header" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class="header-logo logo-svg"><img loading=lazy decoding=async class=logo src=/android-chrome-192x192.png alt=/android-chrome-192x192.png title=/android-chrome-192x192.png></a></div><div class=menu><nav><h2 class=display-hidden>Основная навигация</h2><ul class=menu-inner><li><a class=menu-item href=/posts/>Posts</a></li><li><a class=menu-item href=/about>About me</a></li><li><a class=menu-item href=/tags/>Tags</a></li></ul></nav><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=Search... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-desktop><span class="svg-icon icon-loading"></span></span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="mobile header" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=NetDevOps class=header-logo><img loading=lazy decoding=async class=logo src=/android-chrome-192x192.png alt=/android-chrome-192x192.png title=/android-chrome-192x192.png></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=Search... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><span class="svg-icon icon-search"></span></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><span class="svg-icon icon-cancel"></span></a><span class="search-button search-loading" id=search-loading-mobile><span class="svg-icon icon-loading"></span></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><nav><h2 class=display-hidden>Основная навигация</h2><ul><li><a class=menu-item href=/posts/ title>Posts</a></li><li><a class=menu-item href=/about title>About me</a></li><li><a class=menu-item href=/tags/ title>Tags</a></li></ul></nav><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div></header><main class=main><div class="container content-article theme-classic"><div class=toc id=toc-auto><div class=toc-title>Contents</div><div class="toc-content always-active" id=toc-content-auto></div></div><article><header class=header-post><div class=post-title><div class=post-all-meta><nav class=breadcrumbs><ol><li><a href=/>Home</a></li><li>How to patch Ubuntu 20.04 Focal Fossa with UKSM?</li></ol></nav><h1 class="single-title flipInX">How to patch Ubuntu 20.04 Focal Fossa with UKSM?</h1><div class="post-meta summary-post-meta"><span class="post-meta-date meta-item"><span class="svg-icon icon-clock"></span><time class=timeago datetime=2021-02-18>2021-02-18</time>
</span><span class="post-meta-words meta-item"><span class="svg-icon icon-pencil"></span>1425 words</span>
<span class="post-meta-reading meta-item"><span class="svg-icon icon-stopwatch"></span>7 minutes</span></div></div></div></header><div class="article-post toc-start"><div class="content-block content-block-first content-block-position"><div class="post single"><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#1-get-uksm-patches>1 Get UKSM patches</a></li><li><a href=#2-get-the-kernel-source-code>2 Get the kernel source code</a></li><li><a href=#3-patch-the-source>3 Patch the source</a></li><li><a href=#4-build-the-patched-kernel>4 Build the patched kernel</a></li><li><a href=#5-install-the-kernel>5 Install the kernel</a></li><li><a href=#6-verify-uksm-is-working>6 Verify UKSM is working</a></li><li><a href=#7-get-the-built-kernel>7 Get the built kernel</a></li><li><a href=#ps-ksm-vs-uksm>PS. KSM vs UKSM</a></li></ul></nav></div></div><div style="margin:20px 0"><span class=post-update><span class=s>Updated on 2021-04-19</span></span></div><p>Running multiple VMs out of the same disk image is something we, network engineers, do quite often. A virtualized network usually consists of a few identical virtualized network elements that we interconnected with links making a topology.</p><p><img loading=lazy decoding=async class=render-image src=https://img-fotki.yandex.ru/get/6605/21639405.11c/0_86301_84e43902_orig.png alt=topo title=0_86301_84e43902_orig.png></p><p>In the example above we have 7 virtualized routers in total, although we used only two VM images to create this topology (virtualized Nokia router and it&rsquo;s Juniper vMX counterpart). Each of this VMs require some memory to run, for the simplicity, lets say each VM requires 5GB of RAM.</p><p>So roughly, the above topology will claim 30-35GB of RAM in order to operate. Enriching the topology by adding more VMs of the same type will continue to push for more memory, thus running big topologies often becomes an exercise of hunting for RAM.</p><p>Luckily, there are technologies like Kernel Same Merging (KSM) and it&rsquo;s enhanced version Ultra-KSM (UKSM) that are able to lift the memory requirement for use cases like above. In a nutshell, they allow to merge mem pages of the same content, effectively reusing the same memory pages between virtual machines.</p><blockquote><p>from <a href=https://www.usenix.org/system/files/conference/fast18/fast18-xia.pdf target=_blank rel="noopener noreffer">UKSM usenix paper</a><br>Memory deduplication can reduce memory footprint by eliminating redundant pages. This is particularly true when similar OSes/applications/data are used across different VMs.
Essentially, memory deduplication detects those redundant pages, and merges them by enabling transparent page sharing.</p></blockquote><p>Although UKSM is not a silver bullet for every application and use case, it tends to be a very good fit for hypervisors used to run virtualized networking topologies. For that reason the EVE-NG network emulation platform embeds UKSM in their product.</p><p>So I decided to bring UKSM to my Ubuntu 20.04 VM that I use to launch virtualized routers and containers to witness the benefits/issues of having it.</p><p><img loading=lazy decoding=async class=render-image src=https://gitlab.com/rdodin/pics/-/wikis/uploads/5ac1a3e597d26fbf94d18e7d898e6a7c/image.png alt=uksm title=image.png></p><p>The results look promising. Running 6 VMs with a system memory footprint of one is a solid memory optimization, especially considering that performance penalty is something we can bare in a lab where we mostly play with control plane features.</p><p><a href=https://gitlab.com/rdodin/pics/-/wikis/uploads/55317652924b2ad3d083cf6719b5cd1e/image.png target=_blank rel="noopener noreffer"><img loading=lazy decoding=async class=render-image src=https://gitlab.com/rdodin/pics/-/wikis/uploads/55317652924b2ad3d083cf6719b5cd1e/image.png alt=uksm-compare title=image.png></a></p><p>Now if you want to bring UKSM to your hypervisor you will need to jump through some hoops, as UKSM is a kernel feature that is not available as a module. This means that you need to build a kernel with UKSM enabled, and that might be a barrier too high for some of you. It was for me, until I spent a night trying multiple things until it worked, so let me share with you the process and the outcomes so that you can rip the benefits without having all the trouble of trial-and-error routine.</p><h4 id=0-tldr class=headerLink><a href=#0-tldr class=header-mark></a>0 TL;DR</h4><ul><li>Download UKSM patches</li><li>Download kernel source</li><li>Apply UKSM patch</li><li>Build kernel</li><li>Install kernel</li></ul><h2 id=1-get-uksm-patches class=headerLink><a href=#1-get-uksm-patches class=header-mark></a>1 Get UKSM patches</h2><p>As mentioned above, UKSM is a kernel feature and the way it is distributed nowadays is via <code>patch</code> files that are available in <a href=https://github.com/dolohow/uksm target=_blank rel="noopener noreffer">this Github repo</a>. So our first step is cloning this repo to get the patches for recent (4.x and 5.x) kernels. Easy start.</p><h2 id=2-get-the-kernel-source-code class=headerLink><a href=#2-get-the-kernel-source-code class=header-mark></a>2 Get the kernel source code</h2><p>As the UKSM patches need to be applied to a kernel source code, we need to get one. Here things can get a tad complicated.</p><p>There are many different kernels out there:</p><ul><li>vanilla Linux kernels blessed by Linus himself</li><li>distribution kernels (Debian, Ubuntu, Fedora, etc)</li><li>third party kernels with the best hacks</li></ul><p>The UKSM patches were created against the vanilla Linux kernel, but my Ubuntu VM runs a kernel that was produced by Ubuntu team.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># on Ubuntu 20.04</span>
uname -a
Linux kernel-build 5.4.0-48-generic <span class=c1>#52-Ubuntu SMP Thu Sep 10 10:58:49 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre></td></tr></table></div></div><p>Vanilla linux kernel uses X.Y.Z versioning. If anything is appended after X.Y.Z (like <code>-48-generic</code>) in my case, it indicates that the kernel comes from a distributor (Ubuntu in my case).</p><blockquote><p>Things that didn&rsquo;t work:<br>1 At first I tried to download the original Linux kernel, but the build process failed without giving me a good explanation.<br>2 Download latest 5.4 kernel from Ubuntu - UKSM patch didn&rsquo;t apply, as the code has changed apparently</p></blockquote><p>After multiple rinse-repeat iterations I found out that I can take the Ubuntu kernel <code>5.4.0-48.52</code> as UKSM patch applies to it no problem and the build succeeds.</p><p>How did I get one? Oh, that is also something worth documenting, as the path to knowing it is paved with broken links and articles dated early 2000s. First, go <a href=https://git.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/focal/refs/ target=_blank rel="noopener noreffer">here</a> and check what tags/branches are available for Focal release of Ubuntu. Once the tag/branch name is found, pull this one only, to save on data transfer:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># fetch single branch/tag only</span>
git clone --depth <span class=m>1</span> --single-branch --branch Ubuntu-5.4.0-48.52 https://git.launchpad.net/<span class=se>\~</span>ubuntu-kernel/ubuntu/+source/linux/+git/focal
</code></pre></td></tr></table></div></div><p>Fast forward 180MB of kernel source code and you have it in <code>focal</code> directory. Next is patching.</p><h2 id=3-patch-the-source class=headerLink><a href=#3-patch-the-source class=header-mark></a>3 Patch the source</h2><p>To embed the UKSM code into the kernel code we need to use the <a href=https://en.wikipedia.org/wiki/Patch_%28Unix%29 target=_blank rel="noopener noreffer">patch</a> utility.</p><p>In the UKSM repo we cloned in step 1 we have patch files per kernel MAJOR.MINOR version. As we downloaded the Ubuntu kernel 5.4.0-something, let&rsquo;s try and apply the patch from <code>uksm-5.4.patch</code> patch file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># assuming we cloned UKSM repo in ~</span>
<span class=nb>cd</span> focal
patch -p1 &lt; ~/uksm/v5.x/uksm-5.4.patch
</code></pre></td></tr></table></div></div><blockquote><p><strong>patch command must not return any failures. If it does, do not proceed!</strong></p></blockquote><p>This is the most important step, the patch must apply cleanly, meaning that if you see any <code>FAILURE</code> strings in its output (or <code>echo $?</code> doesn&rsquo;t return <code>0</code>) it means the patch is not compatible with the kernel.</p><p>The tricky part was to find the <code>Ubuntu kernel+patch file</code> combination that didn&rsquo;t result in an error. For me the merry pair was <code>Ubuntu-5.4.0-48.52 + uksm-5.4.patch</code>.</p><h2 id=4-build-the-patched-kernel class=headerLink><a href=#4-build-the-patched-kernel class=header-mark></a>4 Build the patched kernel</h2><p>Once the patch is cleanly applied we build the kernel.</p><blockquote><p>Here I feel obliged to say that it was my first kernel build, so the explanations are surely not technically correct, but it works, so why not sharing my view on it.</p></blockquote><p>To build the kernel we fist need to create the build configuration file. As we use the kernel that we actually run (5.4.0-48) we can reuse the existing kernel configuration:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># being in focal directory</span>
make oldconfig
</code></pre></td></tr></table></div></div><p>This command will run the config generation script and it prompted me that there is a UKSM config option added (as a result of a UKSM patch) and if I want to use it instead of the default KSM option. I typed <code>1</code> in the prompt confirming that I need UKSM to be an acting KSM feature. That is the only input that was needed.</p><p>After the config is made, start the build process:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># j8 is the number of cores I had on my machine</span>
make -j8 deb-pkg <span class=nv>LOCALVERSION</span><span class=o>=</span>-uksm
</code></pre></td></tr></table></div></div><p>40 minutes later I had four debian packages created:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>~/focal <span class=c1>#Ubuntu-5.4.0-48.52 !15 ?16                                                              root@devbox-u20 08:36:17</span>
❯ ls -la ../*deb
-rw-r--r-- <span class=m>1</span> root root  <span class=m>11441428</span> Feb <span class=m>17</span> 20:50 ../linux-headers-5.4.60-uksm_5.4.60-uksm-1_amd64.deb
-rw-r--r-- <span class=m>1</span> root root <span class=m>910558572</span> Feb <span class=m>17</span> 20:58 ../linux-image-5.4.60-uksm-dbg_5.4.60-uksm-1_amd64.deb
-rw-r--r-- <span class=m>1</span> root root  <span class=m>61261664</span> Feb <span class=m>17</span> 20:50 ../linux-image-5.4.60-uksm_5.4.60-uksm-1_amd64.deb
-rw-r--r-- <span class=m>1</span> root root   <span class=m>1071476</span> Feb <span class=m>17</span> 20:50 ../linux-libc-dev_5.4.60-uksm-1_amd64.deb
</code></pre></td></tr></table></div></div><h2 id=5-install-the-kernel class=headerLink><a href=#5-install-the-kernel class=header-mark></a>5 Install the kernel</h2><p>Out of these four files I needed to install all but <code>*dbg*</code> files:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo dpkg -i ../linux-headers-5.4.60-uksm_5.4.60-uksm-1_amd64.deb
sudo dpkg -i ../linux-image-5.4.60-uksm_5.4.60-uksm-1_amd64.deb
sudo dpkg -i ../linux-libc-dev_5.4.60-uksm-1_amd64.deb
</code></pre></td></tr></table></div></div><p>Once this is done, update your grub config to have the new kernel load by default:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo update-grub
</code></pre></td></tr></table></div></div><p>And <code>reboot</code>. Done!</p><h2 id=6-verify-uksm-is-working class=headerLink><a href=#6-verify-uksm-is-working class=header-mark></a>6 Verify UKSM is working</h2><p>After the reboot, ensure that your new kernel is running by examining <code>uname -r</code> output. It should match the new version.</p><p>Launch some VMs, and check the memory consumption as well as the number of sharing pages with <code>cat /sys/kernel/mm/uksm/pages_sharing</code>.</p><h2 id=7-get-the-built-kernel class=headerLink><a href=#7-get-the-built-kernel class=header-mark></a>7 Get the built kernel</h2><p>If you don&rsquo;t want to build a kernel yourself (and one night lost I can see why), I packaged the deb files into a bare container which you can pull and copy the files from to install the kernel on your Ubuntu machine:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># pull the container and copy the deb files out of it</span>
docker pull ghcr.io/hellt/ubuntu-5.4.60-uksm:0.1
<span class=nv>id</span><span class=o>=</span><span class=k>$(</span>docker create ghcr.io/hellt/ubuntu-5.4.60-uksm:0.1 foo<span class=k>)</span>
docker cp <span class=nv>$id</span>:/uksm-kernel .
</code></pre></td></tr></table></div></div><p>All you need to do is to start with step 5 and you should be all good. Thanks for tuning in!</p><h2 id=ps-ksm-vs-uksm class=headerLink><a href=#ps-ksm-vs-uksm class=header-mark></a>PS. KSM vs UKSM</h2><p>There is a KSM kernel feature that allows you to achieve some memory sharing via a similar mechanisms. It can be that KSM will deliver a similar performance on your setup, and being included in your kernel by default it might be worth checking out.</p><p>The following resources will help you start with KSM:</p><ul><li><a href=https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_tuning_and_optimization_guide/chap-ksm#sect-KSM-The_KSM_tuning_service>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_tuning_and_optimization_guide/chap-ksm#sect-KSM-The_KSM_tuning_service</a></li><li><a href=https://gist.github.com/mapuo/17e3b253222172c1659782eb14150c3a>https://gist.github.com/mapuo/17e3b253222172c1659782eb14150c3a</a></li><li><a href=https://www.linux-kvm.org/page/KSM#Enabling_KSM>https://www.linux-kvm.org/page/KSM#Enabling_KSM</a></li><li><a href=https://openterprise.it/2019/03/enable-ksm-kernel-same-page-merging-on-fedora/>https://openterprise.it/2019/03/enable-ksm-kernel-same-page-merging-on-fedora/</a></li><li><a href=https://rotelok.com/enable-ksm-centos7-debian/>https://rotelok.com/enable-ksm-centos7-debian/</a></li><li><a href=https://www.kernel.org/doc/Documentation/vm/ksm.txt>https://www.kernel.org/doc/Documentation/vm/ksm.txt</a></li></ul></div><footer><div class=post><div class=post-share><div class=share-link><a class="share-icon share-twitter" href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://netdevops.me/2021/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm/ data-title="How to patch Ubuntu 20.04 Focal Fossa with UKSM?" data-via=ntdvps data-hashtags=uksm,ubuntu><span class="svg-social-icon icon-twitter"></span></a></div><div class=share-link><a class="share-icon share-facebook" href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://netdevops.me/2021/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm/ data-hashtag=uksm><span class="svg-social-icon icon-facebook"></span></a></div><div class=share-link><a class="share-icon share-linkedin" href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://netdevops.me/2021/how-to-patch-ubuntu-20.04-focal-fossa-with-uksm/><span class="svg-social-icon icon-linkedin"></span></a></div></div><div class=post-tags><a href=/tags/uksm/ class=tag>uksm</a><a href=/tags/ubuntu/ class=tag>ubuntu</a></div></div></footer></div><div id=toc-final></div></div></article><aside class=article-post><div class="content-block content-block-position block-donate"><div class=post><div class=title><div style=text-align:center><svg width="90" height="90" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M376 30c-27.783.0-53.255 8.804-75.707 26.168-21.525 16.647-35.856 37.85-44.293 53.268-8.437-15.419-22.768-36.621-44.293-53.268C189.255 38.804 163.783 30 136 30 58.468 30 0 93.417.0 177.514c0 90.854 72.943 153.015 183.369 247.118l62.099 53.414C248.38 480.596 252.12 482 256 482s7.62-1.404 10.532-3.953l62.111-53.425C439.057 330.529 512 268.368 512 177.514 512 93.417 453.532 30 376 30z"/></svg></div><div style=text-align:center;margin-top:20px><span class=title>If any of my work was helpful, you can:</span></div></div><div class=donate-text><ul><li>✉️ Share this post with your colleagues</li><li>💬 Comment, ask questions and report any issues/typos found</li><li>💰 Make a one-time or recurring donation to support my work</li></ul></div><div class=donate-button><a href=https://github.com/sponsors/hellt class="button button-big button-white">Donate</a></div></div></div></aside><section class="page single comments content-block-position"><h1 class=display-hidden>Комментарии</h1><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></section></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.82.0">Hugo</a> | Theme - <a href="https://ublogger.netlify.app/?utm_source=https://netdevops.me/&utm_medium=footer&utm_campaign=config&utm_term=2.0.1" target=_blank title="uBlogger 2.0.1">uBlogger</a></div><div class=footer-line><i class="svg-icon icon-copyright"></i><span>2015 - 2021</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><aside id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="svg-icon icon-arrow-up"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="svg-icon icon-comments-fixed"></i></a></aside><link rel=stylesheet href=/drawio.css><script src=/lib/smooth-scroll/smooth-scroll.min.js></script><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:20},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"comment",lightTheme:"github-light",repo:"hellt/netdevops.me"}},search:{algoliaAppID:"H1AI8QKFEK",algoliaIndex:"blog",algoliaSearchKey:"0544bc3c928ba0e387c3b3353112e43d",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:60,type:"algolia"}}</script><script src=/js/theme.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101537614-1','auto'),ga('send','pageview')</script></body></html>