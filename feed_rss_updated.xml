<?xml version="1.0" encoding="UTF-8" ?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/"> <channel><title>Applying DevOps to networks</title><description>Applying DevOps to networks.</description><link>https://netdevops.me/</link><atom:link href="https://netdevops.me/feed_rss_updated.xml" rel="self" type="application/rss+xml" /><managingEditor>Roman Dodin</managingEditor><docs>https://github.com/hellt/netdevops.me</docs><language>en</language> <pubDate>Thu, 13 Oct 2022 11:22:33 -0000</pubDate> <lastBuildDate>Thu, 13 Oct 2022 11:22:33 -0000</lastBuildDate> <ttl>1440</ttl> <generator>MkDocs RSS plugin - v1.5.0</generator> <item> <title>gNMIc - gNMI CLI client and collector</title> <author>rdodin</author> <category>gnmi</category> <category>gnmic</category> <category>go</category> <category>openconfig</category> <description>&lt;h1&gt;gNMIc - gNMI CLI client and collector&lt;/h1&gt;&lt;p&gt;Despite the fact that &lt;a href=&#34;https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md&#34;&gt;gNMI&lt;/a&gt; is defacto the go-to interface for a model-driven telemetry collection, we, as a community, had no gNMI tool that was easy to install, pleasure to use, documented and pre-built for common platforms. Until now.&lt;/p&gt;&lt;p&gt;I am excited to announce the public release of &lt;a href=&#34;https://gnmic.kmrd.dev/&#34;&gt;&lt;code&gt;gnmic&lt;/code&gt;&lt;/a&gt; - a CLI client and a collector that talks gNMI to your devices.&lt;/p&gt;&lt;p&gt;!!!tip &lt;strong&gt;October 2022:&lt;/strong&gt; &lt;a href=&#34;../2022/gnmic-openconfig.md&#34;&gt;gNMIc has joined Openconfig&lt;/a&gt;.&lt;/p&gt;&lt;!-- more --&gt;&lt;h3&gt;Problem statement&lt;/h3&gt;&lt;p&gt;I am not exaggerating, there is a shortage of open source gNMI clients one can find. And when I say gNMI clients I mean the CLI clients that allow you to invoke gNMI service RPCs.&lt;/p&gt;&lt;p&gt;Earlier this year I bragged about it, in hope that my google-foo is just broken and the community knows of a gNMI client that I could download and use right away without jumping through hoops:&lt;/p&gt;&lt;p&gt;&lt;center&gt;&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;So coming back to the OpenConfig/gNMI and what a hot mess it is when it comes to the tooling.&lt;br&gt;&lt;br&gt;You would probably think that there is a top-notch gNMI CLI (or even a shell) for you to query your routers like a pro.&lt;/p&gt;&amp;mdash; Roman Dodin (@ntdvps) &lt;a href=&#34;https://twitter.com/ntdvps/status/1229845496660922368?ref_src=twsrc%5Etfw&#34;&gt;February 18, 2020&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/center&gt;&lt;/p&gt;&lt;p&gt;But that was not my google-foo, unfortunately. For the sake of completeness allow me to summarize the landscape of gNMI clients in a pre-gnmic era:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/openconfig/gnmi&#34;&gt;OpenConfig gNMI CLI client&lt;/a&gt; - thats the google search top result one gets when looking for gNMI client. A reference implementation which lacks some essential features:&lt;ul&gt;&lt;li&gt;no documentation, no &lt;a href=&#34;https://github.com/openconfig/gnmi/issues/7&#34;&gt;usage examples&lt;/a&gt; - you really better know how to read Go code to understand how to use it.&lt;/li&gt;&lt;li&gt;Get requests will require you to &lt;a href=&#34;https://github.com/openconfig/gnmi/issues/67&#34;&gt;write in proto&lt;/a&gt; syntax instead of a simple &lt;code&gt;get&lt;/code&gt; command with a path.&lt;/li&gt;&lt;li&gt;additional options like Encoding, Models are not exposed via flags.&lt;/li&gt;&lt;li&gt;no ready-made binaries - you need to have a Go tool chain to build the tool.&lt;/li&gt;&lt;li&gt;no &lt;em&gt;insecure&lt;/em&gt; support - you can kiss goodbye your lab installations without PKI.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/google/gnxi&#34;&gt;Google gnxi&lt;/a&gt; - Googles gNxI tools that include gNMI, gNOI.&lt;ul&gt;&lt;li&gt;the gNMI RPCs are split to different CLI tools which is not convenient&lt;/li&gt;&lt;li&gt;a list of flags is all you got when it comes to documentation&lt;/li&gt;&lt;li&gt;no releases to download, Go toolchain is needed&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/cisco-ie/cisco-gnmi-python#cli-usage&#34;&gt;cisco-gnmi-python&lt;/a&gt; - a Cisco Innovative Edge project that is quite decent and complete, good job! But a few improvements could have been made:&lt;ul&gt;&lt;li&gt;client doesn&#39;t allow to use insecure gRPC transport, PKI is mandatory.&lt;/li&gt;&lt;li&gt;Set requests can&#39;t set values specified on the command line.&lt;/li&gt;&lt;li&gt;CLI structure is not consistent across the commands&lt;/li&gt;&lt;li&gt;No option exposed to set the Subscription mode.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/influxdata/telegraf&#34;&gt;Telegraf&lt;/a&gt; and &lt;a href=&#34;https://github.com/nokia/ansible-networking-collections/tree/master/grpc&#34;&gt;Ansible gNMI module&lt;/a&gt; are not qualified to be considered as CLI tools.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;What makes gNMI tool nice to use?&lt;/h3&gt;&lt;p&gt;Looking at this landscape, the following essential features a nice gNMI client should have come to mind:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;provide a clean and vendor independent interface to gNMI RPCs&lt;/li&gt;&lt;li&gt;expose all configuration options the gNMI RPCs have via flags or file-based configurations&lt;/li&gt;&lt;li&gt;allow multi-target operations: i.e. a subscription made to a number of the devices&lt;/li&gt;&lt;li&gt;implement both TLS enabled and non-secure transport&lt;/li&gt;&lt;li&gt;support different output formats (JSON, proto) and destinations (stdout, file, streaming/messaging buses)&lt;/li&gt;&lt;li&gt;be documented&lt;/li&gt;&lt;li&gt;provide an easy way to install the tool without requiring a dev toolchain to be present.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;With these essential features in mind we started to work on &lt;a href=&#34;https://gnmic.kmrd.dev/&#34;&gt;gnmic&lt;/a&gt;.&lt;/p&gt;&lt;h3&gt;gNMIc and its features&lt;/h3&gt;&lt;p align=center&gt;&lt;img src=https://gitlab.com/rdodin/pics/-/wikis/uploads/46e7d1631bd5569e9bf289be9dfa3812/gnmic-headline.svg?sanitize=true/&gt;&lt;/p&gt;&lt;p&gt;The work on &lt;code&gt;gnmic&lt;/code&gt; started with analysis of the existing tools shortcomings coupled with collecting requirements from our fellow engineers and our past user experience.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;For the &lt;code&gt;gnmic&lt;/code&gt; features run down go to our beautiful documentation portal - &lt;a href=&#34;https://gnmic.kmrd.dev&#34;&gt;https://gnmic.kmrd.dev&lt;/a&gt;. In this post I will go a bit deeper on some core features and design choices we made, so please refer to the documentation if you are looking for a basic usage or command reference guide.&lt;/p&gt;&lt;/blockquote&gt;&lt;h4&gt;Consistent command line interface&lt;/h4&gt;&lt;p&gt;It is easy to spot a CLI tool that got some love from its developers by looking at the way it is composed. Since most of the &lt;code&gt;gnmic&lt;/code&gt; users will ...&lt;/p&gt;</description><link>https://netdevops.me/2020/gnmic-gnmi-cli-client-and-collector/</link> <pubDate>Tue, 11 Oct 2022 14:39:10 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2020/gnmic-gnmi-cli-client-and-collector/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2020/gnmic-gnmi-cli-client-and-collector/</guid> </item> <item> <title>Nokia YANG tree and Path Browser</title> <author>rdodin</author> <category>nokia</category> <category>sr os</category> <category>yang</category> <description>&lt;h1&gt;Nokia YANG tree and Path Browser&lt;/h1&gt;&lt;p&gt;&lt;em&gt;Automation Is as Good as the Data Models&lt;/em&gt; is a chapter&#39;s name in the great book titled &lt;a href=&#34;https://www.amazon.com/Network-Programmability-YANG-Modeling-driven-Management/dp/0135180392&#34;&gt;&#34;Network Programmability With YANG&#34;&lt;/a&gt;. These days you won&#39;t bedazzle anyone by just providing the set of YANG models for the flagship network products. The models alone, albeit a great step forward, do not guarantee that programmability will start flourish.&lt;br&gt;The automation tools leveraging YANG is often a missing link and in this post I am talking about the &lt;a href=&#34;https://github.com/hellt/nokia-yangtree&#34;&gt;Nokia YANG tree and Path Browser&lt;/a&gt; tools which help both our internal automation squad and our customers to be more effective working with our YANG models.&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;1 Models for machines&lt;/h2&gt;&lt;p&gt;At Nokia we distribute the YANG models via our &lt;a href=&#34;https://github.com/nokia/7x50_YangModels&#34;&gt;nokia/7x50_YangModels&lt;/a&gt; repository. This enables us to allow users to simplify the way they get the models. The challenge with these models, or any models provided in &lt;code&gt;.yang&lt;/code&gt; format for that matter, is that its extremely hard for a naked eye to browse/evaluate these models when doing network automation. They are great for compilers, and not as much for us - automation engineers.&lt;/p&gt;&lt;p&gt;&lt;code&gt;cpp// first lines of ietf-interfaces.yang modulemodule ietf-interfaces { yang-version 1.1; namespace &#34;urn:ietf:params:xml:ns:yang:ietf-interfaces&#34;; import ietf-yang-types { prefix yang; } revision 2018-02-20; container interfaces { description &#34;Interface parameters.&#34;; list interface { key &#34;name&#34;; leaf name { type string; } leaf description { type string; } leaf enabled { type boolean; default &#34;true&#34;; }&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Likely, browsing the &lt;a href=&#34;https://github.com/YangModels/yang/blob/master/standard/ietf/RFC/ietf-interfaces%402018-02-20.yang&#34;&gt;&lt;code&gt;ietf-interfaces.yang&lt;/code&gt;&lt;/a&gt; file won&#39;t make you sweat, yet it shouldn&#39;t led you to a false conclusion that YANG code representation is easy. The reality hits hard when YANG exposes its features such as &lt;code&gt;groupings&lt;/code&gt; and &lt;code&gt;uses&lt;/code&gt;, custom &lt;code&gt;typedefs&lt;/code&gt; and multiple &lt;code&gt;identityrefs&lt;/code&gt;, solid layer of &lt;code&gt;XPATH&lt;/code&gt; here and there, twisted &lt;code&gt;imports&lt;/code&gt; and a composition with dozens of &lt;code&gt;submodules&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;For example, our combined model for the configuration-only data (&lt;a href=&#34;https://raw.githubusercontent.com/nokia/7x50_YangModels/master/latest_sros_20.2/nokia-combined/nokia-conf-combined.yang&#34;&gt;nokia-conf-combined.yang&lt;/a&gt;) is 15MB in size and has 331000 lines. That is like the opposite of &lt;em&gt;easy&lt;/em&gt;. But why is it important to peer inside the models in the first place?&lt;/p&gt;&lt;h3&gt;1.1 Why browsing models is important?&lt;/h3&gt;&lt;p&gt;Truth is that every model driven (MD) interface you have in mind such as NETCONF, gNMI, RESTCONF operates on the data that is modelled in YANG. Thus every single operation you make with these interfaces eventually aligned with the underlying YANG model to access the data.&lt;/p&gt;&lt;p&gt;And unless your automation suite leverages some advanced orchestrator-provided abstractions or code generated classes, you literally &lt;strong&gt;need to look&lt;/strong&gt; at the YANG modules when using those management interfaces.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;NETCONF operations must have the XML envelopes created in conformance with the YANG model (&lt;a href=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/45fd09db73543f94f6937655db3f70ff/image.png&#34;&gt;example&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;gNMI paths are XPATH-like paths modelled after the underlying YANG model (&lt;a href=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/789429d8fec1d721e04d6024df5f883b/image.png&#34;&gt;example&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;RESTCONF URL embeds a model path as dictated by the YANG model (&lt;a href=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/1b9d45fd859ee7a66f382bab0f02621c/image.png&#34;&gt;example&lt;/a&gt;)&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;2 YANG representations&lt;/h2&gt;&lt;p&gt;Make no mistake: regardless of the interface you pick, you end browsing YANG models and as you can imagine, scrambling through the raw YANG model representation is not an easy task. Luckily, the better looking representations of the very same models exist.&lt;/p&gt;&lt;h3&gt;2.1 Tree&lt;/h3&gt;&lt;p&gt;The &lt;a href=&#34;https://tools.ietf.org/html/rfc8340&#34;&gt;RFC8340 YANG tree&lt;/a&gt; representation is the one you see everywhere in the documentation and blogs. By passing the same &lt;code&gt;ietf-interfaces.yang&lt;/code&gt; snippet through the &lt;code&gt;pyang&lt;/code&gt; tool we transform the module to a better looking tree-like view:&lt;/p&gt;&lt;p&gt;&lt;code&gt;txt+--rw interfaces | +--rw interface* [name] | +--rw name string | +--rw description? string | +--rw type identityref | +--rw enabled? boolean&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Compared to the &lt;code&gt;.yang&lt;/code&gt; raw view, the &lt;em&gt;tree&lt;/em&gt; makes it way easier to glance over the model and understand the parent-child relationships of the data entry nodes and their types.&lt;/p&gt;&lt;p&gt;Still, it has some serious UX drawbacks an engineer will face:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;the path information is missing.&lt;/strong&gt; By looking at a certain leaf/container/list of a tree you can&#39;t easily say what is the path of that element starting from the root?&lt;br&gt; Yet it is ve...&lt;/li&gt;&lt;/ul&gt;</description><link>https://netdevops.me/2020/nokia-yang-tree-and-path-browser/</link> <pubDate>Tue, 11 Oct 2022 08:11:53 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2020/nokia-yang-tree-and-path-browser/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2020/nokia-yang-tree-and-path-browser/</guid> </item> <item> <title>gNMIc joins Openconfig ðŸš€</title> <author>rdodin</author> <category>gnmi</category> <category>gnmic</category> <category>openconfig</category> <description>&lt;h1&gt;gNMIc joins Openconfig ðŸš€&lt;/h1&gt;&lt;p&gt;Two years ago, a dozen contributors less, 400 Pull Requests, and 2000 commits behind, another pet project appeared on a vast GitHub landscape. It was a learning exercise by [Karim Radhouani][karim-github] to sharpen his skills in [gNMI][gnmi-ref] - a niche network management protocol promoted by the [Openconfig][oc] group.&lt;/p&gt;&lt;p&gt;Initially named &lt;code&gt;gnmi_client&lt;/code&gt;, it had a noble but narrow scope of providing a feature-rich, complete, yet intuitive CLI for gNMI-enabled routers. Fast forward two years, and we have the [&lt;strong&gt;gNMIc&lt;/strong&gt;][gnmic-main-site] software suite that &lt;strong&gt;is much more than just a CLI&lt;/strong&gt; for gNMI.&lt;/p&gt;&lt;div class=&#34;img-shadow&#34;&gt;&lt;video width=&#34;100%&#34; autoplay muted loop controls&gt;&lt;source src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/d3a08c2f03c2d15db2074967e4ef268f/gnmic-oc.mp4&#34; type=&#34;video/mp4&#34;&gt;&lt;/video&gt;&lt;/div&gt;&lt;p&gt;Today, Nokia donates the gNMIc project to Openconfig, and with that move, we expect to see gNMIc adopted by even more companies and organizations :partying_face:&lt;/p&gt;&lt;div class=&#34;grid cards&#34; markdown&gt;- :material-home:{ .lg .middle } **gNMIc new address** --- :material-github: [openconfig/gnmic][gnmic-repo] :material-book: [https://gnmic.openconfig.net][gnmic-main-site]&lt;/div&gt;&lt;p&gt;In this post I&#39;d like to give you a brief overview of gNMIc&#39;s core features and share my thoughts on what we expect to happen with gNMIc moving under the Openconfig&#39;s wing.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;Over the past two years, gNMIc became a feature-rich gNMI-focused software suite. Both its CLI and collection capabilities matured with lots of new integrations added. Moreover, gNMIc had quite some air time in production networks, not to mention lab deployments and dev testbeds.&lt;/p&gt;&lt;p&gt;I would like to briefly highlight gNMIc&#39;s current feature set for those who aren&#39;t familiar with it yet. Broadly, we split gNMIc capabilities into the following three domains:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;CLI&lt;/li&gt;&lt;li&gt;Collector&lt;/li&gt;&lt;li&gt;API&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;!!!note Each of those domain areas packs a hefty number of neat features, and I will only highlight some of them to keep the introduction short and sweet.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;gNMIc cherishes documentation; readers are encouraged to follow the links provided in this post to get more information on particular topics.&lt;/code&gt;&lt;/pre&gt;&lt;p markdown align=center&gt;![logo](https://gitlab.com/rdodin/pics/-/wikis/uploads/46e7d1631bd5569e9bf289be9dfa3812/gnmic-headline.svg?sanitize=true#only-light)![logo](https://gitlab.com/rdodin/pics/-/wikis/uploads/f54d2cfdde13193cedab7b60203a2a9a/gnmic-headline-for-dark-bg.svg?sanitize=true#only-dark)&lt;/p&gt;&lt;h2&gt;CLI&lt;/h2&gt;&lt;p&gt;gNMIc provides an intuitive yet full-featured CLI for interacting with gNMI-capable targets. It fully implements [gNMI v0.7+ specification][gnmi-ref] with extensions[^1], and with the move under Openconfig, it becomes a standard gNMI CLI tool.&lt;/p&gt;&lt;p&gt;In 2020 I &lt;a href=&#34;../2020/gnmic.md&#34;&gt;wrote about gNMIc&lt;/a&gt; highlighting its CLI capabilities. Since then CLI side of gNMIc has only become better with the following changes:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Added [template-based payloads][template-set] to simplify complex and data-driven configuration use cases.&lt;/li&gt;&lt;li&gt;[GetSet command][getset-cmd] introduced to allow conditional execution of a Set RPC based on a received Get response.&lt;/li&gt;&lt;li&gt;Implemented [&lt;code&gt;diff&lt;/code&gt; command][diff-cmd] to compare configurations between two different targets and identify configuration drift.&lt;/li&gt;&lt;li&gt;Added [&lt;code&gt;prompt&lt;/code&gt; mode][prompt-cmd] for a guided CLI experience.&lt;/li&gt;&lt;li&gt;Added [generation of paths][path-gen] out of the YANG modules.&lt;/li&gt;&lt;li&gt;Support configuration via any of the following methods: CLI flags, environment variables, or file.&lt;/li&gt;&lt;li&gt;Integrated prototext and protojson output options to display raw requests and responses.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;!!!tip &#34;gNMIc CLI&#34; Easy one-click installation, multi-arch/multi-OS hermetic binary, full feature parity with gNMI spec and intuitive commands layout make &lt;code&gt;gnmic&lt;/code&gt; tool a perfect choice for the task.&lt;/p&gt;&lt;div class=&#34;ext-code-divider&#34;&gt;&lt;hr /&gt;&lt;span class=&#34;twemoji vertical-middle&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 640 512&#34;&gt;&lt;path d=&#34;M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z&#34;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;hr /&gt;&lt;/div&gt;&lt;h2&gt;Collector&lt;/h2&gt;&lt;p&gt;Having a great CLI was just the beginning; the lion&#39;s share of changes happened in the collector area of gNMIc.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;collector&#34; src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/9f535d6b64cc5794d995104e37a8c04a/image.png&#34;&gt;{: class=&#34;img-shadow&#34;}&lt;br&gt;&lt;center&gt;&lt;small&gt;gNMIc as a collector in a typical open-source streaming telemetry deployment&lt;/small&gt;&lt;/center&gt;&lt;/p&gt;&lt;p&gt;With the growing interest in Streaming Telemetry, we saw an opportunity to create an open-source telemetry collector to meet the demand. Not just &lt;em&gt;a collector&lt;/em&gt;...&lt;/p&gt;</description><link>https://netdevops.me/2022/gnmic-joins-openconfig/</link> <pubDate>Mon, 10 Oct 2022 22:03:15 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2022/gnmic-joins-openconfig/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2022/gnmic-joins-openconfig/</guid> </item> <item> <title>How to patch Ubuntu 20.04 Focal Fossa with UKSM?</title> <author>rdodin</author> <category>ubuntu</category> <category>uksm</category> <description>&lt;h1&gt;How to patch Ubuntu 20.04 Focal Fossa with UKSM?&lt;/h1&gt;&lt;p&gt;Running multiple VMs out of the same disk image is something we, network engineers, do quite often. A virtualized network usually consists of a few identical virtualized network elements that we interconnected with links making a topology.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;topo&#34; src=&#34;https://img-fotki.yandex.ru/get/6605/21639405.11c/0_86301_84e43902_orig.png&#34;&gt;&lt;/p&gt;&lt;p&gt;In the example above we have 7 virtualized routers in total, although we used only two VM images to create this topology (virtualized Nokia router and it&#39;s Juniper vMX counterpart). Each of this VMs require some memory to run, for the simplicity, lets say each VM requires 5GB of RAM.&lt;/p&gt;&lt;p&gt;So roughly, the above topology will claim 30-35GB of RAM in order to operate. Enriching the topology by adding more VMs of the same type will continue to push for more memory, thus running big topologies often becomes an exercise of hunting for RAM.&lt;/p&gt;&lt;p&gt;Luckily, there are technologies like Kernel Same Merging (KSM) and it&#39;s enhanced version Ultra-KSM (UKSM) that are able to lift the memory requirement for use cases like above. In a nutshell, they allow to merge mem pages of the same content, effectively reusing the same memory pages between virtual machines.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;!!!info &#34;from &lt;a href=&#34;https://www.usenix.org/system/files/conference/fast18/fast18-xia.pdf&#34;&gt;UKSM usenix paper&lt;/a&gt;&#34; Memory deduplication can reduce memory footprint by eliminating redundant pages. This is particularly true when similar OSes/applications/data are used across different VMs. Essentially, memory deduplication detects those redundant pages, and merges them by enabling transparent page sharing.&lt;/p&gt;&lt;p&gt;Although UKSM is not a silver bullet for every application and use case, it tends to be a very good fit for hypervisors used to run virtualized networking topologies. For that reason the EVE-NG network emulation platform embeds UKSM in their product.&lt;/p&gt;&lt;p&gt;So I decided to bring UKSM to my Ubuntu 20.04 VM that I use to launch virtualized routers and containers to witness the benefits/issues of having it.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;uksm&#34; src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/5ac1a3e597d26fbf94d18e7d898e6a7c/image.png&#34;&gt;&lt;/p&gt;&lt;p&gt;The results look promising. Running 6 VMs with a system memory footprint of one is a solid memory optimization, especially considering that performance penalty is something we can bare in a lab where we mostly play with control plane features.&lt;/p&gt;&lt;p&gt;&lt;a href=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/55317652924b2ad3d083cf6719b5cd1e/image.png&#34;&gt;&lt;img alt=&#34;uksm-compare&#34; src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/55317652924b2ad3d083cf6719b5cd1e/image.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Now if you want to bring UKSM to your hypervisor you will need to jump through some hoops, as UKSM is a kernel feature that is not available as a module. This means that you need to build a kernel with UKSM enabled, and that might be a barrier too high for some of you. It was for me, until I spent a night trying multiple things until it worked, so let me share with you the process and the outcomes so that you can rip the benefits without having all the trouble of trial-and-error routine.&lt;/p&gt;&lt;h4&gt;0 TL;DR&lt;/h4&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Download UKSM patches&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Download kernel source&lt;/p&gt;&lt;/li&gt;&lt;li&gt;Apply UKSM patch&lt;/li&gt;&lt;li&gt;Build kernel&lt;/li&gt;&lt;li&gt;Install kernel&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;1 Get UKSM patches&lt;/h2&gt;&lt;p&gt;As mentioned above, UKSM is a kernel feature and the way it is distributed nowadays is via &lt;code&gt;patch&lt;/code&gt; files that are available in &lt;a href=&#34;https://github.com/dolohow/uksm&#34;&gt;this Github repo&lt;/a&gt;. So our first step is cloning this repo to get the patches for recent (4.x and 5.x) kernels. Easy start.&lt;/p&gt;&lt;h2&gt;2 Get the kernel source code&lt;/h2&gt;&lt;p&gt;As the UKSM patches need to be applied to a kernel source code, we need to get one. Here things can get a tad complicated.&lt;/p&gt;&lt;p&gt;There are many different kernels out there:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;vanilla Linux kernels blessed by Linus himself&lt;/li&gt;&lt;li&gt;distribution kernels (Debian, Ubuntu, Fedora, etc)&lt;/li&gt;&lt;li&gt;third party kernels with the best hacks&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The UKSM patches were created against the vanilla Linux kernel, but my Ubuntu VM runs a kernel that was produced by Ubuntu team.&lt;/p&gt;&lt;p&gt;```bash&lt;/p&gt;&lt;h1&gt;on Ubuntu 20.04&lt;/h1&gt;&lt;p&gt;uname -aLinux kernel-build 5.4.0-48-generic #52-Ubuntu SMP Thu Sep 10 10:58:49 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux```&lt;/p&gt;&lt;p&gt;Vanilla linux kernel uses X.Y.Z versioning. If anything is appended after X.Y.Z (like &lt;code&gt;-48-generic&lt;/code&gt;) in my case, it indicates that the kernel comes from a distributor (Ubuntu in my case).&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Things that didn&#39;t work:&lt;br&gt;1 At first I tried to download the original Linux kernel, but the build process failed without giving me a good explanation.&lt;br&gt;2 Download latest 5.4 kernel from Ubuntu - UKSM patch didn&#39;t apply, as the code has changed apparently&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;After multiple rinse-repeat iterations I found out that I can take the Ubuntu kernel &lt;code&gt;5.4.0-48.52&lt;/code&gt; as UKSM patch applies to it no problem and the build succeeds.&lt;/p&gt;&lt;p&gt;How did I get one? Oh, that is also something worth documenting, as the path to knowing it is paved with broken links and articles dated early 2000s. First, go [here](https://git.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/fo...&lt;/p&gt;</description><link>https://netdevops.me/2021/how-to-patch-ubuntu-2004-focal-fossa-with-uksm/</link> <pubDate>Mon, 10 Oct 2022 13:25:35 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2021/how-to-patch-ubuntu-2004-focal-fossa-with-uksm/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2021/how-to-patch-ubuntu-2004-focal-fossa-with-uksm/</guid> </item> <item> <title>Creating a Bootstrap based front-end for your simple REST service</title> <author>rdodin</author> <category>bootstrap</category> <category>frontend</category> <category>javascript</category> <description>&lt;h1&gt;Creating a Bootstrap based front-end for your simple REST service&lt;/h1&gt;&lt;p&gt;Not a single day goes by without me regretting I haven&#39;t mastered any front-end technology like React/Angular or the likes. Why would a network engineer want to step into the game that seems orthogonal to its main area of expertise, one might ask?&lt;/p&gt;&lt;p&gt;Truth be told, I wasn&#39;t born with an urge to learn anything that has &lt;em&gt;javascript&lt;/em&gt; under the hood, but over the years, working within the network/backend silos, I realized, that being able to create a simple front-end service is a jewel that fits every crown, no matter what title you wear.&lt;/p&gt;&lt;p&gt;This tutorial is based on the task real task of building up a web interface (&lt;a href=&#34;https://pycatjify.netdevops.me&#34;&gt;pycatjify.netdevops.me&lt;/a&gt;) for the &lt;a href=&#34;serverless-gc-functions.md&#34;&gt;&lt;code&gt;pycatjify&lt;/code&gt;&lt;/a&gt; REST API service deployed as a serverless function. The end result is a &lt;strong&gt;simple&lt;/strong&gt;, completely &lt;strong&gt;free&lt;/strong&gt; and &lt;strong&gt;reusable&lt;/strong&gt; Bootstrap based front-end boilerplate which can be used as a foundation for a similar task.&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;1 Benefits of knowing how to front-end?&lt;/h2&gt;&lt;p&gt;Lets me first explain why I think that even a basic experience with any front-end technology is beneficial to virtually anyone.&lt;/p&gt;&lt;h3&gt;1.1 Get your tool a web interface&lt;/h3&gt;&lt;p&gt;We often start with an idea of a tool and work it to a completion by publishing a command line interface to it, sometimes the CLI is all the tool needs, it is just best consumed that way. Other times even the CLI is not needed, as the tool is only used as a plugged-in library.&lt;/p&gt;&lt;p&gt;But quite often the tool can benefit greatly by having its own web interface. You can broaden the horizons of your project audience vastly by simply creating a web service out of it. I can name a handful number of tools that I consume via web instead of using their CLI counterparts, it is just more convenient to me and so might think the users of your tools.&lt;/p&gt;&lt;p&gt;The &lt;a href=&#34;https://github.com/dbarrosop/pycatj/&#34;&gt;&lt;code&gt;pycatj&lt;/code&gt;&lt;/a&gt; is a perfect example of a CLI-first tool that can be conveniently consumed via web as well. Thus I set myself on a journey to create a web facade for it and at the same time reinforcing my very basic web skills.&lt;/p&gt;&lt;h3&gt;1.2 Take your pitch or demo to a next level&lt;/h3&gt;&lt;p&gt;Not everyone of us is working in an environment where the bosses have engineering background and can equally enjoy a demo of a new service by looking at the terminal full of &lt;code&gt;curl&lt;/code&gt; requests. Even if your bosses are the ones who contribute to the cutting edge technologies, your customers can easily be made of a different dough.&lt;/p&gt;&lt;p&gt;Therefore it might be equally important to supplement your neat idea with a proper visualization; my experience says that a great tool or a service attracts audience way better when it is wrapped in a shiny package. So having a prototyped web UI might give you some bonus points even if it is not going to be consumed via the Web UI after all.&lt;/p&gt;&lt;h3&gt;1.3 Learn how they do it on the other side of a fence&lt;/h3&gt;&lt;p&gt;A classic, book-pictured network automation engineer is an all Python-shop customer. Although Python is a natural fit for the network automation activities, it is also important to not less yourself be constrained by a singe language or a toolchain.&lt;/p&gt;&lt;p&gt;Educating yourself on a different technology with a different set of the instruments and/or the views means a lot. Even by scratching the surface of the Javascript, its package managers and the front-end frameworks could make you better understand the pros and cons of the ecosystem you are in.&lt;/p&gt;&lt;h2&gt;2 Front-end &amp;amp; Javascript frameworks&lt;/h2&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/6e95f9e54f4062d13e314fc1b4d78266/image.png&#34;&gt;&lt;/p&gt;&lt;p&gt;So how do one start if they want to learn any of that shiny front-end witchery given that there are so many frameworks around? In spite to answer this question I compiled the following list of options that when I approached the task of making a &lt;a href=&#34;https://pycatjify.netdevops.me&#34;&gt;&lt;code&gt;pycatjify&lt;/code&gt;&lt;/a&gt; web service:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Frameworkless: bare HTML/CSS/JS&lt;/strong&gt;&lt;br&gt;This is the most straightforward way of creating a web service. You basically write everything by yourself without relying on any framework.&lt;br&gt;On the &lt;em&gt;pros&lt;/em&gt; side this is the most lightweight and bloat-less approach, as you are in the full control of what contributes to the end result.&lt;br&gt;The &lt;em&gt;cons&lt;/em&gt; side is substantial though, you need to be well experienced in the HTML/CSS/JS to create something less minimalistic than a blank page with the elements on it.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Front-end frameworks&lt;/strong&gt;&lt;br&gt;Front-end frameworks provide a shortcut for a web service creation drastically reducing time to create one. Also known as CSS frameworks they come across with the lego-like blocks (components implemented with CSS/JS/HTML) that you use to build a web service from.&lt;br&gt;Dozens of front-end frameworks have been created over the time, from the minimalistic ones to the monstrous software bundles.&lt;br&gt;&lt;a href=&#34;https://getbootstrap.com&#34;&gt;Bootstrap&lt;/a&gt;, &lt;a href=&#34;https://foundation.zurb.com/&#34;&gt;Foundation&lt;/a&gt;, &lt;a href=&#34;http://getskeleton.com/&#34;&gt;Skeleton&lt;/a&gt;, [Materialize](https://materializecs...&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;</description><link>https://netdevops.me/2019/creating-a-bootstrap-based-front-end-for-your-simple-rest-service/</link> <pubDate>Fri, 07 Oct 2022 18:13:05 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2019/creating-a-bootstrap-based-front-end-for-your-simple-rest-service/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2019/creating-a-bootstrap-based-front-end-for-your-simple-rest-service/</guid> </item> <item> <title>Nokia (Alcatel-Lucent) BGP configuration tutorial. Part 1 - basic eBGP, iBGP</title> <author>rdodin</author> <category>bgp</category> <category>nokia</category> <category>sr os</category> <description>&lt;h1&gt;Nokia (Alcatel-Lucent) BGP configuration tutorial. Part 1 - basic eBGP, iBGP&lt;/h1&gt;&lt;p&gt;There is no way I would leave you without covering configuration steps for one of the most versatile, scalable and robust internet protocols also known as &lt;strong&gt;BGP&lt;/strong&gt;. And here it is - BGP configuration guide for Nokia (Alcatel-Lucent) Service Routers.&lt;/p&gt;&lt;p&gt;&lt;a href=&#34;2015-06-22-alcatel-lucent-ospf-configuration-tutorial.md&#34;&gt;As with the OSPF configuration tutorial&lt;/a&gt; I will cover the configuration process for various BGP scenarios along with the verification and troubleshooting steps bundled with colorful figures, detailed code snippets and useful remarks.&lt;/p&gt;&lt;p&gt;BGP is so huge that I had no other option but to write about it in several parts:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Part 1 - basic eBGP and iBGP configuration&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;2015-09-23-alcatel-lucent-bgp-configuration-tutorial-part-2-bgp-policies-community.md&#34;&gt;Part 2 - BGP policies. Community&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Part 1 is dedicated to basic eBGP/iBGP configuration. We will practice with common BGP configuration procedures at first, then learn how to export routes into BGP process and prevent unnecessary route reflection by means of &lt;code&gt;split-horizon&lt;/code&gt; over eBGP links.&lt;/p&gt;&lt;p&gt;Next we go over iBGP configuration to spread the eBGP learned routes across the Autonomous Systems. I will explain the necessity of having a full-mesh iBGP topology and the use of the &lt;code&gt;next-hop-self&lt;/code&gt; command for iBGP peers.&lt;/p&gt;&lt;p&gt;It&#39;s a perfect time to configure some BGP, right?&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;Common BGP configuration steps&lt;/h2&gt;&lt;p&gt;Despite what type of BGP (Internal or External) you are going to configure there are some basic steps we are about to discuss. Address planning, IGP configuration, router-id selection, autonomous-system number setting, peer groups and neighbor configuration - all of these task are common to each and every BGP configuration routine.&lt;/p&gt;&lt;h3&gt;IGP and addressing&lt;/h3&gt;&lt;p&gt;BGP completely relies on IGP (or static routes) when resolving nexthop address received in BGP updates from its peers. This means that prior to BGP configuration you should have IGP up and running. During this session I will refer to this base topology:&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;http://img-fotki.yandex.ru/get/4911/21639405.11c/0_84ca0_67149947_orig.png&#34;&gt;&lt;/p&gt;&lt;p&gt;A few words about the address plan and key pieces of this diagram: a BGP peering will take place between the two Autonomous Systems (hereinafter AS) 65510 and 65520.&lt;/p&gt;&lt;p&gt;AS 65510 utilizes &lt;code&gt;10.10.0.0/16&lt;/code&gt; network for local link addresses, system interfaces of its routers and customers-assigned networks, whereas AS 65520 uses &lt;code&gt;10.20.0.0/16&lt;/code&gt; for the same purposes. Address plan details could be found at the &lt;em&gt;Legend section&lt;/em&gt; of the &#34;base topology&#34; figure.&lt;/p&gt;&lt;p&gt;We will be working with the two customers networks:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;R5_Customer - 10.10.55.0/24&lt;/code&gt; in AS 65510&lt;/li&gt;&lt;li&gt;&lt;code&gt;R3_Ext_Customer - 172.16.33.0/24&lt;/code&gt; in AS 65520&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;As to Interior Gateway Protocol - I chose IS-IS, though you can choose an IGP protocol of your choice - it wont be any different. IS-IS configuration for this tutorial is super straightforward, system and network interfaces are participating in IS-IS process within the relevant ASes (except interfaces between R1-R3, R2-R4 as they are connecting different AS&#39;s and we will run BGP there). Inter-router links are all point-to-point type.&lt;/p&gt;&lt;p&gt;IS-IS configuration section for reference:&lt;/p&gt;&lt;p&gt;R1 (AS 65510):&lt;/p&gt;&lt;p&gt;```txt*A:R1&amp;gt;config&amp;gt;router&amp;gt;isis# info&lt;/p&gt;&lt;hr&gt;&lt;pre&gt;&lt;code&gt; level-capability level-1 area-id 10.10 reference-bandwidth 100000000 level 1 wide-metrics-only exit level 2 wide-metrics-only exit interface &#34;system&#34; no shutdown exit interface &#34;toR2&#34; interface-type point-to-point no shutdown exit interface &#34;toR5&#34; interface-type point-to-point no shutdown exit no shutdown&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&lt;h2&gt;IS-IS database for 65510 consists of LSP from every router in this AS&lt;/h2&gt;&lt;p&gt;*A:R1&amp;gt;config&amp;gt;router&amp;gt;isis# show router isis database&lt;/p&gt;&lt;p&gt;===============================================================================Router Base ISIS Instance 0 Database===============================================================================LSP ID Sequence Checksum Lifetime Attributes&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;Displaying Level 1 database&lt;/h2&gt;&lt;p&gt;R1.00-00 0xd 0x7740 1182 L1R2.00-00 0xb 0x7ad1 812 L1R5.00-00 0xc 0x8dfd 817 L1R6.00-00 0xb 0xe8a5 842 L1Level (1) LSP Count : 4&lt;/p&gt;&lt;h2&gt;Displaying Level 2 database&lt;/h2&gt;&lt;p&gt;Level (2) LSP Count : 0====================================================================...&lt;/p&gt;</description><link>https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp/</link> <pubDate>Fri, 07 Oct 2022 18:13:05 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp/</guid> </item> <item> <title>Nokia (Alcatel-Lucent) BGP configuration tutorial. Part 2 - Communities</title> <author>rdodin</author> <category>bgp</category> <category>nokia</category> <category>sr os</category> <description>&lt;h1&gt;Nokia (Alcatel-Lucent) BGP configuration tutorial. Part 2 - Communities&lt;/h1&gt;&lt;p&gt;In the &lt;a href=&#34;2015-08-24-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp.md&#34;&gt;first part of this BGP tutorial&lt;/a&gt; we prepared the ground by configuring eBGP/iBGP peering. We did a good job overall, yet the &lt;em&gt;plain&lt;/em&gt; BGP peering is not something you would not normally see in production. The power of BGP is in its ability for granular management of multiple routes from multiple sources. And the tools that help BGP to handle this complex task are BGP policies at their full glory.&lt;/p&gt;&lt;p&gt;In this part we will discuss and practice:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;BGP export/import policies for route advertisement/filtering&lt;/li&gt;&lt;li&gt;BGP communities operations&lt;/li&gt;&lt;li&gt;BGP routes aggregation: route summarization and the corresponding &lt;code&gt;aggregate&lt;/code&gt; and &lt;code&gt;atomic-aggregate&lt;/code&gt; path attributes&lt;/li&gt;&lt;/ul&gt;&lt;!-- more --&gt;&lt;h2&gt;What are BGP policies for?&lt;/h2&gt;&lt;p&gt;The BGP peering configuration process is simple, you saw it in &lt;a href=&#34;2015-08-24-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp.md&#34;&gt;Part 1&lt;/a&gt;, but, frankly, no network engineer leaves a BGP router in a default &#34;receive all, advertise all&#34; state. We use BGP policies to tell the router which routes to accept and which to advertise.&lt;/p&gt;&lt;p&gt;This is just an example on where the BGP policies play a part, but they are used for many other tasks as well.&lt;/p&gt;&lt;p&gt;In BGP you can define two types of policies: Import and Export. To demonstrate where and when does a particular policy take place I paste here the BGP route processing diagram:&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;http://img-fotki.yandex.ru/get/4109/21639405.11c/0_84d72_94e5a74a_orig.png&#34;&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Export polices&lt;/strong&gt; are used for:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;export routes from different protocols to BGP (like IGP routes being exported to BGP in &lt;a href=&#34;2015-08-24-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp.md&#34;&gt;Part 1&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;granular control of the advertised routes&lt;ul&gt;&lt;li&gt;prohibit unwanted prefixes advertising&lt;/li&gt;&lt;li&gt;set the path attributes to a desired NLRI&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;reducing control plane traffic by advertising aggregate routes&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;Import policies&lt;/strong&gt; are used for:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;filtering unwanted NLRI&lt;ul&gt;&lt;li&gt;by prefix, prefix-length, community value&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;manipulation with the outbound traffic&lt;ul&gt;&lt;li&gt;applying &lt;code&gt;Local-Pref&lt;/code&gt; attribute to desired prefixes&lt;/li&gt;&lt;li&gt;modifying/setting &lt;code&gt;MED&lt;/code&gt; value or any other transitive attribute&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;In SROS BGP policy configuration takes place in a router&#39;s policy-options context - &lt;code&gt;configure router policy-options&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;To practice with BGP policies configuration we will go through a set of tasks that an ISP engineer can be expected to do in theirs day-to-day operations. We will simulate a simple ISP scenario using the following network topology:&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;http://img-fotki.yandex.ru/get/9263/21639405.11c/0_85519_aeed2105_orig.png&#34;&gt;&lt;/p&gt;&lt;p&gt;Network interfaces, IGP and basic BGP configuration are done exactly the same as in the &lt;a href=&#34;2015-08-24-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp.md&#34;&gt;Part 1 of this series&lt;/a&gt;. If you are interested in the final configuration output, please refer to the &lt;a href=&#34;2015-08-24-alcatel-lucent-bgp-configuration-tutorial-part-1-basic-ebgp-ibgp.md#wrapping-up&#34;&gt;Wrapping up section&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Community attribute&lt;/h2&gt;&lt;p&gt;Lets statr with &lt;em&gt;BGP communities&lt;/em&gt; introduction. A BGP community (not &lt;a href=&#34;https://tools.ietf.org/html/rfc4360&#34;&gt;extended&lt;/a&gt;) is an &lt;strong&gt;optional transitive BGP Path attribute&lt;/strong&gt; that is &lt;em&gt;a group of destinations which share some common property&lt;/em&gt; as per the &lt;a href=&#34;https://tools.ietf.org/html/rfc1997&#34;&gt;RFC 1997&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;I like to think of a community as &lt;em&gt;a label (or a tag)&lt;/em&gt; which BGP speaker puts on a NLRI to give it a context. These labels could serve different purposes, for example:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;to mark/identify the prefixes originated from a specific geographic region, customer or service,&lt;/li&gt;&lt;li&gt;or to indicate that a specific treatment is desired like for the prefixes with the use of &lt;code&gt;no-export&lt;/code&gt; or &lt;code&gt;no-advertise&lt;/code&gt; community values&lt;/li&gt;&lt;li&gt;or could mean any other property which BGP speaker wants to communicate within an NLRI.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;BGP Communities are just the means to augment the specific prefixes with the metadata, they are useless until you bind some actions to them.&lt;br&gt;For example, you tag some prefixes with a &lt;code&gt;community A&lt;/code&gt; value and others with a &lt;code&gt;community B&lt;/code&gt;; then you could tell your BGP peers to, say, set the &lt;code&gt;Local Preference 200&lt;/code&gt; attribute for the prefixes that have &lt;code&gt;community A&lt;/code&gt; value and leave Local Preference intact for the ones marked with &lt;code&gt;community B&lt;/code&gt; value. In this examples communities allowed us to set a specific action based on the community value associated with the prefixes.&lt;/p&gt;&lt;p&gt;Communities are represented by a &lt;strong&gt;community string&lt;/strong&gt; which is a 32 bit value. &lt;strong&gt;First two bytes&lt;/strong&gt; of a community attribute &lt;strong&gt;have to&lt;/strong&gt; be encoded with an AS number where community was born, and the other two bytes are set by an AS network engineer as he pleases (or in other words, the community string follows this template &lt;code&gt;&amp;lt;2byte-asnumber:community-value&amp;gt;&lt;/code&gt;).&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The community attribute values range from &lt;code&gt;0x0000000 (0:0)&lt;/code&gt; through &lt;code&gt;0x0000FFFF (0:65535)&lt;/code&gt;.&lt;br&gt;The range from &lt;code&gt;0xFFFF0000 (65535:0)&lt;/code&gt; throu...&lt;/p&gt;&lt;/blockquote&gt;</description><link>https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-2-communities/</link> <pubDate>Fri, 07 Oct 2022 18:13:05 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-2-communities/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2015/nokia-alcatel-lucent-bgp-configuration-tutorial-part-2-communities/</guid> </item> <item> <title>Basic L3VPN (BGP/MPLS VPN or VPRN) configuration on Nokia (Alcatel-Lucent) SROS &amp; Juniper MX</title> <author>rdodin</author> <category>bgp</category> <category>juniper</category> <category>l3vpn</category> <category>nokia</category> <category>vprn</category> <description>&lt;h1&gt;Basic L3VPN (BGP/MPLS VPN or VPRN) configuration on Nokia (Alcatel-Lucent) SROS &amp;amp; Juniper MX&lt;/h1&gt;&lt;p&gt;The topic of this post is &lt;strong&gt;Layer 3 VPN&lt;/strong&gt; (L3VPN or VPRN as we call it in SROS) configuration, and I decided to kill two birds with one stone by inviting Juniper vMX to our cozy SROS environment.&lt;/p&gt;&lt;p&gt;The BGP/MPLS VPN (&lt;a href=&#34;https://tools.ietf.org/html/rfc4364&#34;&gt;RFC 4364&lt;/a&gt;) configuration will undergo the following milestones:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;PE-PE relationship configuration with VPN IPv4 address family introduction&lt;/li&gt;&lt;li&gt;PE-CE routing configuration with both BGP and OSPF as routing protocols&lt;/li&gt;&lt;li&gt;Export policy configuration for advertising VPN routes on PE routers&lt;/li&gt;&lt;li&gt;AS override configuration&lt;/li&gt;&lt;li&gt;and many more&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;We&#39;ll wrap it up with the Control Plane/Data Plane evaluation diagrams which help a lot with understanding the whole BGP VPN mechanics. Take your seats, and buckle up!&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;The topology I use throughout this tutorial consists of two customers (namely Alcatel and Juniper) which have two remote sites and want to get connectivity between them by means of an L3VPN service:&lt;/p&gt;&lt;p&gt;&lt;a href=&#34;http://img-fotki.yandex.ru/get/6605/21639405.11c/0_86301_84e43902_orig.png&#34;&gt;&lt;img alt=&#34;pic&#34; src=&#34;http://img-fotki.yandex.ru/get/6605/21639405.11c/0_86301_84e43902_orig.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;http://img-fotki.yandex.ru/get/9356/21639405.11c/0_86302_9307f47e_orig.png&#34;&gt;&lt;/p&gt;&lt;p&gt;We start off with ISIS (any IGP would suffice) running smoothly in our provider core so every router can reach every other&#39;s loopback address. Another prerequisite is to have an &lt;em&gt;MPLS enabled&lt;/em&gt; core, since L3VPN uses MPLS encapsulation for dataplane communication. I configured RSVP-TE tunnels between PE routers for this tutorial in the way that PE1_ALU can resolve PE2_JUN (and vice versa) loopback address via RSVP-TE tunnel.&lt;/p&gt;&lt;p&gt;Lets have a look at the relevant configuration blocks on the three routers PE1_ALU, P1_ALU and PE2_JUN&lt;/p&gt;&lt;p&gt;PE1_ALU:&lt;/p&gt;&lt;p&gt;```txtA:PE1_ALU&amp;gt;config&amp;gt;router# info &lt;/p&gt;&lt;hr&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;IP Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; interface &#34;system&#34; address 10.10.10.1/32 no shutdown exit interface &#34;toP1&#34; address 10.99.99.0/31 port 1/1/2 no shutdown exit autonomous-system 100&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;ISIS Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; isis level-capability level-1 area-id 49.10 traffic-engineering reference-bandwidth 100000000 level 1  wide-metrics-only exit interface &#34;system&#34; no shutdown exit interface &#34;toP1&#34; interface-type point-to-point no shutdown exit no shutdown exit&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;MPLS Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; mpls interface &#34;system&#34; no shutdown exit interface &#34;toP1&#34; no shutdown exit exit&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;RSVP Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; rsvp interface &#34;system&#34; no shutdown exit interface &#34;toP1&#34; no shutdown exit no shutdown exit&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;MPLS LSP Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; mpls path &#34;loose&#34; no shutdown exit lsp &#34;toPE2&#34; to 10.10.10.3 cspf primary &#34;loose&#34; exit no shutdown exit no shutdown exit&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;Verification commands&lt;/h2&gt;&lt;p&gt;A:PE1_ALU# show router route-table 10.10.10.3&lt;/p&gt;&lt;p&gt;===============================================================================Route Table (Router: Base)===============================================================================Dest Prefix[Flags] Type Proto Age Pref Next Hop[Interface Name] Metric&lt;/p&gt;&lt;hr&gt;&lt;p&gt;10.10.10.3/32 Remote ISIS 01d00h57m 15 10.99.99.1 200&lt;/p&gt;&lt;hr&gt;&lt;p&gt;A:PE1_ALU# show router tunnel-table 10.10.10.3&lt;/p&gt;&lt;p&gt;===============================================================================Tunnel Table (Router: Base)===============================================================================Destination Owner Encap TunnelId Pref Next...&lt;/p&gt;</description><link>https://netdevops.me/2015/basic-l3vpn-bgpmpls-vpn-or-vprn-configuration-on-nokia-alcatel-lucent-sros-juniper-mx/</link> <pubDate>Fri, 07 Oct 2022 18:13:05 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2015/basic-l3vpn-bgpmpls-vpn-or-vprn-configuration-on-nokia-alcatel-lucent-sros-juniper-mx/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2015/basic-l3vpn-bgpmpls-vpn-or-vprn-configuration-on-nokia-alcatel-lucent-sros-juniper-mx/</guid> </item> <item> <title>NETCONF subtree filtering by example</title> <author>rdodin</author> <category>netconf</category> <description>&lt;h1&gt;NETCONF subtree filtering by example&lt;/h1&gt;&lt;p&gt;If you pick a random NetEng and ask them if they love NETCONF they would likely say &#34;Nah&#34;. The ~~hate-hate~~ love-hate kind of relationship with NETCONF mostly roots in its XML layer that one can&#39;t swap out. But if we set the XML-related challenges aside, it will become clear that NETCONF is a very well designed management interface with lots of capabilities. &lt;/p&gt;&lt;p&gt;In this topic we will touch on the NETCONF&#39;s subtree filtering capabilities.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;NETCONF&#39;s &lt;a href=&#34;https://www.rfcreader.com/#rfc6241&#34;&gt;RFC 6241&lt;/a&gt; defines two methods for filtering contents on the server (router) side:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://www.rfcreader.com/#rfc6241_line867&#34;&gt;Subtree filtering&lt;/a&gt; - mandatory for a NETCONF-enabled device to support&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://www.rfcreader.com/#rfc6241_line3008&#34;&gt;XPATH filtering&lt;/a&gt; - an optional capability&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Subtree filtering is powered by the following components:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Namespace Selection&lt;/li&gt;&lt;li&gt;Attribute Match Expressions&lt;/li&gt;&lt;li&gt;Containment Nodes&lt;/li&gt;&lt;li&gt;Selection Nodes&lt;/li&gt;&lt;li&gt;Content Match Nodes&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;They are very well explained in the RFC, so I won&#39;t bother with copy-pasting the definition and the rules these filtering components follow. Instead we will focus on the practical examples and put Selection and Content Match nodes to work in different scenarios.&lt;/p&gt;&lt;h3&gt;1 Selection nodes&lt;/h3&gt;&lt;p&gt;Selection node allow us to get a node and all its nested elements. Our simple examples will revolve around interactions with local users configuration on a Nokia SR OS which is modelled with the following YANG model:&lt;/p&gt;&lt;p&gt;&lt;code&gt;textmodule: nokia-conf +--rw configure +--rw system | +--rw security | | +--rw user-params | | +--rw local-user | | +--rw user* [user-name] | | +--rw user-name types-sros:named-item | | +--rw password types-sros:hashed-leaf | | +--rw access | | | +--rw console? boolean | | | +--rw ftp? boolean | | | +--rw snmp? boolean | | | +--rw netconf? boolean | | | +--rw grpc? boolean | | | +--rw li? boolean | | +--rw console +--rw member* -&amp;gt;../aaa/local-profilesâ€¦&lt;/code&gt;&lt;/p&gt;&lt;p&gt;If we want to filter all the configuration information related to the local users we could use Selection node &lt;code&gt;&amp;lt;local-user/&amp;gt;&lt;/code&gt; in our get-config RPC:&lt;/p&gt;&lt;p&gt;&lt;code&gt;xml&amp;lt;get-config&amp;gt; &amp;lt;source&amp;gt; &amp;lt;running /&amp;gt; &amp;lt;/source&amp;gt; &amp;lt;filter&amp;gt; &amp;lt;configure xmlns=&#34;urn:nokia.com:sros:ns:yang:sr:conf&#34;&amp;gt; &amp;lt;system&amp;gt; &amp;lt;security&amp;gt; &amp;lt;user-params&amp;gt; &amp;lt;local-user/&amp;gt; &amp;lt;!-- selection node --&amp;gt; &amp;lt;/user-params&amp;gt; &amp;lt;/security&amp;gt; &amp;lt;/system&amp;gt; &amp;lt;/configure&amp;gt; &amp;lt;/filter&amp;gt;&amp;lt;/get-config&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Hint #1: &lt;a href=&#34;https://netdevops.me/2020/nokia-yang-tree-and-path-browser/&#34;&gt;Nokia-yangtree&lt;/a&gt; is a beautiful way to explore Nokia YANG models.&lt;br&gt;Hint #2: I recommend &lt;a href=&#34;https://netdevops.me/2020/netconf-console-in-a-docker-container/&#34;&gt;netconf-console&lt;/a&gt; to talk NETCONF to your routers.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;If we translate this get-operation command to plain English it would sound like: &lt;em&gt;Dear router, can you please return everything you have under &lt;code&gt;local-user&lt;/code&gt; node in the running configuration datastore?&lt;/em&gt;&lt;br&gt;And that is what router replies back:&lt;/p&gt;&lt;p&gt;```xml&lt;rpc-reply xmlns:nc=&#34;urn:ietf:params:xml:ns:netconf:base:1.0&#34; xmlns=&#34;urn:ietf:params:xml:ns:netconf:base:1.0&#34; message-id=&#34;urn:uuid:f00ec433-17b3-4bcb-9d83-c3557794e56e&#34;&gt; &lt;data&gt; &lt;configure xmlns=&#34;urn:nokia.com:sros:ns:yang:sr:conf&#34;&gt; &lt;system&gt; &lt;security&gt; &lt;user-params&gt; &lt;local-user&gt; &lt;user&gt; &lt;user-name&gt;admin&lt;/user-name&gt; &lt;password&gt;$2y$10$Ro5MzyBZ18eVve/aTIYt..fSBbyJar11QGcQbixrVPfxLcpXeZ4eu&lt;/password&gt; &lt;access&gt; &lt;console&gt;true&lt;/console&gt; &lt;netconf&gt;true&lt;/netconf&gt; &lt;grpc&gt;true&lt;/grpc&gt; &lt;/access&gt; &lt;console&gt; &lt;member&gt;administrative&lt;/member&gt; &lt;/console&gt; &lt;/user&gt; &lt;user&gt; &lt;user-name&gt;roman&lt;/user-name&gt; &lt;password&gt;$2y$10$xkqn46jNHBUJWit446j2o.Yu3E9zWOg44yRGjRK2YjRZE4p5xFjmG&lt;/password&gt; &lt;access&gt; &lt;console&gt;true&lt;/console&gt; &lt;/access&gt; &lt;console&gt; &lt;member&gt;default&lt;/member&gt; &lt;/console&gt; &lt;/user&gt; &lt;/local-user&gt; &lt;/user-params&gt; ...&lt;/p&gt;</description><link>https://netdevops.me/2020/netconf-subtree-filtering-by-example/</link> <pubDate>Fri, 07 Oct 2022 17:38:45 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2020/netconf-subtree-filtering-by-example/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2020/netconf-subtree-filtering-by-example/</guid> </item> <item> <title>Containerlab - your network-centric labs with a Docker UX</title> <author>rdodin</author> <category>arista</category> <category>ceos</category> <category>cisco</category> <category>containerlab</category> <category>crpd</category> <category>frr</category> <category>juniper</category> <category>nokia</category> <category>sonic</category> <category>srlinux</category> <description>&lt;h1&gt;Containerlab - your network-centric labs with a Docker UX&lt;/h1&gt;&lt;p&gt;With the growing number of containerized Network Operating Systems (NOS) grows the demand to easily run them in the user-defined, versatile lab topologies. Unfortunately, container runtimes alone and tools like docker-compose are not a particularly good fit for that purpose, as they do not allow a user to easily create p2p connections between the containers.&lt;/p&gt;&lt;p&gt;&lt;a href=&#34;https://containerlab.srlinux.dev&#34;&gt;Containerlab&lt;/a&gt; provides a framework for orchestrating networking labs with containers. It starts the containers, builds a virtual wiring between them to create a topology of users choice and then manages a lab lifecycle.&lt;/p&gt;&lt;p&gt;&lt;center&gt;&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/xdi7rwdJgkg&#34; title=&#34;YouTube video player&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;&lt;/center&gt;&lt;/p&gt;&lt;p&gt;Containerlab focuses on containerized Network Operating Systems such as:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://www.nokia.com/networks/products/service-router-linux-NOS/&#34;&gt;Nokia SR-Linux&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Arista cEOS&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://sonic-net.github.io/SONiC/&#34;&gt;Azure SONiC&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://www.juniper.net/documentation/en_US/crpd/topics/concept/understanding-crpd.html&#34;&gt;Juniper cRPD&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;http://docs.frrouting.org/en/latest/overview.html&#34;&gt;FRR&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;In addition to native containerized NOSes, containerlab can launch traditional virtual-machine based routers using &lt;a href=&#34;https://containerlab.srlinux.dev/manual/vrnetlab/&#34;&gt;vrnetlab integration&lt;/a&gt;:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Nokia virtual SR OS (vSim/VSR)&lt;/li&gt;&lt;li&gt;Juniper vMX&lt;/li&gt;&lt;li&gt;Cisco IOS XRv&lt;/li&gt;&lt;li&gt;Arista vEOS&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;And, of course, containerlab is perfectly capable of wiring up arbitrary linux containers which can host your network applications, virtual functions or simply be a test client. With all that, containerlab provides a single IaaC interface to manage labs which can span contain all the needed variants of nodes:&lt;/p&gt;&lt;div class=&#34;mxgraph&#34; style=&#34;max-width:100%;border:1px solid transparent;margin:0 auto; display:block;&#34; data-mxgraph=&#34;{&amp;quot;page&amp;quot;:1,&amp;quot;zoom&amp;quot;:1.5,&amp;quot;highlight&amp;quot;:&amp;quot;#0000ff&amp;quot;,&amp;quot;nav&amp;quot;:true,&amp;quot;check-visible-state&amp;quot;:true,&amp;quot;resize&amp;quot;:true,&amp;quot;url&amp;quot;:&amp;quot;https://raw.githubusercontent.com/srl-wim/container-lab/diagrams/index.md&amp;quot;}&#34;&gt;&lt;/div&gt;&lt;!-- more --&gt;&lt;h2&gt;The WHY&lt;/h2&gt;&lt;p&gt;As it often happens, &lt;a href=&#34;https://containerlab.srlinux.dev&#34;&gt;https://containerlab.srlinux.dev&lt;/a&gt; was created by engineers to address their needs.&lt;/p&gt;&lt;p&gt;In containerlab&#39;s case the need was simple - to be able to create networking topologies with containerized Network Operating Systems&lt;/p&gt;&lt;p&gt;As you might know, the off-the-shelf tools like docker-compose are not really fit-for-purpose of defining a multi-interfaced containers, therefore many of us created the bespoke bash scripts ruling a web of veth pairs between containers.&lt;/p&gt;&lt;p&gt;Containerlab solves this, and helps many other pain points you might have seen while running your labs.&lt;/p&gt;&lt;h2&gt;The WHAT&lt;/h2&gt;&lt;p&gt;Containerlab is what docker-compose would be if it was created with networking topologies in mind.&lt;/p&gt;&lt;p&gt;We use so-called &lt;code&gt;clab files&lt;/code&gt; to define a topology that is then deployed by containerlab anywhere, where docker runs without any 3rd party dependencies.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;p1&#34; src=&#34;https://pbs.twimg.com/media/Ex1F03XWUAE16Ws?format=jpg&amp;amp;name=4096x4096&#34;&gt;&lt;/p&gt;&lt;p&gt;The &lt;code&gt;clab file&lt;/code&gt; is a YAML in disguise, it offers a way to define your topology top-to-bottom.&lt;/p&gt;&lt;p&gt;Balancing between the simplicity, conventionality and expressiveness it allows users to define topologies that are both easy to read/write and yet are not limited in features)&lt;/p&gt;&lt;p&gt;```yamlname: srlceos01&lt;/p&gt;&lt;p&gt;topology: nodes: srl: kind: srl image: srlinux:20.6.3-145 license: license.key ceos: kind: ceos image: ceos:4.25.0F&lt;/p&gt;&lt;p&gt;links: - endpoints: [&#34;srl:e1-1&#34;, &#34;ceos:eth1&#34;]```&lt;/p&gt;&lt;h2&gt;The HOW&lt;/h2&gt;&lt;p&gt;This &lt;code&gt;clab file&lt;/code&gt; is all that is needed to spin up a lab of the two interconnected nodes - Nokia SR Linux and Arista cEOS.&lt;/p&gt;&lt;p&gt;Yes, that is all that&#39;s needed. No bulky emulators, no bespoke datapaths. A pure container-based lab powered by linux networking primitives.&lt;/p&gt;&lt;p&gt;That is what you get:&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;p2&#34; src=&#34;https://pbs.twimg.com/media/Ex1J3PRWgAEZyMc?format=jpg&amp;amp;name=4096x4096&#34;&gt;&lt;/p&gt;&lt;p&gt;All the heavy lifting of launching the containerized NOS is abstracted by containerlab kinds. It knows how to start SR Linux and cEOS. Just tell it which kind you need and what image to use&lt;/p&gt;&lt;p&gt;No need to keep handy those endless ENV vars or lengthy commands.&lt;/p&gt;&lt;p&gt;Interconnecting the nodes is as easy as writing a string of text.Tell containerlab which interfaces you want to be interconnected, and it will create the veth pairs blazingly fast.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;p3&#34; src=&#34;https://pbs.twimg.com/media/Ex1K9C6W8AIiEpI?format=jpg&amp;amp;name=4096x4096&#34;&gt;&lt;/p&gt;&lt;p&gt;And surely enough, that is just the tip of an iceberg, containerlab packs a ton of features which I won&#39;t repeat here, as they are all mentioned in the &lt;a href=&#34;https://containerlab.srlinux.dev/#features&#34;&gt;docs site&lt;/a&gt; we carefully maintain.&lt;/p&gt;&lt;h2&gt;Multivendor capabilities&lt;/h2&gt;&lt;h3&gt;Arista cEOS&lt;/h3&gt;&lt;p&gt;Although containerlab was born in Nokia, ...&lt;/p&gt;</description><link>https://netdevops.me/2021/containerlab-your-network-centric-labs-with-a-docker-ux/</link> <pubDate>Sun, 25 Sep 2022 19:03:21 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2021/containerlab-your-network-centric-labs-with-a-docker-ux/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2021/containerlab-your-network-centric-labs-with-a-docker-ux/</guid> </item> <item> <title>OSPF. Neighbors on a &#34;point-to-broadcast&#34; network</title> <author>rdodin</author> <category>ospf</category> <description>&lt;h1&gt;OSPF. Neighbors on a &#34;point-to-broadcast&#34; network&lt;/h1&gt;&lt;p&gt;When it comes to basic OSPF troubleshooting the first-aid kit is &lt;em&gt;Neighbor states&lt;/em&gt; and &lt;em&gt;things, that should match to form an adjacency&lt;/em&gt;. And on one early morning while refreshing my memory on OSPF neighbor states I accidentally ran into quite interesting problem.&lt;/p&gt;&lt;p&gt;But before we start, answer the short question:&lt;/p&gt;&lt;p style=&#34;padding-left: 30px;&#34;&gt; Will adjacency be formed between directly connected via Gig. Ethernet interfaces routers R1 and R2 if&lt;/p&gt;&lt;li style=&#34;padding-left: 30px;&#34;&gt; R1&amp;#8217;s OSPF interface type configured as point-to-point&lt;/li&gt;&lt;li style=&#34;padding-left: 30px;&#34;&gt; R2&amp;#8217;s OSPF interface type configured as broadcast&lt;/li&gt;&lt;p style=&#34;padding-left: 30px;&#34;&gt; Time&amp;#8217;s up. The answer is &amp;#8211; yes and no. Wanna know why? Jump in, I have to show you something.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;Take a look at this topology which consists of two directly connected Cisco routers.&lt;/p&gt;&lt;p&gt;&lt;img class=&#34;aligncenter&#34; src=&#34;http://img-fotki.yandex.ru/get/6827/21639405.11b/0_836e1_87245d32_L.png&#34; alt=&#34;&#34; width=&#34;500&#34; height=&#34;396&#34; /&gt;&lt;/p&gt;&lt;p&gt;At first, topology seems as simple as a first figure in a CCNA book. But take a closer look at this OSPF interfaces, their types are different. Hm, definitely not a case you would find covered in an everyday OSPF configuration guide.&lt;/p&gt;&lt;p&gt;I will not go into details about what are all the differences between various OSPF interface types, you already know it, or can read about 1-click away. Though I should remind you the key difference between &lt;strong&gt;point-to-point&lt;/strong&gt; and &lt;strong&gt;broadcast&lt;/strong&gt; interfaces behavior which is the necessity to elect DR/BDR routers for the latter.&lt;/p&gt;&lt;p&gt;Also it is worth mention that it is best-practice nowadays to set &amp;#8220;broadcast-by-nature&amp;#8221; Ethernet interfaces to operate in a point-to-point fashion. Why would one do it? To reduce convergence time. Ethernet interface once configured as point-to-point won&amp;#8217;t go into DR/BDR election which effectively means that neighbor relationships will reach FULL state 40 seconds faster (40s is the default &lt;em&gt;wait&lt;/em&gt; interval for interface to elect DR/BDR routers_)_.&lt;/p&gt;&lt;p&gt;Therefore this particular case with different interface types isn&amp;#8217;t some artificial Lab exercise, you can easily meet this interface mix in the real world. Let&amp;#8217;s say you simply forgot to configure another interface with p2p type, or your neighbor is under administration of the 3rd party who knows nothing about best practices and leave you with default broadcast behavior.&lt;/p&gt;&lt;p&gt;Ok, different link types mean different networks with different behavior, rules and so forth, there is every indication that adjacency should not form. But it is not that simple. Let&amp;#8217;s Lab!&lt;/p&gt;&lt;h2&gt;Lab time&lt;/h2&gt;&lt;p&gt;I booted up two Cisco routers running IOS 15.2(4)S simultaneously and first thing checked R1&amp;#8217;s OSPF neighbors, expecting to see zero active neighbors:&lt;/p&gt;&lt;p&gt;```R1#show ip ospf neighbor&lt;/p&gt;&lt;p&gt;Neighbor ID Pri State Dead Time Address Interface2.2.2.2 0 FULL/ - 00:00:36 10.1.2.2 GigabitEthernet1/0```&lt;/p&gt;&lt;p&gt;Look at this, R1 has a neighbor in FULL state, which means that it has recognized R2 as a valid neighbor and successfully accomplished exchange of &lt;em&gt;Link State Updates&lt;/em&gt;! As a precaution lets check OSPF interfaces parameters on both routers to confirm that they indeed operate in different types:&lt;/p&gt;&lt;p&gt;On R1:&lt;/p&gt;&lt;p&gt;&lt;code&gt;txtR1# show ip ospf interface gi1/0GigabitEthernet1/0 is up, line protocol is up Internet Address 10.1.2.1/24, Area 0, Attached via Interface Enable Process ID 1, Router ID 1.1.1.1, Network Type POINT_TO_POINT, Cost: 1 Topology-MTID Cost Disabled Shutdown Topology Name 0 1 no no Base Enabled by interface config, including secondary ip addresses Transmit Delay is 1 sec, State POINT_TO_POINT Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5 oob-resync timeout 40 Hello due in 00:00:00 Supports Link-local Signaling (LLS) Cisco NSF helper support enabled IETF NSF helper support enabled Index 1/1, flood queue length 0 Next 0x0(0)/0x0(0) Last flood scan length is 1, maximum is 1 Last flood scan time is 0 msec, maximum is 0 msec Neighbor Count is 1, Adjacent neighbor count is 1 Adjacent with neighbor 2.2.2.2 Suppress hello for 0 neighbor(s)&lt;/code&gt;&lt;/p&gt;&lt;p&gt;On R2:&lt;/p&gt;&lt;p&gt;```txtR2#show ip ospf interface gi1/0GigabitEthernet1/0 is up, line protocol is up Internet Address 10.1.2.2/24, Area 0, Attached via Interface Enable Process ID 1, Router ID 2.2.2.2, Network Type BROADCAST, Cost: 1 Topology-MTID Cost Disabled Shutdown Topology Name 0 1 no no Base Enabled by interface config, including secondary ip addresses Transmit Delay is 1 sec, State DR, Priority 1 Designated Router (ID) 2.2.2.2, Interface address 10.1.2.2 Backup Designated router (ID) 1.1.1.1, Interface address 10.1.2.1 Timer intervals configured, Hello 10, D...&lt;/p&gt;</description><link>https://netdevops.me/2015/ospf-neighbors-on-a-point-to-broadcast-network/</link> <pubDate>Sun, 25 Sep 2022 18:57:51 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2015/ospf-neighbors-on-a-point-to-broadcast-network/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2015/ospf-neighbors-on-a-point-to-broadcast-network/</guid> </item> <item> <title>How to install python3 in Amazon Linux AMI</title> <author>rdodin</author> <category>aws</category> <category>python</category> <description>&lt;h1&gt;How to install python3 in Amazon Linux AMI&lt;/h1&gt;&lt;p&gt;While &lt;a href=&#34;https://aws.amazon.com/amazon-linux-ami/&#34;&gt;Amazon Linux AMI&lt;/a&gt; has &lt;code&gt;yum&lt;/code&gt; as a package manager, it is not that all compatible with any RHEL or CentOS distributive. A lot of changes that AWS team brought into this image made it a separate distro, so no eyebrows should be given when battle-tested procedure to install python3 will fail on Amazon Linux. (Yeah, python3 does not come included yet in Amazon Linux)&lt;/p&gt;&lt;p&gt;Fortunately it is very easy to fetch (while not the latest release) python3:&lt;/p&gt;&lt;p&gt;```bash&lt;/p&gt;&lt;h1&gt;list available packages that have python3 in their name&lt;/h1&gt;&lt;p&gt;yum list | grep python3&lt;/p&gt;&lt;h1&gt;install python3+pip, plus optionally packages to your taste&lt;/h1&gt;&lt;p&gt;sudo yum install python35 python35-devel python35-pip python35-setuptools python35-virtualenv&lt;/p&gt;&lt;h1&gt;update pip3. optionally set a symbolic link to pip3&lt;/h1&gt;&lt;p&gt;sudo pip-3.5 install --upgrade pip```&lt;/p&gt;&lt;p&gt;And that is it!&lt;/p&gt;</description><link>https://netdevops.me/2017/how-to-install-python3-in-amazon-linux-ami/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/how-to-install-python3-in-amazon-linux-ami/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/how-to-install-python3-in-amazon-linux-ami/</guid> </item> <item> <title>How to make VS Code Go extension to work in your cloud folder on different platforms?</title> <author>rdodin</author> <category>go</category> <category>vs code</category> <description>&lt;h1&gt;How to make VS Code Go extension to work in your cloud folder on different platforms?&lt;/h1&gt;&lt;p&gt;I started to play with &lt;strong&gt;Go&lt;/strong&gt; aka Golang. Yeah, leaving the comfort zone, all that buzz. And for quite some time I&#39;ve been engaged with VS Code whenever/wherever I did dev activities.&lt;/p&gt;&lt;p&gt;VS Code has a solid Go support via its official extension:&lt;/p&gt;&lt;p&gt;!!!info This extension adds rich language support for the Go language to VS Code, including:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;- Completion Lists (using gocode)- Signature Help (using gogetdoc or godef+godoc)- Quick Info (using gogetdoc or godef+godoc)- Goto Definition (using gogetdoc or godef+godoc)- Find References (using guru)- File outline (using go-outline)- Workspace symbol search (using go-symbols)- Rename (using gorename)- Build-on-save (using go build and go test)- Lint-on-save (using golint or gometalinter)- Format (using goreturns or goimports or gofmt)- Generate unit tests skeleton (using gotests)- Add Imports (using gopkgs)- Add/Remove Tags on struct fields (using gomodifytags)- Semantic/Syntactic error reporting as you type (using gotype-live)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Mark that gotools in the brackets, these ones are powering all that extra functionality and got installed into your &lt;code&gt;GOPATH&lt;/code&gt; once you install them via VS Code.&lt;/p&gt;&lt;p&gt;And here you might face an issue if you want to use Go + VS Code both on Mac and Linux using the Dropbox folder (or any other syncing service). The issue is that binaries for Mac and Linux will overwrite themselves once you decide to install the extension on your second platform. Indeed, by default VS Code will fetch the source code of the tools and build them, placing binaries in the &lt;code&gt;$GOPATH/bin&lt;/code&gt;.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;Lucky we, the Go Extension developers have a special setting to put extension dependencies to a different &lt;code&gt;$GOPATH&lt;/code&gt;:&lt;/p&gt;&lt;h2&gt;Tools this extension depends on&lt;/h2&gt;&lt;p&gt;This extension uses a host of Go tools to provide the various rich features. These tools are installed in your &lt;code&gt;GOPATH&lt;/code&gt; by default. If you wish to have the extension use a separate &lt;code&gt;GOPATH&lt;/code&gt; for its tools, provide the desired location in the setting &lt;code&gt;go.toolsGopath&lt;/code&gt;. &lt;a href=&#34;https://github.com/Microsoft/vscode-go/wiki/Go-tools-that-the-Go-extension-depends-on&#34;&gt;Read more&lt;/a&gt; about this and the tools at Go tools that the Go extension depends on.&lt;/p&gt;&lt;p&gt;And thats it, open your &lt;code&gt;settings.json&lt;/code&gt;, put something like&lt;/p&gt;&lt;p&gt;&lt;code&gt;json&#34;go.toolsGopath&#34;: &#34;~/.gotools&#34;&lt;/code&gt;&lt;/p&gt;&lt;p&gt;and thats it, next time you hit &#34;install&#34; of Go Extension dependencies, they will be stored outside your Dropbox-powered &lt;code&gt;$GOPATH&lt;/code&gt; and won&#39;t interfere with each other.&lt;/p&gt;</description><link>https://netdevops.me/2017/how-to-make-vs-code-go-extension-to-work-in-your-cloud-folder-on-different-platforms/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/how-to-make-vs-code-go-extension-to-work-in-your-cloud-folder-on-different-platforms/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/how-to-make-vs-code-go-extension-to-work-in-your-cloud-folder-on-different-platforms/</guid> </item> <item> <title>Setting up a Hugo blog with GitLab and CloudFlare</title> <author>rdodin</author> <category>cloudflare</category> <category>gitlab</category> <category>hugo</category> <description>&lt;h1&gt;Setting up a Hugo blog with GitLab and CloudFlare&lt;/h1&gt;&lt;p&gt;&lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; gets a lot of &lt;a href=&#34;https://www.staticgen.com/hugo&#34;&gt;attention&lt;/a&gt; these days, it is basically snapping at the Jekyll&#39; heels which is still the king of the hill! I don&#39;t know if Hugo&#39; popularity coupled with &lt;strong&gt;the fastest static-site-generator&lt;/strong&gt; statement, but for me &#34;speed&#34; is not the issue at all. A personal blog normally has few hundreds posts, not even close to thousands to be worried about slowness.&lt;/p&gt;&lt;p&gt;Then if it is not for speed then why did I choose Hugo? Because it became a solid product with a crowded community and all the common features available. &lt;em&gt;(To be honest I also got an illusion that one day I might start sharpen my Go skills through Hugo as well)&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;As you already noticed, this blog is powered by &lt;strong&gt;Hugo&lt;/strong&gt;, is running on &lt;strong&gt;GitLab pages&lt;/strong&gt;, with SSL certificate from &lt;strong&gt;CloudFlare&lt;/strong&gt; and costs me &lt;strong&gt;$0&lt;/strong&gt;. And I would like to write down the key pieces that&#39;ll probably be of help on your path to a zero-cost personal blog/cv/landing/etc.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;The key ingredients of a modern zero-cost blog powered by a Static Site Generator are:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Version Control System -- &lt;strong&gt;Git&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;Web-based version control repository -- &lt;strong&gt;GitLab&lt;/strong&gt;/Github&lt;/li&gt;&lt;li&gt;Web server -- &lt;strong&gt;GitLab Pages&lt;/strong&gt;/GitHub Pages&lt;/li&gt;&lt;li&gt;Static Site Generator Engine -- &lt;strong&gt;Hugo&lt;/strong&gt;/Jekyll/Hexo/Pelican/many-others&lt;/li&gt;&lt;li&gt;SSL Certificate provider -- &lt;strong&gt;Cloudflare&lt;/strong&gt;/LetsEncrypt &lt;em&gt;(optional)&lt;/em&gt;&lt;/li&gt;&lt;li&gt;Custom domain linked to a free one from GitLab/Github &lt;em&gt;(optional)&lt;/em&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;While Git and GitLab/GitHub are of obvious choice we better discuss the &lt;code&gt;Hugo + GitLab CI + GitLab pages + Cloudflare&lt;/code&gt; mix that I chose to enable this blog.&lt;/p&gt;&lt;h2&gt;Hugo&lt;/h2&gt;&lt;p&gt;Hugo installation is ridiculously easy, thanks to Golang that powers it. Download a single &lt;code&gt;hugo&lt;/code&gt; binary from the &lt;a href=&#34;https://github.com/gohugoio/hugo/releases&#34;&gt;official repo&lt;/a&gt; and thats it. No need for virtualenvs, npms and alike, a single binary is all you need.&lt;/p&gt;&lt;p&gt;Once the binary is in your &lt;code&gt;$PATH&lt;/code&gt; create a site skeleton with&lt;/p&gt;&lt;p&gt;&lt;code&gt;hugo new site &amp;lt;yourBlogName&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;p&gt;For details refer to the &lt;a href=&#34;https://gohugo.io/getting-started/quick-start/&#34;&gt;QuickStart guide&lt;/a&gt; to get a locally running site under 5 minutes.&lt;/p&gt;&lt;h3&gt;Theme&lt;/h3&gt;&lt;p&gt;Hugo community produced over 100+ themes for different needs. As to me, most of them are ugly, or as minimalistic as the blogspot. Probably the hardest thing in the whole process is to find a theme that suits you. This blog uses a &lt;a href=&#34;https://themes.gohugo.io/hugo-tranquilpeak-theme/&#34;&gt;Tranquilpeak&lt;/a&gt; theme.&lt;/p&gt;&lt;p&gt;To onboard a chosen theme follow the quickstart guide&#39; &lt;a href=&#34;https://gohugo.io/getting-started/quick-start/#step-3-add-a-theme&#34;&gt;step 3&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;GitLab&lt;/h2&gt;&lt;p&gt;Now when you have an engine and a theme coupled together its GitLab&#39; part to present your content to the world. GitLab has the &lt;a href=&#34;https://about.gitlab.com/features/pages/&#34;&gt;GitLab Pages&lt;/a&gt; service created just for what we need and highligted by being:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;free&lt;/li&gt;&lt;li&gt;SSG-agnostic&lt;/li&gt;&lt;li&gt;SSL &amp;amp; custom domains ready&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;It has more whistles than Github pages and is completely free without any limitations.&lt;/p&gt;&lt;p&gt;There is a &lt;a href=&#34;https://docs.gitlab.com/ee/user/project/pages/&#34;&gt;comprehensive guide&lt;/a&gt; about onboarding a static generated site within GitLab, I will boil it down to a few steps (you can always peer into &lt;a href=&#34;https://gitlab.com/rdodin/netdevops.me&#34;&gt;my repo&lt;/a&gt; for a complete code and settings):&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; file at the root of your repo with the &lt;a href=&#34;https://docs.gitlab.com/ce/ci/yaml/#pages&#34;&gt;&lt;code&gt;pages&lt;/code&gt;&lt;/a&gt; job&lt;/p&gt;&lt;p&gt;```bashpages:&lt;/p&gt;&lt;h1&gt;this image is slimmer than official one; based on Alpine&lt;/h1&gt;&lt;p&gt;image: fundor333/hugo script: - hugo&lt;/p&gt;&lt;h1&gt;send all files from public directory to the CI server&lt;/h1&gt;&lt;p&gt;artifacts: paths: - publiconly: - master # this job will affect only the &#39;master&#39; branch```&lt;/p&gt;&lt;p&gt;Note, that you can put the exact same content in your file, there are no custom parts here.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Find your &lt;code&gt;baseurl&lt;/code&gt; and put it into &lt;code&gt;config.toml&lt;/code&gt; of your Hugo site. A base URL depends on how did you create a GitLab project. Is it a project placed under you personal account or a under a group? All the options are outlined in the &lt;a href=&#34;https://docs.gitlab.com/ce/user/project/pages/getting_started_part_one.html#gitlab-pages-domain&#34;&gt;official docs&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Make a commit with the contents of your blog and push the changes to the master branch &lt;code&gt;git push origin master&lt;/code&gt;. That will automatically trigger the &lt;code&gt;pages&lt;/code&gt; job to build your site and start serving it from &lt;code&gt;https://yournamespace.gitlab.io&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;At this point you are good to go, you have TLS certificate provided by Gitlab for &lt;code&gt;*.gitlab.io&lt;/code&gt; namespace, your posts will be automatically generated once you push to &lt;code&gt;master&lt;/code&gt; branch and your texts are in VSC. WIN!&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;You can stop here and start generate the content, but if you are up to custom domain or custom TLS certificate -&amp;gt; continue to read.&lt;/p&gt;&lt;h2&gt;Custom domain&lt;/h2&gt;&lt;p&gt;Having your site to render by &lt;em&gt;myawesome.blog&lt;/em&gt; URL instead of &lt;em&gt;gitlab.io&lt;/em&gt; is solid. For that you just need a &lt;code&gt;A&lt;/code&gt; or &lt;code&gt;CNAME&lt;/code&gt; DNS record provisioned as [explained in the docs](ht...&lt;/p&gt;</description><link>https://netdevops.me/2017/setting-up-a-hugo-blog-with-gitlab-and-cloudflare/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/setting-up-a-hugo-blog-with-gitlab-and-cloudflare/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/setting-up-a-hugo-blog-with-gitlab-and-cloudflare/</guid> </item> <item> <title>Flask application in a production-ready container</title> <author>rdodin</author> <category>docker</category> <category>flask</category> <category>nginx</category> <category>uwsgi</category> <description>&lt;h1&gt;Flask application in a production-ready container&lt;/h1&gt;&lt;p&gt;Flask documentation &lt;a href=&#34;http://flask.pocoo.org/docs/0.12/deploying/#deployment-options&#34;&gt;is very clear&lt;/a&gt; on where is the place for its built-in WSGI application server:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;While lightweight and easy to use, &lt;strong&gt;Flaskâ€™s built-in server is not suitable for production&lt;/strong&gt; as it doesnâ€™t scale well and by default serves only one request at a time.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;So how about I share with you a &lt;a href=&#34;https://github.com/hellt/nginx-uwsgi-flask-alpine-docker&#34;&gt;&lt;em&gt;Dockerfile&lt;/em&gt;&lt;/a&gt; that will enable your Flask application to run &lt;strong&gt;properly&lt;/strong&gt; and ready for production-like deployments? As a bonus, I will share my findings discovered along the way of building this container image.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;nginx-uwsgi-flaks-alpine-docker&#34; src=&#34;https://gitlab.com/rdodin/netdevops.me/uploads/e893ab9ea824ed501170908377d3fb52/image.png&#34;&gt;&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;But before we dive in and start throwing words like uwsgi, nginx and sockets lets set up our vocabulary. As DigitalOcean originally wrote:&lt;/p&gt;&lt;blockquote&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://www.python.org/dev/peps/pep-3333/&#34;&gt;&lt;strong&gt;WSGI&lt;/strong&gt;&lt;/a&gt;: A Python spec that defines a standard interface for communication between an application or framework and an application/web server. This was created in order to simplify and standardize communication between these components for consistency and interchangeability. This basically defines an API interface that can be used over other protocols.&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://uwsgi-docs.readthedocs.io/en/latest/&#34;&gt;&lt;strong&gt;uWSGI&lt;/strong&gt;&lt;/a&gt;: An application server container that aims to provide a full stack for developing and deploying web applications and services. The main component is an application server that can handle apps of different languages. It communicates with the application using the methods defined by the WSGI spec, and with other web servers over a variety of other protocols. This is the piece that translates requests from a conventional web server into a format that the application can process.&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://uwsgi-docs.readthedocs.io/en/latest/Protocol.html&#34;&gt;&lt;strong&gt;uwsgi&lt;/strong&gt;&lt;/a&gt;: A fast, binary protocol implemented by the uWSGI server to communicate with a more full-featured web server. This is a wire protocol, not a transport protocol. It is the preferred way to speak to web servers that are proxying requests to uWSGI.&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;h2&gt;Why do we even need nginx and uWSGI in front of Flask?&lt;/h2&gt;&lt;p&gt;That is the question everyone should ask. Main reason is performance, of course. The Flasks built-in web server is a development server by &lt;a href=&#34;https://werkzeug.palletsprojects.com/&#34;&gt;Werkzeug&lt;/a&gt; which was not designed to be particularly efficient, stable, or secure.&lt;br&gt;And by all means Werkzeug was not optimized to serve static content, that is why production deployments of Flask apps rely on the following stack:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Front-end web-server&lt;/strong&gt; (nginx or Apache): load balancing, SSL termination, rate limiting, HTTP parsing and serving static content.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;WSGI application server&lt;/strong&gt; (uWSGI, Gunicorn, CherryPy): runs WSGI compliant web applications and does it in a production-grade manner. Handling concurrent requests, process management, cluster membership, logging, configuration, shared memory, etc.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Obviously, development server which comes with Flask simply does not bother about all these tasks that production deployments face. That is why it is so strongly advised against using Flask&#39; server in any kind of production.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Speaking about the performance I suggest to check out this presentation from Pycon IE &#39;13 called &lt;a href=&#34;http://brianmcdonnell.github.io/pycon_ie_2013/#/&#34;&gt;&lt;em&gt;Maximum Throughput (baseline costs of web frameworks)&lt;/em&gt;&lt;/a&gt; that explains how number of queries per second depends on web stack you choose.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;While there are many alternatives to &lt;a href=&#34;https://nginx.ru/en/&#34;&gt;&lt;code&gt;nginx&lt;/code&gt;&lt;/a&gt;+&lt;a href=&#34;https://uwsgi-docs.readthedocs.io/en/latest/&#34;&gt;&lt;code&gt;uWSGI&lt;/code&gt;&lt;/a&gt; pair, I will focus on these two in this post.&lt;/p&gt;&lt;h2&gt;Do I need a &lt;em&gt;production grade&lt;/em&gt; Flask app for a pet project?&lt;/h2&gt;&lt;p&gt;While you may go with built-in Flask server for the little projects of your own, this container is so simple that you would not need to use the Built-in server anymore. Why opting out for testing server, if it is easy to launch it in a production-ready way?&lt;/p&gt;&lt;h2&gt;Configuring nginx&lt;/h2&gt;&lt;p&gt;We start with configuration of &lt;code&gt;nginx&lt;/code&gt; server that will face incoming traffic and handle it for us.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;We also keep in mind that our nginx server will run in an Alpine Linux docker container.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;nginx config consists of two parts:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;global nginx config file (&lt;a href=&#34;https://github.com/hellt/nginx-uwsgi-flask-alpine-docker/blob/master/python2/nginx.conf&#34;&gt;&lt;code&gt;nginx.conf&lt;/code&gt;&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;site-specific config file (&lt;a href=&#34;https://github.com/hellt/nginx-uwsgi-flask-alpine-docker/blob/master/python2/flask-site-nginx.conf&#34;&gt;&lt;code&gt;flask-site-nginx.conf&lt;/code&gt;&lt;/a&gt;)&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;nginx global config&lt;/h3&gt;&lt;p&gt;For the &lt;strong&gt;global nginx config file&lt;/strong&gt; I combined the recommendations outlined in the post &lt;a href=&#34;http://www.patricksoftwareblog.com/how-to-configure-nginx-for-a-flask-web-application/&#34;&gt;&lt;em&gt;How to Configure NGINX for a Flask Web Application&lt;/em&gt;&lt;/a&gt; with [nginx configuration samples](https://uwsgi-docs.readthedocs.io/en/latest/Ngin...&lt;/p&gt;</description><link>https://netdevops.me/2017/flask-application-in-a-production-ready-container/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/flask-application-in-a-production-ready-container/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/flask-application-in-a-production-ready-container/</guid> </item> <item> <title>Building AWS Lambda with Python, S3 and serverless</title> <author>rdodin</author> <category>aws</category> <category>aws lambda</category> <category>boto3</category> <category>python</category> <category>serverless</category> <description>&lt;h1&gt;Building AWS Lambda with Python, S3 and serverless&lt;/h1&gt;&lt;p&gt;Cloud-native revolution pointed out the fact that the microservice is the new building block and your best friends now are Containers, AWS, GCE, Openshift, Kubernetes, you-name-it. But suddenly &lt;em&gt;micro&lt;/em&gt; became not that granular enough and people started talking about &lt;em&gt;serverless functions&lt;/em&gt;!&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;https://gitlab.com/rdodin/pics/-/wikis/uploads/a115166eb200861e796a0a5a847da8e7/image.png&#34;&gt;&lt;/p&gt;&lt;p&gt;When I decided to step in the serverless property I chose &lt;a href=&#34;https://docs.aws.amazon.com/lambda/latest/dg/welcome.html&#34;&gt;AWS Lambda&lt;/a&gt; as my instrument of choice. As for experimental subject, I picked up one of my existing projects - a script that tracks new documentation releases for Nokia IP/SDN products (which I aggregate at &lt;a href=&#34;https://nokdoc.github.io&#34;&gt;nokdoc.github.io&lt;/a&gt;).&lt;/p&gt;&lt;p&gt;Given that not so many posts are going deeper than onboarding a simplest function, I decided to write down the key pieces I needed to uncover to push a &lt;strong&gt;real code&lt;/strong&gt; to the Lambda.&lt;/p&gt;&lt;p&gt;Buckle up, our agenda is fascinating:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;testing basic Lambda onboarding process powered by Serverless framework&lt;/li&gt;&lt;li&gt;accessing files in AWS S3 from within our Lambda with &lt;code&gt;boto3&lt;/code&gt; package and custom AWS IAM role&lt;/li&gt;&lt;li&gt;packaging non-standard python modules for our Lambda&lt;/li&gt;&lt;li&gt;exploring ways to provision shared code for Lambdas&lt;/li&gt;&lt;li&gt;and using path variables to branch out the code in Lambda&lt;/li&gt;&lt;/ul&gt;&lt;!-- more --&gt;&lt;h2&gt;Init&lt;/h2&gt;&lt;p&gt;What I am going to &lt;em&gt;lambdsify&lt;/em&gt; is an existing python3 script called &lt;strong&gt;nokdoc-sentinel&lt;/strong&gt; which has the following Lambda-related properties:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;uses non standard python package -- &lt;code&gt;requests&lt;/code&gt;&lt;/li&gt;&lt;li&gt;reads/writes a file.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;I specifically emphasized this non-std packages and relying on persistence since these aspects are not covered in 99% of Lambda-related posts, so, filling the spot.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;AWS Lambda is a compute service that lets you run code without provisioning or managing servers. AWS Lambda executes your code only when needed and scales automatically, from a few requests per day to thousands per second.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Multiple choices are exposed to you when choosing an instrument to configure &amp;amp; deploy an AWS Lambda:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;AWS Console (web)&lt;/li&gt;&lt;li&gt;AWS CLI&lt;/li&gt;&lt;li&gt;Multiple frameworks (&lt;a href=&#34;https://serverless.com/&#34;&gt;Serverless&lt;/a&gt;, &lt;a href=&#34;https://chalice.readthedocs.io/en/latest/index.html&#34;&gt;Chalice&lt;/a&gt;, &lt;a href=&#34;http://pywren.io/&#34;&gt;Pywren&lt;/a&gt;)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;While it might be good to feel the taste of a manual Lambda configuration process through the AWS Console, I decided to go &#34;everything as a code&#34; way and use the &lt;a href=&#34;https://serverless.com/&#34;&gt;Serverless&lt;/a&gt; framework to define, configure and deploy my first Lambda.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The &lt;strong&gt;Serverless Framework&lt;/strong&gt; helps you develop and deploy your AWS Lambda functions, along with the AWS infrastructure resources they require. It&#39;s a CLI that offers structure, automation and best practices out-of-the-box, allowing you to focus on building sophisticated, event-driven, serverless architectures, comprised of Functions and Events.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;Serverless installation and configuration&lt;/h2&gt;&lt;p&gt;First things first, &lt;a href=&#34;https://serverless.com/framework/docs/providers/aws/guide/installation/&#34;&gt;install&lt;/a&gt; the framework and &lt;a href=&#34;https://serverless.com/framework/docs/providers/aws/guide/credentials/&#34;&gt;configure AWS credentials&lt;/a&gt;. I already had credentials configured for AWS CLI thus skipped that part, if that is not the case for you, the docs are comprehensive and should have you perfectly covered.&lt;/p&gt;&lt;h2&gt;Creating a Service template&lt;/h2&gt;&lt;p&gt;Once serverless is installed, start with creating an &lt;code&gt;aws-python3&lt;/code&gt; service:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;A &lt;code&gt;service&lt;/code&gt; is like a project. It&#39;s where you define your AWS Lambda Functions, the events that trigger them and any AWS infrastructure resources they require, all in a file called serverless.yml.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;code&gt;bashserverless create --template aws-python3 --name nokdoc-sentinel&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Two files will be created:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;handler.py&lt;/code&gt; -- a module with Lambda function boilerplate code&lt;/li&gt;&lt;li&gt;&lt;code&gt;serverless.yml&lt;/code&gt; -- a service definition file&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;Making lambda instance out of a template&lt;/h2&gt;&lt;p&gt;I renamed &lt;code&gt;handler.py&lt;/code&gt; module to &lt;code&gt;sentinel.py&lt;/code&gt;, also changed the enclosed function&#39; name and deleted redundant code from the template. For starters I kept the portion of a sample code just to test that deploying to AWS via serverless actually works.&lt;/p&gt;&lt;p&gt;```python&lt;/p&gt;&lt;h1&gt;sentinel.py&lt;/h1&gt;&lt;p&gt;import json&lt;/p&gt;&lt;p&gt;def check(event, context): body = { &#34;message&#34;: &#34;Sentinel is on watch!&#34;, }&lt;/p&gt;&lt;pre&gt;&lt;code&gt;response = { &#34;statusCode&#34;: 200, &#34;body&#34;: json.dumps(body)}return response&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;```&lt;/p&gt;&lt;p&gt;Thing to remember is that you also must to make appropriate changes in the &lt;code&gt;serverless.yml&lt;/code&gt;, once you renamed the module and the function names:&lt;/p&gt;&lt;p&gt;```bashfunctions:&lt;/p&gt;&lt;h1&gt;name of the func in the module&lt;/h1&gt;&lt;p&gt;check: # &lt;code&gt;handler: sentinel.check&lt;/code&gt; reads as  # &#34;&lt;code&gt;check&lt;/code&gt; function in the &lt;code&gt;sentinel&lt;/code&gt; module handler: sentinel.check```&lt;/p&gt;&lt;h3&gt;Deploying and Testing AWS Lambda&lt;/h3&gt;&lt;p&gt;Before adding some actual load to the Lambda function, lets test that the deployment works. To trigger Lambda execution I added &lt;strong&gt;HTTP GET&lt;/strong&gt; &lt;a href=&#34;https://serverless.com/framework/docs/providers/aws/guide/events/&#34;&gt;event&lt;/a&gt; with...&lt;/p&gt;</description><link>https://netdevops.me/2017/building-aws-lambda-with-python-s3-and-serverless/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/building-aws-lambda-with-python-s3-and-serverless/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/building-aws-lambda-with-python-s3-and-serverless/</guid> </item> <item> <title>SR OS Rootifier or how to flatten 7750 SR config</title> <author>rdodin</author> <category>nokia</category> <category>sr os</category> <description>&lt;h1&gt;SR OS Rootifier or how to flatten 7750 SR config&lt;/h1&gt;&lt;p&gt;Back in the days when I mostly did routing stuff I spent the whole day configuring SROS devices via SSH. And once in a while I saw that SSH session or its server part (or even underlying connection) glitched, resulting in a corrupted lines feeded to the device.&lt;/p&gt;&lt;p&gt;What was also quite common is to make a mistake (i.e. syntax one) in a single line and watch like the rest of config got applied to the wrong context.&lt;/p&gt;&lt;p&gt;These sad facts pushed me to create a &lt;strong&gt;rootifier&lt;/strong&gt; CLI script, that was converting tree-like SROS config into flattented (aka rooted) fashion.&lt;/p&gt;&lt;p&gt;&lt;img alt=&#34;rootifier&#34; src=&#34;https://gitlab.com/rdodin/netdevops.me/uploads/29184e488b07d8b5efb77d367a9e41ce/image.png&#34;&gt;&lt;/p&gt;&lt;p&gt;Now I decided to make a web service of that script, that is publicly available at &lt;a href=&#34;http://rootifier.netdevops.me/&#34;&gt;http://rootifier.netdevops.me/&lt;/a&gt;&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;SROS config structure&lt;/h2&gt;&lt;p&gt;As you well aware, SROS config is of indent-based tree-like structure:&lt;/p&gt;&lt;p&gt;```bashconfigure&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;echo &#34;System Configuration&#34;&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;system name &#34;ntdvps&#34; location &#34;netdevops.me&#34; chassis-mode d&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;```&lt;/p&gt;&lt;p&gt;It is readable for a human, but it is much safer to apply batch config using the flattened structure, where each command is given in a full context fashion. Passed through a rootifier our example will transform as displayed:&lt;/p&gt;&lt;p&gt;&lt;code&gt;/configure system name &#34;ntdvps&#34;/configure system location &#34;netdevops.me&#34;/configure system chassis-mode d&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Now each command has a full path applied and even making an error in a single command will not affect the rest of them, making &lt;strong&gt;configuration safer&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;Yeah, probably applying rootifier to a short config snippets make a little sense, but pushing a solid 300+ lines config to a fresh box would definitely benefit from rootifying.&lt;/p&gt;&lt;p&gt;Take a look &lt;a href=&#34;https://www.diffchecker.com/dHwUDWUw&#34;&gt;at this diff&lt;/a&gt; made for a real-life config of SROS box before and after rootifying. Not only &lt;strong&gt;it downsized from 1600 lines to 600&lt;/strong&gt;, it also &lt;strong&gt;became safer&lt;/strong&gt; to push via console/SSH connection.&lt;/p&gt;&lt;h2&gt;Usage scenarios and limitations&lt;/h2&gt;&lt;p&gt;As I explain in the &lt;em&gt;Usage and Limitations&lt;/em&gt; section rootifier accepts&lt;/p&gt;&lt;ul&gt;&lt;li&gt;either the whole config file content&lt;/li&gt;&lt;li&gt;or any part of it, that starts under &lt;code&gt;configure&lt;/code&gt; section&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;For instance, valid config portions are:&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1. Full config&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;As you see it via &lt;code&gt;admin display-config&lt;/code&gt; or in the config file you can copy it it as a whole, or from the beginning to the desired portion&lt;/p&gt;&lt;p&gt;```&lt;/p&gt;&lt;h1&gt;TiMOS-B-14.0.R4 both/x86_64 Nokia 7750 SR Copyright (c) 2000-2016 Nokia.&lt;/h1&gt;&lt;h1&gt;All rights reserved. All use subject to applicable license agreements.&lt;/h1&gt;&lt;h1&gt;Built on Thu Jul 28 17:26:11 PDT 2016 by builder in /rel14.0/b1/R4/panos/main&lt;/h1&gt;&lt;h1&gt;Generated WED NOV 22 12:22:35 2017 UTC&lt;/h1&gt;&lt;p&gt;exit allconfigure&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;System Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;system name &#34;pe.pod62.cats&#34; chassis-mode d dns exit snmp exit time ntp server 10.167.55.2 no shutdown exit sntp shutdown exit dst-zone CEST start last sunday march 02:00 end last sunday october 03:00 exit zone UTC exit&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;```&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2. Portion of the config that starts with 4 spaces exactly&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;system name &#34;pe.pod62.cats&#34; chassis-mode d dns exit snmp exit time ntp server 10.167.55.2 no shutdown exit&lt;/code&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;3. Any part of the config with specified context&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Since rootifier does not know the config structure and makes decision only by indentations in the passed config, it can not say what context was this snippet from:&lt;/p&gt;&lt;p&gt;```&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;p&gt;echo &#34;Policy Configuration&#34;&lt;/p&gt;&lt;h1&gt;--------------------------------------------------&lt;/h1&gt;&lt;pre&gt;&lt;code&gt; policy-options begin prefix-list &#34;loopback&#34; prefix 1.1.1.1/32 exact exit policy-statement &#34;export_loopback&#34; entry 10 from prefix-list &#34;loopback&#34; exit action accept exit exit exit commit exit&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;```&lt;/p&gt;&lt;p&gt;Thus, rootifier will not render the rooted version of this snippet correctly.&lt;/p&gt;&lt;p&gt;Now we, of course, know that policies are configured under the &lt;code&gt;/configure router&lt;/code&gt; context, so we can help rootifier by setting the context:&lt;/p&gt;&lt;p&gt;``` # put a missing context before your snippet router policy-options begin prefix-list &#34;loopback&#34; prefix 1.1.1.1/32 exact exit policy-statement &#34;export_loopback&#34; entry 10 from...&lt;/p&gt;</description><link>https://netdevops.me/2017/sr-os-rootifier-or-how-to-flatten-7750-sr-config/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/sr-os-rootifier-or-how-to-flatten-7750-sr-config/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/sr-os-rootifier-or-how-to-flatten-7750-sr-config/</guid> </item> <item> <title>Yang Explorer in a docker container based on Alpine</title> <author>rdodin</author> <category>alpine linux</category> <category>docker</category> <category>yang</category> <category>yang explorer</category> <description>&lt;h1&gt;Yang Explorer in a docker container based on Alpine&lt;/h1&gt;&lt;p&gt;I wrote about the Yang Explorer in a docker quite some time ago, Yang Explorer was v0.6 at that time. Back then the motivation to create a docker image was pretty simple -- installation was a pain in &lt;strong&gt;v0.6&lt;/strong&gt;, it is still a pain, but the official version bumped to &lt;strong&gt;0.8(beta)&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;So I decided to re-build &lt;a href=&#34;https://hub.docker.com/r/hellt/yangexplorer-docker/&#34;&gt;an image&lt;/a&gt;, now using Alpine Linux as a base image to reduce the size.&lt;/p&gt;&lt;!-- more --&gt;&lt;p&gt;Just take a look how noob-ish I was to publish a &lt;code&gt;Dockerfile&lt;/code&gt; like this:&lt;/p&gt;&lt;p&gt;&lt;code&gt;DockerfileFROM ubuntu:14.04MAINTAINER Roman Dodin &amp;lt;dodin.roman@gmail.com&amp;gt;RUN DEBIAN_FRONTEND=noninteractive apt-get update; apt-get install -y python2.7 python-pip python-virtualenv git graphviz libxml2-dev libxslt1-dev python-dev zlib1g-devRUN DEBIAN_FRONTEND=noninteractive git clone https://github.com/CiscoDevNet/yang-explorer.gitWORKDIR /yang-explorerRUN bash setup.sh -yRUN sed -i -e &#39;s/HOST=\x27localhost\x27/HOST=$HOSTNAME/g&#39; start.shCMD [&#34;bash&#34;, &#34;start.sh&#34;]&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Several unnecessary layers, using Ubuntu as a base -- these are the Docker-novice errors.&lt;/p&gt;&lt;p&gt;Few things changed in the &lt;a href=&#34;https://github.com/CiscoDevNet/yang-explorer&#34;&gt;Yang Explorer&lt;/a&gt; regarding the setup process, now you do not need to install explicitly all the dependencies, they will be installed using the packaged &lt;code&gt;requirements.txt&lt;/code&gt; file, so our Dockerfile could be as short as this:&lt;/p&gt;&lt;p&gt;```DockerfileFROM alpine&lt;/p&gt;&lt;p&gt;LABEL maintainer=&#34;dodin.roman@gmail.com, netdevops.me&#34;&lt;/p&gt;&lt;p&gt;RUN apk add --no-cache bash git python &amp;amp;&amp;amp; \ python -m ensurepip &amp;amp;&amp;amp; \ rm -r /usr/lib/python*/ensurepip &amp;amp;&amp;amp; \ git clone https://github.com/CiscoDevNet/yang-explorer.git&lt;/p&gt;&lt;p&gt;WORKDIR /yang-explorer&lt;/p&gt;&lt;p&gt;RUN apk add --no-cache gcc py-crypto python-dev libffi-dev musl-dev openssl-dev libxml2-dev libxslt-dev &amp;amp;&amp;amp; \ bash setup.sh -y &amp;amp;&amp;amp; \ sed -i -e &#39;s/HOST=\x27localhost\x27/HOST=$HOSTNAME/g&#39; start.sh &amp;amp;&amp;amp; \ apk del musl-dev gcc&lt;/p&gt;&lt;p&gt;CMD [&#34;bash&#34;, &#34;start.sh&#34;]```&lt;/p&gt;&lt;p&gt;In the first &lt;code&gt;RUN&lt;/code&gt; we write a layer with the tools that are needed to clone the official repo and in the second &lt;code&gt;RUN&lt;/code&gt; we install build dependencies, go through setup process and uninstall unnecessary build dependencies to reduce the size.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Compressed image size is &lt;strong&gt;358Mb&lt;/strong&gt;. Uncompressed size is 1.9Gb&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img alt=&#34;Layers disposition&#34; src=&#34;https://lh3.googleusercontent.com/pIf91DS4P8xb3FFuqVxWIjH3VLS3xS6DXp3UXAK3uJCveF9olt-ICnRj6peqqDnIY2k_WH5JEcl6Zc4LdoA476baHWDAywZ2NiSMG8WfQDd1leycyhdqA38s2hjyeN16bX9VGuXfdlc=w676-h397-no&#34;&gt;&lt;/p&gt;&lt;h2&gt;Usage&lt;/h2&gt;&lt;p&gt;To use this image:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;Start the container&lt;/p&gt;&lt;p&gt;&lt;code&gt;shelldocker run -p 8088:8088 -d hellt/yangexplorer-docker&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Navigate your flash-capable browser to &lt;code&gt;http://&amp;lt;ip_of_your_docker_host&amp;gt;:8088&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2&gt;Differences with Robert Csapo image&lt;/h2&gt;&lt;p&gt;Main differences are in the size:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Compressed = 358Mb vs 588Mb&lt;/li&gt;&lt;li&gt;Uncompressed = 1.9Gb vs 2.51Gb&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;Links&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://hub.docker.com/r/hellt/yangexplorer-docker/&#34;&gt;My image on Docker Hub&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://hub.docker.com/r/robertcsapo/yang-explorer/&#34;&gt;Robert&#39; image on Docker hub&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://github.com/CiscoDevNet/yang-explorer&#34;&gt;Official Yang Explorer repo&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</description><link>https://netdevops.me/2017/yang-explorer-in-a-docker-container-based-on-alpine/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2017/yang-explorer-in-a-docker-container-based-on-alpine/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2017/yang-explorer-in-a-docker-container-based-on-alpine/</guid> </item> <item> <title>Prepping up for and passing the AWS Certified Solution Architect - Associate</title> <author>rdodin</author> <category>aws</category> <category>certification</category> <description>&lt;h1&gt;Prepping up for and passing the AWS Certified Solution Architect - Associate&lt;/h1&gt;&lt;p&gt;On May 11th I passed the &lt;a href=&#34;https://aws.amazon.com/certification/certified-solutions-architect-associate/&#34;&gt;AWS Certified Solution Architect Associate&lt;/a&gt; exam which was harder then I expected. In this memo I will outline how I prepared to this exam, what topics you better pay more attention to and some tips and hints I could give to anyone going for AWS CSA exam.&lt;/p&gt;&lt;p&gt;Disclaimer: I took the original AWS CSA exam, not the one that was launched in Feb 2018; this older version is only available to schedule till August 2018. After that date the newer version of this exam will be the only one available. Watch out, it &lt;a href=&#34;https://d1.awsstatic.com/training-and-certification/docs-sa-assoc/AWS_Certified_Solutions_Architect_Associate_Feb_2018_%20Exam_Guide_v1.5.2.pdf&#34;&gt;has a new set of objectives&lt;/a&gt;.&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;Preparation&lt;/h2&gt;&lt;p&gt;Its worth to mention that prior the preparation to this exam I had a little hands on experience with AWS and almost no theoretical knowledge. So I approached the preparation course as an AWS noob.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Q: Do I need to pay for AWS services if I want to pass this exam?&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;A:&lt;/strong&gt; no, you can pass it without having a real hands on, for instance by reading the AWS Study Guide alone. Though, the Free Tier offering by AWS will make the costs for AWS practice really close to $0. Without laying your hands on basic configuration stuff it could be challenging to pass the exam.&lt;/p&gt;&lt;/blockquote&gt;&lt;h3&gt;Main course&lt;/h3&gt;&lt;p&gt;Since I have an active Linux Academy subscription (is now A Cloud Guru) I took theirs certification prep course which I found rather complete and well composed. Its the 20hrs length course with interactive quizzes and the real Hands On Labs. Labs are a great way to gain practice by having the access to AWS Console provided by the Linux Academy.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;img alt=&#34;pic&#34; src=&#34;https://gitlab.com/rdodin/netdevops.me/uploads/46cf4e24404023a8a254b014d10b37ce/image.png&#34;&gt;&lt;center&gt;&lt;small&gt;Each section will test you on the outlined concepts. Most of them have real Labs&lt;/small&gt;&lt;/center&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Quizzes really help you to check that the material you&#39;ve just listened to was actually absorbed by your memory. I went through all the videos on 1.5x speed and cleared all quizzes rather easily.&lt;br&gt;At the very end of the course you can simulate the real exam by answering 60 questions in 80 minutes time frame. While the questions I had during the exam were harder, this simulation can help you to feel the real exam atmosphere.&lt;/p&gt;&lt;p&gt;While Hands On Labs are super useful to get the practical knowledge about the AWS Console and the configuration of the various services, I did not complete them all for the sake of time. But in general, I would highly suggest to clear Hands On Labs, most of the training providers offer them.&lt;/p&gt;&lt;p&gt;Linux Academy also had an assessment service called Cloud Assessments, now when LA merged with A Cloud Guru this is not available anymore. I completed the offered set of practice tasks and loved the gamification part they embedded. Solving the real practical tasks within the AWS Console can help you if you had no previous AWS management activities.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;img alt=&#34;img&#34; src=&#34;https://pbs.twimg.com/media/DcB2qEAWsAEM9bX.jpg&#34;&gt;&lt;center&gt;&lt;small&gt;Cloud Assessments challenge you to solve different practice tasks for each major AWS service&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h4&gt;Main course alternatives&lt;/h4&gt;&lt;p&gt;Of course, Linux Academy is not the only service who made these AWS CSA prep courses, the most popular one I saw on the Internet was the &lt;a href=&#34;https://acloud.guru/&#34;&gt;A Cloud Guru&lt;/a&gt; course. Their students praise this course rather highly, so you can take that one as well. Check out the pricing and the course offerings to pick up the right provider for you.&lt;/p&gt;&lt;h3&gt;Additional resources&lt;/h3&gt;&lt;p&gt;I hate to break it, but my experience showed that the course alone won&#39;t make you pass the exam easily. And not because the courses are not good enough, they are good, but they do not cover all the aspects or do not explain all the details of some service, which you might encounter during the exam.&lt;/p&gt;&lt;h4&gt;Whitepapers&lt;/h4&gt;&lt;p&gt;As a recommended supplement many courses suggest to go over the &lt;a href=&#34;https://aws.amazon.com/certification/certified-solutions-architect-associate/&#34;&gt;AWS Whitepapers&lt;/a&gt; to get more knowledgeable on the various AWS concepts. I&#39;ve peered into the two of the papers and left the rest untouched. While the whitepapers are good and useful, they are ~70 pages long and reading them takes quite some time.&lt;/p&gt;&lt;p&gt;But if time allows, you better read them, since they cover a lot of the concepts you will be tested against. I hadn&#39;t that much time, so I went reading the Study Guide instead.&lt;/p&gt;&lt;h4&gt;AWS CSA Official Study Guide&lt;/h4&gt;&lt;p&gt;The &lt;a href=&#34;https://www.amazon.com/Certified-Solutions-Architect-Official-Study/dp/1119138558&#34;&gt;Study Guide&lt;/a&gt; offers the right amount of information to prepare you for the exam. I personally did not read the book, since I had a pretty good understanding of AWS services by finishing the LinuxAcademy course but if you don&#39;t want to pay for video course a...&lt;/p&gt;</description><link>https://netdevops.me/2018/prepping-up-for-and-passing-the-aws-certified-solution-architect-associate/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2018/prepping-up-for-and-passing-the-aws-certified-solution-architect-associate/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2018/prepping-up-for-and-passing-the-aws-certified-solution-architect-associate/</guid> </item> <item> <title>Prepping up for and passing the Certified Openstack Administrator Exam</title> <author>rdodin</author> <category>certification</category> <category>openstack</category> <description>&lt;h1&gt;Prepping up for and passing the Certified Openstack Administrator Exam&lt;/h1&gt;&lt;p&gt;Shortly after I passed &lt;a href=&#34;aws_csa_certification.md&#34;&gt;AWS CSA&lt;/a&gt; exam I went on a hunt for the next certification to claim. Decided to tackle the &lt;a href=&#34;https://www.openstack.org/coa&#34;&gt;Openstack COA&lt;/a&gt; certification first saving the Docker/Kubernetes certification for a later occasion.&lt;/p&gt;&lt;p&gt;There is a common joke floating around: &lt;em&gt;&#34;Oh, is Openstack still a thing?&#34;&lt;/em&gt; - yes, its pretty much still a thing, especially in the Telecom area where VMs are the only viable option for the most of the cases (think VNFs).&lt;br&gt;Openstack also powers our teams public SDN lab that allows to provision a fully functional Nuage environment in a matter of minutes. So I wanted to get a better operational knowledge of Openstack to be able to support and tune the platform if necessary.&lt;/p&gt;&lt;p&gt;Disclaimer: I took the recently updated COA exam which is based on the Openstack Pike release, although I did not face any Pike-specific questions during the exam. This does not mean that the exam content will stay the same throughout the course evolution, so watch out for the updates.&lt;/p&gt;&lt;!-- more --&gt;&lt;h2&gt;Key takeaways&lt;/h2&gt;&lt;p&gt;Before going into detailed explanation of the preparation steps and the questions I found most challenging to prepare for, check out this list of COA key takeaways:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Although it is a practice, scenario-based exam, its an easy one. You can prepare for it without being exposed to a production-grade Openstack operations.&lt;/li&gt;&lt;li&gt;Focus on the questions that can&#39;t be done via Horizon, as they would eat most of the exam time.&lt;/li&gt;&lt;li&gt;Use the Horizon all the time (unless the task assumes CLI approach); if you are not a CLI jockey I ensure you, you will loose the precious time.&lt;/li&gt;&lt;li&gt;Make use of the embedded notebook to mark the questions left unfinished; you can get back to them later if time permits.&lt;/li&gt;&lt;li&gt;Verify the connection requirements, as the exams virtual-room environment is sensible to a browser version and connection quality.&lt;/li&gt;&lt;li&gt;Think of a backup internet connection.&lt;/li&gt;&lt;li&gt;Clean the desk completely!&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;Preparation&lt;/h2&gt;&lt;p&gt;The exam is a relatively easy one; compared to &lt;a href=&#34;aws_csa_certification.md&#34;&gt;AWS CSA&lt;/a&gt; it has far less material to learn and being a scenario-based exam it doesn&#39;t expect you to memorize things as you can wander in the Horizon dashboard working out a correct solution for the task.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;I actually liked the scenario-based approach more, it tests your hands-on skills rather than the ability to hold a lot of theory in your head (which wears off really fast anyway).&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;So how did I prepare for it? Being a LinuxAcademy user I first tried their COA courses, and they were completely useless. The course author spent 80% of the time in the CLI basically reading out load the CLI commands. Add on top the poor explanation of the basics and you get a perfect example of a bad course. So I do not recommend it to anyone.&lt;/p&gt;&lt;p&gt;When LinuxAcademy failed me on that front I went looking for a preparation book, remembering that &lt;a href=&#34;https://www.amazon.com/Certified-Solutions-Architect-Official-Study/dp/1119138558&#34;&gt;AWS CSA book&lt;/a&gt; was rather awesome. And found the one that I read cover-to-cover and can recommend to anyone looking for a single source of preparation: &lt;strong&gt;Preparing for the Certified OpenStack Administrator Exam&lt;/strong&gt; by Matt Dorn. Here are the links where you can read/buy it:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&#34;https://www.amazon.com/Preparing-Certified-OpenStack-Administrator-Exam-ebook/dp/B06WRT43DW&#34;&gt;Amazon&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://www.safaribooksonline.com/library/view/preparing-for-the/9781787288416/&#34;&gt;Safaribooks&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&#34;https://www.packtpub.com/virtualization-and-cloud/preparing-certified-openstack-administrator-exam&#34;&gt;Packt&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;In contrast to the online course I referred above, this book gives a really good theoretical background on the Openstack services that one would need to configure during the exam, supplementing it with the step-by-step configuration explanation. And yes, it also comes with a VirtualBox-based Openstack installation with pre-configured scenarios for each chapter.&lt;/p&gt;&lt;h3&gt;Horizon all the way&lt;/h3&gt;&lt;p&gt;Although every exam study guide will most likely present you with the GUI and CLI ways of solving a particular task my recommendation is to solve everything in the Horizon, leaving CLI-specific tasks to the CLI.&lt;br&gt;The reason is simple, a regular user will configure things much faster within Horizon dashboard, rather than copy-pasting UUIDs in an unfriendly CLI emulator.&lt;/p&gt;&lt;p&gt;There are tasks that can only be done within the CLI and these are the only ones that I recommend to solve with it.&lt;/p&gt;&lt;h3&gt;CLI-only tasks&lt;/h3&gt;&lt;p&gt;There are tasks that has no way around but using the CLI to crack them. Tasks that require to interact with the objects like:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;domains&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;endpoints&lt;/code&gt;,&lt;/li&gt;&lt;li&gt;Downloading &lt;code&gt;glance&lt;/code&gt; images&lt;/li&gt;&lt;li&gt;Managing &lt;code&gt;swift&lt;/code&gt; ACL rules and expiration dates&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;will require you to open the CLI, but these are the only tasks that will require it. The rest can be done much faster within the Horizon dashboard.&lt;/p&gt;&lt;p&gt;On the other hand I really encourage you to focus on these tasks, especially on...&lt;/p&gt;</description><link>https://netdevops.me/2018/prepping-up-for-and-passing-the-certified-openstack-administrator-exam/</link> <pubDate>Sat, 24 Sep 2022 19:45:47 +0000</pubDate><source url="https://netdevops.me/feed_rss_updated.xml">Applying DevOps to networks</source><comments>https://netdevops.me/2018/prepping-up-for-and-passing-the-certified-openstack-administrator-exam/#__comments</comments><guid isPermaLink="true">https://netdevops.me/2018/prepping-up-for-and-passing-the-certified-openstack-administrator-exam/</guid> </item> </channel></rss>